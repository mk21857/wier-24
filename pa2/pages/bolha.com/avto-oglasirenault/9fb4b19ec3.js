function t(t,e){var o=this;this.container=t,this.observers=[],this.lastX=0,this.lastY=0;var i=!1,n=function(){i||(i=!0,requestAnimationFrame((function(){for(var t=o.observers,e=o.getState(),n=t.length;n--;)t[n].check(e);o.lastX=e.positionX,o.lastY=e.positionY,i=!1})))},s=e.handleScrollResize,r=this.handler=s?s(n):n,h=function(){(o.mutationObserver=new MutationObserver(n)).observe(document,{attributes:!0,childList:!0,subtree:!0})},a={capture:!0,passive:!0};addEventListener("scroll",r,a),addEventListener("resize",r,a),"loading"!==document.readyState?h():addEventListener("DOMContentLoaded",h)}function e(t){var e=~~t.offset||0;return this.offsetX=null!=t.offsetX?~~t.offsetX:e,this.offsetY=null!=t.offsetY?~~t.offsetY:e,this.container=t.container||document.body,this.once=!!t.once,this.observerCollection=t.observerCollection||i,this.activate()}function o(t){if(void 0===t&&(t={}),!(this instanceof o))return new o(t);this.viewports=new Map,this.handleScrollResize=t.handleScrollResize}t.prototype={getState:function(){var t,e,o,i,n=this,s=n.container,r=n.lastX,h=n.lastY;return s===document.body?(t=window.innerWidth,e=window.innerHeight,o=window.pageXOffset,i=window.pageYOffset):(t=s.offsetWidth,e=s.offsetHeight,o=s.scrollLeft,i=s.scrollTop),{width:t,height:e,positionX:o,positionY:i,directionX:r<o?"right":r>o?"left":"none",directionY:h<i?"down":h>i?"up":"none"}},destroy:function(){var t=this.handler,e=this.mutationObserver;removeEventListener("scroll",t),removeEventListener("resize",t),e&&e.disconnect()}},e.prototype={activate:function(){var e=this.container,o=this.observerCollection,i=o.viewports,n=i.get(e);n||(n=new t(e,o),i.set(e,n));var s=n.observers;return s.indexOf(this)<0&&s.push(this),n},destroy:function(){var t=this.container,e=this.observerCollection.viewports,o=e.get(t);if(o){var i=o.observers,n=i.indexOf(this);n>-1&&i.splice(n,1),i.length||(o.destroy(),e.delete(t))}}};var i=new o;function n(t){if(void 0===t&&(t={}),!(this instanceof n))return new n(t);this.onTop=t.onTop,this.onBottom=t.onBottom,this.onLeft=t.onLeft,this.onRight=t.onRight,this.onFit=t.onFit,this._wasTop=!0,this._wasBottom=!1,this._wasLeft=!0,this._wasRight=!1,this._wasFit=!1;var o=e.call(this,t);this.check(o.getState())}function s(t,o){if(void 0===o&&(o={}),!(this instanceof s))return new s(t,o);this.element=t,this.onEnter=o.onEnter,this.onExit=o.onExit,this._didEnter=!1;var i=e.call(this,o);r(t)&&this.check(i.getState())}function r(t){return t&&t.parentNode}n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.check=function(t){var e=this,o=e.onTop,i=e.onBottom,n=e.onLeft,s=e.onRight,r=e.onFit,h=e._wasTop,a=e._wasBottom,c=e._wasLeft,l=e._wasRight,f=e._wasFit,d=e.container,v=e.offsetX,u=e.offsetY,p=e.once,w=d.scrollHeight,g=d.scrollWidth,b=t.width,y=t.height,m=t.positionX,E=t.positionY,_=E-u<=0,L=w>y&&y+E+u>=w,R=m-v<=0,X=g>b&&b+m+v>=g,Y=w<=y&&g<=b,O=!1;i&&!a&&L?i.call(this,d,t):o&&!h&&_?o.call(this,d,t):s&&!l&&X?s.call(this,d,t):n&&!c&&R?n.call(this,d,t):r&&!f&&Y?r.call(this,d,t):O=!0,p&&!O&&this.destroy(),this._wasTop=_,this._wasBottom=L,this._wasLeft=R,this._wasRight=X,this._wasFit=Y},s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype.check=function(t){var e=this,o=e.container,i=e.onEnter,n=e.onExit,s=e.element,h=e.offsetX,a=e.offsetY,c=e.once,l=e._didEnter;if(!r(s))return this.destroy();var f=function(t,e,o,i,n){var s,r,h,a,c=t.getBoundingClientRect();if(!c.width||!c.height)return!1;var l=window.innerWidth,f=window.innerHeight,d=l;if(n===document.body)s=f,r=0,h=d,a=0;else{if(!(c.top<f&&c.bottom>0&&c.left<d&&c.right>0))return!1;var v=n.getBoundingClientRect();s=v.bottom,r=v.top,h=v.right,a=v.left}return c.top<s+o&&c.bottom>r-o&&c.left<h+e&&c.right>a-e}(s,h,a,0,o);!l&&f?(this._didEnter=!0,i&&(i.call(this,s,t),c&&this.destroy())):l&&!f&&(this._didEnter=!1,n&&(n.call(this,s,t),c&&this.destroy()))};var h=s,a=o,c=[],l=function(t){return t};const f=function(t,e){void 0===e&&(e={});var o=e,i=o.threshold,n=void 0===i?0:i,s=o.scrollResizeHandler,r=void 0===s?l:s,f=o.onEnter,d=void 0===f?function(){}:f,v=o.onExit,u=void 0===v?function(){}:v,p=o.once,w=void 0!==p&&p,g=c.find((function(t){var e=t.handleScrollResize;return r===e}));void 0===g&&(g=new a({handleScrollResize:r}),c.push(g));var b=new h(t,{onEnter:function(t){d(t)},onExit:function(t){u(t)},offset:n,once:w,observerCollection:g});return{destroy:b.destroy.bind(b)}};export{f as i};
