import t from"./d176504b75.js";import{N as e,m as r}from"./6f583b2759.js";import"./825e28468d.js";import"./2be7671a02.js";import"./f141f5a29b.js";import"./a20b5a7092.js";import"./eae60494e1.js";import"./e5795dfffe.js";import"./510f0914a3.js";import"./ac447121df.js";class a extends t{static defaultProps={...t.defaultProps,onFetchNextCategory:function(){},onFetchFormMarkup:function(){},beforeFetchFormMarkup:function(){},failedFetchFormMarkup:function(){},categoryType:e,fetchInitialData:!1};constructor(t){super(t),null!==this.$el&&this.updateAppStateWithLimboState()}updateAppStateWithLimboState(){const t=this.$select.filter((t=>t.matches(":not(:disabled)"))).pop()??null,e=this.getTargetIdVal(),r=this.processTargetId(t?.value??""),a=Array.prototype.slice.call(t?.querySelectorAll(":scope option")??[]).map((t=>""===t.value?0:parseInt(t.value,10)));e!==r&&-1!==a.indexOf(e)&&(null!==t&&(t.value=e),this.fetchFormMarkup(e,this.getFormData()))}onPlaceholderSelected(){super.onPlaceholderSelected(0),this.fetchFormMarkup(0,this.getFormData())}onFetchNextCategory(t,r){super.onFetchNextCategory(t,r);const a=this.parseFetchResponse(t);a.isEmpty?this.fetchFormMarkup(this.getTargetIdVal(),this.getFormData()):this.props.categoryType!==e&&this.fetchFormMarkup(0,this.getFormData()),this.props.onFetchNextCategory(a)}fetchNextCategory(t){const{categoryId:e}=t;return this.setTargetIdVal(e),this.publishChangedCategoryEvent(e),super.fetchNextCategory(t)}async lastCategorySelected(t){const{categoryId:e}=t,r=this.haveCategoryId(e);return this.setTargetIdVal(e),this.publishChangedCategoryEvent(e),r&&await this.fetchFormMarkup(this.getTargetIdVal(),this.getFormData()),super.lastCategorySelected(t)}getFormData(...t){return r.getFormData.apply(this,t)}fetchFormMarkup(...t){return r.fetchFormMarkup.apply(this,t)}resetFormMarkup(...t){r.resetFormMarkup.apply(this,t)}}export{a as default};
