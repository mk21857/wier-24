import{o as e}from"./825e28468d.js";import"./2be7671a02.js";import"./f141f5a29b.js";import"./a20b5a7092.js";import"./eae60494e1.js";function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.apply(this,arguments)}function n(){}function i(e,t){for(var n in t)e[n]=t[n];return e}function s(e,t){for(var n in t)e[n]=1;return e}function a(e,t){e.appendChild(t)}function r(e,t,n){e.insertBefore(t,n)}function o(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function c(e){return document.createTextNode(e)}function l(){return document.createComment("")}function f(e,t,n,i){e.addEventListener(t,n,i)}function d(e,t,n,i){e.removeEventListener(t,n,i)}function p(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function m(e,t,n){e.classList[n?"add":"remove"](t)}function h(e,t){e.d(1),t[e.key]=null}function v(){return Object.create(null)}function _(e){e._lock=!0,N(e._beforecreate),N(e._oncreate),N(e._aftercreate),e._lock=!1}function g(e,t){e._handlers=v(),e._slots=v(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function N(e){for(;e&&e.length;)e.shift()()}var O={destroy:function(e){this.destroy=n,this.fire("destroy"),this.set=n,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var i=0;i<n.length;i+=1){var s=n[i];if(!s.__calling)try{s.__calling=!0,s.call(this,t)}finally{s.__calling=!1}}},on:function(e,t){var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}},set:function(e){this._set(i({},e)),this.root._lock||_(this.root)},_recompute:n,_set:function(e){var t=this._state,n={},s=!1;for(var a in e=i(this._staged,e),this._staged={},e)this._differs(e[a],t[a])&&(n[a]=s=!0);s&&(this._state=i(i({},t),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:t}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:t})))},_stage:function(e){i(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:function(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}},y=38;function A(){this.sideEffects=e()}function E(){this.sideEffects.removeAll()}function b(e){var t=this,n=e.changed,i=e.current;e.previous;var s=i.value,a=i.decorateOption;n.content&&null!==s&&(this.sideEffects.removeAll(),this.sideEffects.add((function(){return a(t.refs.option)})))}function C(e,t){var n;return{c:function(){n=u("li")},m:function(e,i){r(e,n,i),n.innerHTML=t.content},p:function(e,t){e.content&&(n.innerHTML=t.content)},d:function(e){e&&o(n)}}}function x(e,t){var n,i,s,a;function c(t){e.fire("click",t)}return{c:function(){f(n=u("li"),"click",c),n.id=i=t.identifierNamespace.item+"-"+t.id+"-"+t.index,n.className=s=t.classNames.item,p(n,"role","option"),p(n,"aria-selected",a=t.isActive?"true":"false"),n.tabIndex="-1",m(n,"is-selected",t.isActive)},m:function(i,s){r(i,n,s),n.innerHTML=t.content,e.refs.option=n},p:function(e,t){e.content&&(n.innerHTML=t.content),(e.identifierNamespace||e.id||e.index)&&i!==(i=t.identifierNamespace.item+"-"+t.id+"-"+t.index)&&(n.id=i),e.classNames&&s!==(s=t.classNames.item)&&(n.className=s),e.isActive&&a!==(a=t.isActive?"true":"false")&&p(n,"aria-selected",a),(e.classNames||e.isActive)&&m(n,"is-selected",t.isActive)},d:function(t){t&&o(n),d(n,"click",c),e.refs.option===n&&(e.refs.option=null)}}}function k(e){var t=this;g(this,e),this.refs={},this._state=i({},e.data),this._intro=!0,this._handlers.update=[b],this._handlers.destroy=[E],this._fragment=function(e,t){var n;function i(e){return null!==e.value?x:C}var s=i(t),a=s(e,t);return{c:function(){a.c(),n=l()},m:function(e,t){a.m(e,t),r(e,n,t)},p:function(t,r){s===(s=i(r))&&a?a.p(t,r):(a.d(1),(a=s(e,r)).c(),a.m(n.parentNode,n))},d:function(e){a.d(e),e&&o(n)}}}(this,this._state),this.root._oncreate.push((function(){A.call(t),t.fire("update",{changed:s({},t._state),current:t._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),_(this))}function R(e){if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if(void 0!==e.createTextRange){e.focus();var t=e.createTextRange();t.collapse(!1),t.select()}}function w(e){var t=requestAnimationFrame(e);return function(){cancelAnimationFrame(t)}}function L(e,t){return e.filter((function(e){return""!==(void 0===e?"":e)})).map((function(e){return""+e+t})).join(" ")}i(k.prototype,O);var V=0;function j(e,t){var n=this,i=(0,this.get().decorateInputEvent)(t),s=function(e){var t=e.target.value;n.set({fixedValue:t})};return e.addEventListener("input",i,!1),e.addEventListener("input",s,!1),{destroy:function(){e.removeEventListener("input",i,!1),e.removeEventListener("input",s,!1)}}}var T={setValue:function(e){var n=this.get().results;this.set({value:e,fixedValue:e,position:null,isOpened:!1,results:n.map((function(e,n){return t({},e,{active:!1})}))})},handlePointerSelect:function(e,t,n,i){var s=this.get();s.results;var a=s.onOptionSelect;this.setValue(t),a(e,t,n)},handleGlobalEvent:function(e){var t=this.get().fixedValue,n=e.which,i=e.target;(function(e){return e>=1&&e<=3})(n)&&this.refs.container.contains(i)||this.set({value:t,position:null,isOpened:!1})},handleKeydownEvent:function(e){var t=e.which,n=this.get(),i=n.isOpened,s=n.onOptionSelect,a=n.position,r=n.results,o=n.fixedValue;switch(t){case y:case 40:this.set({isOpened:!0,direction:t}),this.navigate();break;case 27:e.preventDefault(),this.set({value:o,position:null,isOpened:!1});break;case 13:if(i&&null!==a){var u=r[a];e.preventDefault(),this.setValue(u.value),s(e,u.value,u.meta)}}},handleInputEvent:function(e){var n=this,i=this.get(),s=i.value,a=i.onQueryInput;this.set({loading:!0}),a(s).then((function(e){return n.set({loading:!1,position:null,isOpened:0!==e.length,results:e.map((function(e){return t({},e,{active:!1})}))}),null}))},handleFocusEvent:function(e){var n=this,i=this.get(),s=i.results,a=i.onFocus,r=s.map((function(e){return t({},e,{active:!1})}));this.set({loading:!0,isOpened:0!==r.length}),a(r).then((function(e){return n.set({loading:!1,position:null,isOpened:0!==e.length,results:e.map((function(e){return t({},e,{active:!1})}))}),null}))},handleBlurEvent:function(e){var t=this.get().fixedValue,n=e.relatedTarget;n&&this.refs.container.contains(n)||this.set({value:t,position:null,isOpened:!1})},navigate:function(){var e=this.get(),n=e.results,i=e.position,s=e.direction,a=e.fixedValue,r=e.value,o=i,u=r;if(0!==n.length){if(s===y?null===o?o=n.length-1:0===o?o=null:o-=1:40===s&&(null===o?o=0:o===n.length-1?o=null:o+=1),null!==o){var c=n.map((function(e,t){return null!==e.value?t:null})).filter((function(e){return null!==e}));s===y&&c.reverse(),"number"!=typeof(o=c.filter((function(e){return s===y?e<=o:e>=o})).shift())&&(o=null)}u=null===o?a:n[o].value,this.set({value:u,position:o,results:n.map((function(e,n){return t({},e,{active:n===o})}))})}}};function I(){var t=this;this.sideEffects=e(),this.sideEffects.add((function(){return w((function(){t.sideEffects.add((function(){var e=new MutationObserver((function(e){e.forEach((function(e){"disabled"===e.attributeName&&null===e.oldValue&&t.set({isOpened:!1})}))}));return e.observe(t.refs.input,{attributes:!0,attributeFilter:["disabled"],attributeOldValue:!0}),function(){e.disconnect()}})),t.sideEffects.add((function(){return w((function(){return R(t.refs.input)}))}))}))}))}function S(){this.refs.input.removeAttribute("autocomplete"),this.sideEffects.removeAll()}function F(e){var t=this,n=e.changed,i=e.current;n.position&&i.direction===y&&(this.sideEffects.removeAll(),this.sideEffects.add((function(){return w((function(){return R(t.refs.input)}))})))}function H(e,t,n){var i=Object.create(e);return i.result=t[n],i.index=n,i}function M(e,t){for(var n,i,s,c,l,f,d=[],_=v(),g=t.preparedResults,N=function(e){return e.result.id},O=0;O<g.length;O+=1){var y=H(t,g,O),A=N(y);d[O]=_[A]=P(e,A,y)}return{c:function(){for(n=u("div"),i=u("ul"),O=0;O<d.length;O+=1)d[O].c();i.className=s=t.classNames.list,n.id=c=t.identifierNamespace.results+"-"+t.id,p(n,"role","listbox"),p(n,"aria-expanded",l=t.isOpened?"true":"false"),n.className=f=t.classNames.results,m(n,"is-opened",t.isOpened)},m:function(e,t){for(r(e,n,t),a(n,i),O=0;O<d.length;O+=1)d[O].m(i,null)},p:function(t,a){var r=a.preparedResults;d=function(e,t,n,i,s,a,r,o,u,c,l,f,d,p){for(var m=e.length,h=r.length,v=m,_={};v--;)_[e[v].key]=v;var g=[],N={},O={};for(v=h;v--;){var y=p(a,r,v),A=i(y),E=o[A];E?s&&E.p(n,y):(E=l(t,A,y)).c(),g[v]=N[A]=E,A in _&&(O[A]=Math.abs(v-_[A]))}var b={},C={};function x(e){e[f](u,d),o[e.key]=e,d=e.first,h--}for(;m&&h;){var k=g[h-1],R=e[m-1],w=k.key,L=R.key;k===R?(d=k.first,m--,h--):N[L]?!o[w]||b[w]?x(k):C[L]?m--:O[w]>O[L]?(C[w]=!0,x(k)):(b[L]=!0,m--):(c(R,o),m--)}for(;m--;)N[(R=e[m]).key]||c(R,o);for(;h;)x(g[h-1]);return g}(d,e,t,N,1,a,r,_,i,h,P,"m",null,H),t.classNames&&s!==(s=a.classNames.list)&&(i.className=s),(t.identifierNamespace||t.id)&&c!==(c=a.identifierNamespace.results+"-"+a.id)&&(n.id=c),t.isOpened&&l!==(l=a.isOpened?"true":"false")&&p(n,"aria-expanded",l),t.classNames&&f!==(f=a.classNames.results)&&(n.className=f),(t.classNames||t.isOpened)&&m(n,"is-opened",a.isOpened)},d:function(e){for(e&&o(n),O=0;O<d.length;O+=1)d[O].d()}}}function P(e,t,n){var i,s={identifierNamespace:n.identifierNamespace,classNames:n.classNames,id:n.id,index:n.index,content:n.result.content,isActive:n.result.active,value:n.result.value,decorateOption:n.decorateOption},a=new k({root:e.root,store:e.store,data:s});return a.on("click",(function(t){e.handlePointerSelect(t,n.result.value,n.result.meta,n.index)})),{key:t,first:null,c:function(){i=l(),a._fragment.c(),this.first=i},m:function(e,t){r(e,i,t),a._mount(e,t)},p:function(e,t){n=t;var i={};e.identifierNamespace&&(i.identifierNamespace=n.identifierNamespace),e.classNames&&(i.classNames=n.classNames),e.id&&(i.id=n.id),e.preparedResults&&(i.index=n.index),e.preparedResults&&(i.content=n.result.content),e.preparedResults&&(i.isActive=n.result.active),e.preparedResults&&(i.value=n.result.value),e.decorateOption&&(i.decorateOption=n.decorateOption),a._set(i)},d:function(e){e&&o(i),a.destroy(e)}}}function B(e){var t,n=this;g(this,e),this.refs={},this._state=i((t=V,V+=1,{namespace:"x-Autosuggest",value:"",fixedValue:"",isOpened:!1,loading:!1,id:t,position:null,results:[],direction:null,isComponentActive:!0}),e.data),this._recompute({namespace:1,htmlClassNamespace:1,results:1},this._state),this._intro=!0,this._handlers.update=[F],this._handlers.destroy=[S],this._fragment=function(e,t){var n,i,s,l,h,v,_,g,N,O,y,A,E=!1;function b(t){e.handleGlobalEvent(t)}function C(){E=!0,e.set({value:s.value}),E=!1}function x(t){e.handleKeydownEvent(t)}function k(t){e.handleFocusEvent(t)}function R(t){e.handleBlurEvent(t)}document.addEventListener("click",b);var w=t.hasResults&&M(e,t);return{c:function(){n=c("\n"),i=u("div"),s=e.options.elementToHandle,y=c("\n\t"),w&&w.c(),f(s,"input",C),l=j.call(e,s,(function(t){e.handleInputEvent(t)})),f(s,"keydown",x),f(s,"focusin",k),f(s,"focusout",R),s.autocomplete=h=t.isComponentActive?"off":null,s.className=v=t.elementClassName+(t.isComponentActive?" "+t.classNames.input:""),p(s,"role",_=t.isComponentActive?"combobox":null),p(s,"aria-autocomplete",g=t.isComponentActive?"list":null),p(s,"aria-owns",N=t.isComponentActive&&t.hasResults?t.identifierNamespace.results+"-"+t.id:null),p(s,"aria-activedescendant",O=t.isComponentActive&&null!==t.position?t.identifierNamespace.item+"-"+t.id+"-"+t.position:null),i.className=A=t.classNames.container,m(i,"is-opened",t.isOpened)},m:function(o,u){r(o,n,u),r(o,i,u),a(i,s),e.refs.input=s,s.value=t.value,a(i,y),w&&w.m(i,null),e.refs.container=i},p:function(t,n){!E&&t.value&&(s.value=n.value),t.isComponentActive&&h!==(h=n.isComponentActive?"off":null)&&(s.autocomplete=h),(t.elementClassName||t.isComponentActive||t.classNames)&&v!==(v=n.elementClassName+(n.isComponentActive?" "+n.classNames.input:""))&&(s.className=v),t.isComponentActive&&_!==(_=n.isComponentActive?"combobox":null)&&p(s,"role",_),t.isComponentActive&&g!==(g=n.isComponentActive?"list":null)&&p(s,"aria-autocomplete",g),(t.isComponentActive||t.hasResults||t.identifierNamespace||t.id)&&N!==(N=n.isComponentActive&&n.hasResults?n.identifierNamespace.results+"-"+n.id:null)&&p(s,"aria-owns",N),(t.isComponentActive||t.position||t.identifierNamespace||t.id)&&O!==(O=n.isComponentActive&&null!==n.position?n.identifierNamespace.item+"-"+n.id+"-"+n.position:null)&&p(s,"aria-activedescendant",O),n.hasResults?w?w.p(t,n):((w=M(e,n)).c(),w.m(i,null)):w&&(w.d(1),w=null),t.classNames&&A!==(A=n.classNames.container)&&(i.className=A),(t.classNames||t.isOpened)&&m(i,"is-opened",n.isOpened)},d:function(t){e.options.target.appendChild(s),document.removeEventListener("click",b),t&&(o(n),o(i)),d(s,"input",C),l.destroy(),d(s,"keydown",x),d(s,"focusin",k),d(s,"focusout",R),e.refs.input===s&&(e.refs.input=null),w&&w.d(),e.refs.container===i&&(e.refs.container=null)}}}(this,this._state),this.root._oncreate.push((function(){I.call(n),n.fire("update",{changed:s({},n._state),current:n._state})})),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),_(this))}i(B.prototype,O),i(B.prototype,T),B.prototype._recompute=function(e,n){var i;e.namespace&&this._differs(n.identifierNamespace,n.identifierNamespace={container:L(i=[n.namespace],""),input:L(i,"-input"),results:L(i,"-results"),list:L(i,"-list"),item:L(i,"-item")})&&(e.identifierNamespace=!0),(e.namespace||e.htmlClassNamespace)&&this._differs(n.classNames,n.classNames=function(e){var t=[e.namespace,e.htmlClassNamespace];return{container:L(t,""),input:L(t,"-input"),results:L(t,"-results"),list:L(t,"-list"),item:L(t,"-item")}}(n))&&(e.classNames=!0),e.results&&(this._differs(n.hasResults,n.hasResults=0!==n.results.length)&&(e.hasResults=!0),this._differs(n.preparedResults,n.preparedResults=n.results.map((function(e,n){var i=""+e.content;return i=null===e.value?"null"+n+i:""+e.value+i,void 0!==e.meta&&(i=""+JSON.stringify(e.meta)+i),t({},e,{id:i})})))&&(e.preparedResults=!0))};const Q=function(e,t){void 0===t&&(t={});var n=t,i=n.htmlClassNamespace,s=void 0===i?"":i,a=n.decorateOption,r=void 0===a?function(e){}:a,o=n.decorateInputEvent,u=void 0===o?function(e){return e}:o,c=n.onOptionSelect,l=void 0===c?function(e,t,n){}:c,f=n.onQueryInput,d=void 0===f?function(e){return Promise.resolve([])}:f,p=n.onFocus,m=void 0===p?function(e){return Promise.resolve([])}:p,h=e.value,v=new B({target:e.parentElement,elementToHandle:e,data:{value:h,fixedValue:h,elementClassName:e.className,htmlClassNamespace:s,decorateOption:r,decorateInputEvent:u,onOptionSelect:l,onQueryInput:d,onFocus:m}});return{destroy:function(){v.set({isComponentActive:!1}),v.destroy()}}};export{Q as default};
