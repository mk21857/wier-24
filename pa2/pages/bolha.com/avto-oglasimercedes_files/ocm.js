/** bolha.com ocm.js-build-2.20240402180632 **/

(()=>{var na=(t,e)=>()=>(t&&(e=t(t=0)),e);var V=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var qn=V((qc,Vn)=>{Vn.exports={log:!1,debug:!1,use_window_top:!0,uses_cmp:!0,site_categories:["IAB12"],dont_touch_flag:!1,change_correlator:!0,services:{fou_analytics:{active:!1,debug:!1},cmp:{active:!1,debug:!1,network_id:null},iab_compliance:{active:!0,debug:!1},gpt:{active:!1,debug:!1,collapseEmptyDivs:[!1,!1],enableSingleRequest:!0,setCentering:!0,disableInitialLoad:!0},blockthrough:{active:!1,debug:!1},geolocation:{active:!0,debug:!1},injected_tags:{active:!1,debug:!1,tags:[]},lazyload:{active:!0,debug:!1,page_types:["ROS"],version:2,include_offset:"1200",load_offset:"800",ad_load_offsets:[]},adblock:{active:!1,debug:!1,pairs:[]},outbrain:{active:!1,debug:!1,desktop:{enable:!0,widgetId:"GS_1",installationKey:"CYOCM2IDF6569I0FK92EEOL10",styles:"margin: 0px auto 60px;",classes:"OUTBRAIN",include_ob_content_url:!0,conditions:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"},lazyload:{enable:!1,offset:800}},mobile:{enable:!0,widgetId:"GS_1",installationKey:"CYOCM2IDF6569I0FK92EEOL10",styles:"margin: 0px auto 60px;",classes:"OUTBRAIN",include_ob_content_url:!0,conditions:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"},lazyload:{enable:!1,offset:800}}},fizz:{active:!1,debug:!1,page_types:["ROS"],interval:"30000",advertisers_whitelist:[{id:4817873421,name:"Bolha na Bolha"},{id:4758011220,name:"Mojedelo na Mojedelo"},{id:4755323209,name:"Google AdExchange"},{id:4754686719,name:"Google AdSense"},{id:5038821490,name:"TABOR \u0160PORT d.o.o., ui: taborsport"},{id:5272902410,name:"OCM Digital Media"},{id:5295895843,name:"Amazon"}],ads_whitelist:[{path:"/4099697/dfp_rectangle_2_bolha_mobile"},{path:"/4099697/dfp_rectangle_1_bolha_mobile"},{path:"/4099697/dfp_list_bottom_bolha_mobile"},{path:"/4099697/dfp_list_top_bolha_mobile"},{path:"/4099697/dfp_adlist_below_bolha_mobile"},{path:"/4099697/dfp_adlist_middle1_bolha_mobile"},{path:"/4099697/dfp_list_middle_3_5_bolha_mobile"},{path:"/4099697/dfp_list_middle_bolha_mobile"},{path:"/4099697/dfp_interstitial_bolha_mobile"},{path:"/4099697/dfp_rectangle_ispodGAL_bolha_mobile"},{path:"/4099697/dfp_list_bottom_bolha"},{path:"/4099697/dfp_rectangle_bolha"},{path:"/4099697/dfp_list_top_bolha"},{path:"/4099697/dfp_below_bolha"},{path:"/4099697/dfp_middle1_bolha"},{path:"/4099697/dfp_list_middle_bolha"},{path:"/4099697/dfp_halfpage_bolha"},{path:"/4099697/dfp_detail_below_bolha"},{path:"/4099697/dfp_billboard_bolha"},{path:"/75351959,4099697/bolha.com/mobile_sticky"}]},header_bidding:{active:!0,debug:!1,page_types:["ROS"],adsqRTDModuleEnabled:!1,adelaideEnabled:!1,adServerCurrency:"EUR",bidderTimeout:"1500",custom_granularity:!0,amazon_sid:"21e3d7ee-4312-4deb-8ada-99c25a814bef",domain:null,adUnits:[{code:"/4099697/dfp_rectangle_2_bolha_mobile",sizes:"[[300,250],[320,50],[336,280]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_rectangle_2_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_rectangle_2_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"openx",params:{unit:'"558907880"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646488,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018001"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1018001"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018001"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_rectangle_1_bolha_mobile",sizes:"[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_rectangle_1_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_rectangle_1_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]",video:null}},{bidder:"openx",params:{unit:'"558907881"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"559330484"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646489,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1688033,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,50]",siteId:'"1018002"'}},{bidder:"ix",params:{size:"[300,100]",siteId:'"1018002"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018002"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1018002"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"1018002"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018002"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner","video"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/4099697/dfp_list_bottom_bolha_mobile",sizes:"[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_list_bottom_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_list_bottom_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"openx",params:{unit:'"558907882"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646491,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,50]",siteId:'"1018003"'}},{bidder:"ix",params:{size:"[300,100]",siteId:'"1018003"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018003"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1018003"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"1018003"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018003"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_list_top_bolha_mobile",sizes:"[[300,250],[336,280]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_list_top_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773324",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_list_top_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"openx",params:{unit:'"558907883"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646490,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018004"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018004"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_adlist_below_bolha_mobile",sizes:"[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_adlist_below_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_adlist_below_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]",video:null}},{bidder:"openx",params:{unit:'"558907884"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"559330485"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646494,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1688035,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,50]",siteId:'"1018005"'}},{bidder:"ix",params:{size:"[300,100]",siteId:'"1018005"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018005"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1018005"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"1018005"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018005"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner","video"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/4099697/dfp_adlist_middle1_bolha_mobile",sizes:"[[300,250],[300,600],[320,50],[336,280]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_adlist_middle1_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"teads",params:{size:"[[300,600]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_adlist_middle1_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]",video:null}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x600"',size:"[[300,600]]",video:null}},{bidder:"openx",params:{unit:'"558907885"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"559330486"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646496,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1688034,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018006"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1018006"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1018006"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018006"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner","video"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/4099697/dfp_list_middle_bolha_mobile",sizes:"[[320,50],[336,280],[300,250],[1,1]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_list_middle_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"teads",params:{size:"[[1,1]]",pageId:"179186",placementId:"194191"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_list_middle_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]",video:null}},{bidder:"openx",params:{unit:'"558907887"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"560706511"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646493,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1764050,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1018008"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018008"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018008"'}},{bidder:"ix",params:{size:"[1,1]",siteId:'"1018008"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner","video"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/4099697/dfp_interstitial_bolha_mobile",sizes:"[[336,280],[300,250]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_interstitial_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_interstitial_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"openx",params:{unit:'"558907888"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646495,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018009"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018009"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_rectangle_ispodGAL_bolha_mobile",sizes:"[[320,50],[336,280],[300,600],[300,250],[1,1]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_rectangle_ispodGAL_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773330",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"teads",params:{size:"[[300,600]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_rectangle_ispodGAL_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]",video:null}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x600"',size:"[[300,600]]",video:null}},{bidder:"openx",params:{unit:'"558907889"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"560706512"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646497,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1764051,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1018010"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018010"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1018010"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018010"'}},{bidder:"ix",params:{size:"[1,1]",siteId:'"1018010"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner","video"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/4099697/dfp_skyscraper_bolha",sizes:"[[160,600]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_skyscraper_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_skyscraper_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"openx",params:{unit:'"558907890"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646499,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[160,600]",siteId:'"1018011"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_rectangle_bolha",sizes:"[[300,250],[300,600]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_rectangle_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"teads",params:{size:"[[300,600]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_rectangle_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]",video:null}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x600"',size:"[[300,600]]",video:null}},{bidder:"openx",params:{unit:'"558907891"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"559330487"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646501,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1688036,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018012"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1018012"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner","video"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/4099697/dfp_list_bottom_bolha",sizes:"[[468,60],[336,280],[300,250]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_list_bottom_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_list_bottom_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"openx",params:{unit:'"558907892"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646498,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1018003"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018003"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018003"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1018013"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018013"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018013"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_list_top_bolha",sizes:"[[468,60],[336,280],[300,250]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_list_top_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_list_top_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"openx",params:{unit:'"558907893"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646502,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1018004"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018004"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018004"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1018014"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018014"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018014"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_below_bolha",sizes:"[[468,60],[336,280],[300,250]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_below_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_below_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]",video:null}},{bidder:"openx",params:{unit:'"558907894"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"559330488"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646500,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1688037,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1018015"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018015"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018015"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner","video"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/4099697/dfp_middle1_bolha",sizes:"[[300,250],[336,280],[468,60]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_middle1_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_middle1_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]",video:null}},{bidder:"openx",params:{unit:'"558907895"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"559330489"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646503,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1688038,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018016"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018016"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1018016"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner","video"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/4099697/dfp_list_middle_bolha",sizes:"[[300,250],[336,280],[468,60],[1,1]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_list_middle_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190",video:null}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_list_middle_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]",video:null}},{bidder:"openx",params:{unit:'"558907896"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"559330490"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646504,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1688039,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018008"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018008"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1018008"'}},{bidder:"ix",params:{size:"[1,1]",siteId:'"1018008"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018017"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018017"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1018017"'}},{bidder:"ix",params:{size:"[1,1]",siteId:'"1018017"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner","video"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/4099697/dfp_halfpage_bolha",sizes:"[[300,250],[300,600],[160,600]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_halfpage_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773338",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"teads",params:{size:"[[300,600]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_halfpage_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x600"',size:"[[300,600]]"}},{bidder:"openx",params:{unit:'"558907897"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646505,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018018"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1018018"'}},{bidder:"ix",params:{size:"[160,600]",siteId:'"1018018"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_detail_below_bolha",sizes:"[[728,90]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_detail_below_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_detail_below_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"728x90"',size:"[[728,90]]"}},{bidder:"openx",params:{unit:'"558907898"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646507,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"1018019"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_billboard_bolha",sizes:"[[970,250]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_billboard_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773340",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_billboard_bolha"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"970x250"',size:"[[970,250]]"}},{bidder:"openx",params:{unit:'"558907899"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646506,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[970,250]",siteId:'"1018020"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[]},{code:"/75351959,4099697/bolha.com/inread_pb",sizes:"[[300,250],[336,280]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_middle1_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/75351959,4099697/bolha.com/inread_pb"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"openx",params:{unit:'"559330482"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"openx",params:{unit:'"559330491"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1688042,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1688041,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018021"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018021"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner","videoInArticle"],size_mapping:[],video:{context:"outstream",playerSize:"[[300,169]]"}},{code:"/75351959,4099697/bolha.com/mobile_sticky",sizes:"[[320,100],[320,50],[300,100],[300,50]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/75351959,4099697/bolha.com/mobile_sticky"}',pubId:"5e5558fade26a9e"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/75351959,4099697/bolha.com/mobile_sticky"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"openx",params:{unit:'"559330483"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1688040,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"1018022"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1018022"'}},{bidder:"ix",params:{size:"[300,100]",siteId:'"1018022"'}},{bidder:"ix",params:{size:"[300,50]",siteId:'"1018022"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[]},{code:"/4099697/desk_rectangle_naslovnica",sizes:"[[300,250],[336,280]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/desk_rectangle_naslovnica"}',pubId:"5e5558fade26a9e"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/desk_rectangle_naslovnica"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"openx",params:{unit:'"559457471"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1695427,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018023"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018023"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_halfpage_2_bolha",sizes:"[[300,250],[300,600],[160,600]]",page_types:["ROS"],premium:!1,bids:[{bidder:"amazon",params:[]},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_halfpage_2_bolha"}',pubId:"5e5558fade26a9e"}},{bidder:"openx",params:{unit:'"560706508"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1890808,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x600"',size:"[[300,600]]"}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1094871"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1094871"'}},{bidder:"ix",params:{size:"[160,600]",siteId:'"1094871"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[]},{code:"/4099697/bol_midas_ad_unit",sizes:"[[300,250],[336,280],[468,60]]",page_types:["ROS"],premium:!1,bids:[{bidder:"amazon",params:[]},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/bol_midas_ad_unit"}',pubId:"5e5558fade26a9e"}},{bidder:"openx",params:{unit:'"560706509"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1890807,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1094872"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1094872"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1094872"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1094873"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1094873"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1094873"'}}],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[]},{code:"/4099697/bol_midas_ad_unit_mobile",sizes:"[[300,250],[320,480],[336,280],[320,50]]",page_types:["ROS"],premium:!1,bids:[{bidder:"amazon",params:[]},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/bol_midas_ad_unit_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"openx",params:{unit:'"560706510"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1890809,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1094873"'}},{bidder:"ix",params:{size:"[320,480]",siteId:'"1094873"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1094873"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1094873"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[]},{code:"/4099697/dfp_list_middle_3_5_bolha_mobile",sizes:"[[300,50],[300,100],[320,50],[320,100],[300,250],[336,280],[300,600],[468,60]]",page_types:["ROS"],bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"onetag",params:{ext:'{"placement_name": "/4099697/dfp_list_middle_3_5_bolha_mobile"}',pubId:"5e5558fade26a9e"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773327",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"teads",params:{size:"[[300,250]]",pageId:"179185",placementId:"194190"}},{bidder:"teads",params:{size:"[[300,600]]",pageId:"179185",placementId:"194190"}},{bidder:"pubmatic",params:{lat:null,lon:null,yob:null,dctr:null,video:null,adSlot:'"/4099697/dfp_list_middle_3_5_bolha_mobile"',gender:null,currency:null,kadfloor:null,pmzoneid:null,kadpageurl:null,outstreamAU:null,publisherId:'"157884"'}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x250"',size:"[[300,250]]"}},{bidder:"iprom",params:{id:'"d6900fea45d20911"',dimension:'"300x600"',size:"[[300,600]]"}},{bidder:"openx",params:{unit:'"558907886"',delDomain:'"ocmdigitalmedia-d.openx.net"',customFloor:"0.01",customParams:null,doNotTrack:!1,coppa:!1}},{bidder:"smartadserver",params:{buId:null,ckId:null,domain:'"//www14.smartadserver.com"',pageId:1748045,siteId:577613,target:null,appName:null,bidfloor:null,currency:null,formatId:71381}},{bidder:"adform",params:{mid:1646492,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"ix",params:{size:"[300,50]",siteId:'"1018007"'}},{bidder:"ix",params:{size:"[300,100]",siteId:'"1018007"'}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1018007"'}},{bidder:"ix",params:{size:"[320,100]",siteId:'"1018007"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1018007"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1018007"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1018007"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1018007"'}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[]}],analytics:["ocmpba"],bidders:[{name:"adform",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"criteo",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"onetag",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"openx",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"rubicon",bid_cpm_adjust:"1.00",active:!1,geo:[]},{name:"sharethrough",bid_cpm_adjust:"1.00",active:!1,geo:["AU","BR","CA","FR","DE","MX","IT","ES","US","GB"]},{name:"smartadserver",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"appnexus",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"ix",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"teads",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"pubmatic",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"iprom",bid_cpm_adjust:"1.00",active:!0,geo:[]},{name:"amazon",bid_cpm_adjust:"1.00",active:!0,geo:[]}],functionality:"lazyload_v2",video_mediatype_in_300:!1},mobile_inread_sticky:{active:!1,debug:!1,show_text:!1,top:0,pairs:[]},mwi:{active:!0,debug:!1,page_types:["ROS"],code:"/75351959,4099697/bolha.com/mobwebint",safari:!0,desktop:!1,mobile:!0,unhideWindow:!0},sticky:{active:!0,debug:!1,ads:[{conditions:{page_types:["ROS"],hide_if_skin:!0,retract:!1,device:"mobile",min_width:1440,exclude_urls:[]},active:!1,code:"/75351959,4099697/bolha.com/mobile_sticky",sizes:"[[320,50],[300,100]]",position:"bottom",bg_color:"rgba(255, 255, 255, 0.54)"}]},vi:{active:!1,debug:!1,iab:"IAB1",style:"margin: 10px auto;",mobile:{conditions:{page_types:["ROS"],selector:".blog-post > p",count_gt:6,position:0,word_count:0,words_gt:0,place:"insertAfter"}},desktop:{conditions:{page_types:["ROS"],selector:".blog-post > p",count_gt:6,position:0,word_count:0,words_gt:0,place:"insertAfter"}}},primis:{active:!1,debug:!1,src:null,style:"display:inline-block; width:100%; height:100%; margin: 10px auto;",mobile:{conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},geo_filtering:!1,geo_filtering_countries:[]},desktop:{conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},geo_filtering:!1,geo_filtering_countries:[]}},story_teller:{active:!1,debug:!1,ad_tag_url:"https://adpods.orangeclickmedia.com/pods/333e3d39307f323e3c?2=2",delay_first_ad_request:0,load_offset:-1,color:"#19A7D8",source:"rss",stories_type:"html",rss_url:"https://cdn.orangeclickmedia.com/rss/bolha/feed_realestate.xml",video_url:null,captions_url:null,link_target:"_top",link_text:"Ve\u010D o tem",mobile:{styles:"margin:0 auto 0.83333rem;",classes:null,conditions:{page_types:["ROS"],selector:".ClassifiedDetailSystemDetails",count_gt:0,position:0,word_count:0,words_gt:0,place:"insertAfter"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:"bottom_right",offsets:{top:0,right:0,left:0,bottom:"50"}}},desktop:{styles:"margin:0 auto 0.83333rem;",classes:null,conditions:{page_types:["ROS"],selector:".ClassifiedDetailSystemDetails",count_gt:0,position:0,word_count:0,words_gt:0,place:"insertAfter"},sticky:{enable:!0,on_ad_demand:!0,start_sticky:!0,position:"bottom_right",offsets:{top:0,right:"10",left:0,bottom:"60"}}},branding:{logo_url:"https://static.bolha.com/dist/67a16d0dcc.ico",title:"Zadnji oglasi",site_name:"bolha.com"},language:"el"},story_teller_v2:{active:!1,debug:!1,midRollTime:20,playerTagId:null,publisherId:"62ed18128bb9d95dbe10e294",source:null,rss_url:null,redirect_target:"_top",enable_analytics:!1,mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,full_width:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,full_width:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},branding:{logo_url:null,title:null,color:"#f59e0b",textColor:"#fff",custom_css:null},language:"el",color:"#f59e0b",textColor:"#fff",stories_type:null,video_url:null,captions_url:null},reaper:{active:!0,debug:!1,timeout:1500,language:"sl"},in_image:{active:!1,debug:!1,fc:100,withoutLeft:!1,tags:[],available_sizes:[{widthImg:500,heightImg:100,adSizes:"[[300,50]]",isActive:!1,isMobile:!1},{widthImg:500,heightImg:300,adSizes:"[[300,100]]",isActive:!1,isMobile:!1},{widthImg:540,heightImg:100,adSizes:"[[320,50]]",isActive:!1,isMobile:!1},{widthImg:540,heightImg:250,adSizes:"[[320,100]]",isActive:!1,isMobile:!1},{widthImg:838,heightImg:180,adSizes:"[[468,60]]",isActive:!1,isMobile:!1},{widthImg:900,heightImg:180,adSizes:"[[728,90]]",isActive:!0,isMobile:!1},{widthImg:320,heightImg:100,adSizes:"[[320,50]]",isActive:!0,isMobile:!0},{widthImg:468,heightImg:100,adSizes:"[[468,60]]",isActive:!0,isMobile:!0}],bg_color:"#ffffff00"},adlightning:{active:!1,debug:!1,site:null},teads_analytics:{active:!1,debug:!1,publisher_id:null},user_engagement:{active:!0,debug:!1,interval:2e3},aniview:{active:!1,debug:!1,mobile:{playerTagId:"63f867d164e7cd3103026514",publisher:"62ed18128bb9d95dbe10e294",rules:{page_types:["ROS"],selector:".ClassifiedDetailSystemDetails",position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"},styles:"margin:0 auto 0.83333rem;",classes:null,sticky:{enable:!1,width:256,height:200,position:"bottom_right",offsets:{top:0,right:0,left:0,bottom:0}},vchack:!1,vchack_position:"Top-Right"},desktop:{playerTagId:"63f867d164e7cd3103026514",publisher:"62ed18128bb9d95dbe10e294",rules:{page_types:["ROS"],selector:".ClassifiedDetailSystemDetails",position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"},styles:"margin:0 auto 0.83333rem;",classes:null,sticky:{enable:!1,width:256,height:200,position:"bottom_right",offsets:{top:0,right:0,left:0,bottom:0}},vchack:!1,vchack_position:"Top"}},instream:{active:!1,debug:!1,color:"#f59e0b",ad_tag_url:null,dispose_after_ad:!1,video_url:{landscape:"//cdn.orangeclickmedia.com/videos/xoria-sos.mp4",vertical:"//cdn.orangeclickmedia.com/videos/vertical.mp4",square:"//cdn.orangeclickmedia.com/videos/square-sky.mp4"},mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},language:"el"},instream_hb:{active:!1,debug:!1,color:"#f59e0b",video_url:{landscape:"//cdn.orangeclickmedia.com/videos/xoria-sos.mp4",vertical:"//cdn.orangeclickmedia.com/videos/vertical.mp4",square:"//cdn.orangeclickmedia.com/videos/square-sky.mp4"},adunits:[],mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}}}},uam:{active:!1,debug:!1,pubID:"21e3d7ee-4312-4deb-8ada-99c25a814bef",page_types:["ROS"],adServer:"googletag",bidTimeout:"1500"},engageya:{active:!1,debug:!1,mobile:{wid:null,pubid:null,webid:null,conditions:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"}},desktop:{wid:null,pubid:null,webid:null,conditions:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"}}}},env:"prod",domain:"bolha.com",script_tag:"bolha.com",build:"2.20240402180632",seller_id:"0j8ofwegzdn371kr",adops_seller_id:"f409f088199d821dbe1e41b624ec75b3",schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"orangeclickmedia.com",sid:"0j8ofwegzdn371kr",hp:1}]}}}});var Un=V(()=>{var Ti=navigator.userAgent||navigator.vendor||window.opera,Uc=Ti.indexOf("FBAN")>-1||Ti.indexOf("FBAV")>-1,Kc=Ti.indexOf("iPhone")>-1,ra=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,Gc=window.safari!==void 0,sa=!!document.documentMode,Wc=!sa&&!!window.StyleMedia,oa=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime),$c=(oa||ra)&&!!window.CSS});var Kn=V((Yc,ni)=>{"use strict";ni.exports=Pi;ni.exports.isMobile=Pi;ni.exports.default=Pi;var aa=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,la=/android|ipad|playbook|silk/i;function Pi(t){t||(t={});let e=t.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;let i=aa.test(e)||!!t.tablet&&la.test(e);return!i&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(i=!0),i}});var Ri=V((Qc,Gn)=>{"use strict";Gn.exports=function(e,i){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return e.apply(i,r)}}});var Ue=V((Zc,Jn)=>{"use strict";var ua=Ri(),Ct=Object.prototype.toString;function ki(t){return Ct.call(t)==="[object Array]"}function Oi(t){return typeof t>"u"}function da(t){return t!==null&&!Oi(t)&&t.constructor!==null&&!Oi(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function ca(t){return Ct.call(t)==="[object ArrayBuffer]"}function ha(t){return typeof FormData<"u"&&t instanceof FormData}function fa(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function pa(t){return typeof t=="string"}function ga(t){return typeof t=="number"}function Wn(t){return t!==null&&typeof t=="object"}function ri(t){if(Ct.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function ma(t){return Ct.call(t)==="[object Date]"}function va(t){return Ct.call(t)==="[object File]"}function ba(t){return Ct.call(t)==="[object Blob]"}function $n(t){return Ct.call(t)==="[object Function]"}function ya(t){return Wn(t)&&$n(t.pipe)}function wa(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function xa(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Sa(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ni(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),ki(t))for(var i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function Di(){var t={};function e(r,s){ri(t[s])&&ri(r)?t[s]=Di(t[s],r):ri(r)?t[s]=Di({},r):ki(r)?t[s]=r.slice():t[s]=r}for(var i=0,n=arguments.length;i<n;i++)Ni(arguments[i],e);return t}function _a(t,e,i){return Ni(e,function(r,s){i&&typeof r=="function"?t[s]=ua(r,i):t[s]=r}),t}function Ea(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}Jn.exports={isArray:ki,isArrayBuffer:ca,isBuffer:da,isFormData:ha,isArrayBufferView:fa,isString:pa,isNumber:ga,isObject:Wn,isPlainObject:ri,isUndefined:Oi,isDate:ma,isFile:va,isBlob:ba,isFunction:$n,isStream:ya,isURLSearchParams:wa,isStandardBrowserEnv:Sa,forEach:Ni,merge:Di,extend:_a,trim:xa,stripBOM:Ea}});var Bi=V((eh,Yn)=>{"use strict";var Bt=Ue();function Xn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Yn.exports=function(e,i,n){if(!i)return e;var r;if(n)r=n(i);else if(Bt.isURLSearchParams(i))r=i.toString();else{var s=[];Bt.forEach(i,function(l,u){l===null||typeof l>"u"||(Bt.isArray(l)?u=u+"[]":l=[l],Bt.forEach(l,function(p){Bt.isDate(p)?p=p.toISOString():Bt.isObject(p)&&(p=JSON.stringify(p)),s.push(Xn(u)+"="+Xn(p))}))}),r=s.join("&")}if(r){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}});var Zn=V((th,Qn)=>{"use strict";var Aa=Ue();function si(){this.handlers=[]}si.prototype.use=function(e,i,n){return this.handlers.push({fulfilled:e,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};si.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};si.prototype.forEach=function(e){Aa.forEach(this.handlers,function(n){n!==null&&e(n)})};Qn.exports=si});var tr=V((ih,er)=>{"use strict";var Ia=Ue();er.exports=function(e,i){Ia.forEach(e,function(r,s){s!==i&&s.toUpperCase()===i.toUpperCase()&&(e[i]=r,delete e[s])})}});var Mi=V((nh,ir)=>{"use strict";ir.exports=function(e,i,n,r,s){return e.config=i,n&&(e.code=n),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var ji=V((rh,nr)=>{"use strict";var Fa=Mi();nr.exports=function(e,i,n,r,s){var a=new Error(e);return Fa(a,i,n,r,s)}});var sr=V((sh,rr)=>{"use strict";var Ca=ji();rr.exports=function(e,i,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):i(Ca("Request failed with status code "+n.status,n.config,null,n.request,n))}});var ar=V((oh,or)=>{"use strict";var oi=Ue();or.exports=oi.isStandardBrowserEnv()?function(){return{write:function(i,n,r,s,a,o){var l=[];l.push(i+"="+encodeURIComponent(n)),oi.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),oi.isString(s)&&l.push("path="+s),oi.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(i){var n=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var ur=V((ah,lr)=>{"use strict";lr.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var cr=V((lh,dr)=>{"use strict";dr.exports=function(e,i){return i?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e}});var fr=V((uh,hr)=>{"use strict";var Ta=ur(),Pa=cr();hr.exports=function(e,i){return e&&!Ta(i)?Pa(e,i):i}});var gr=V((dh,pr)=>{"use strict";var Li=Ue(),Ra=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];pr.exports=function(e){var i={},n,r,s;return e&&Li.forEach(e.split(`
`),function(o){if(s=o.indexOf(":"),n=Li.trim(o.substr(0,s)).toLowerCase(),r=Li.trim(o.substr(s+1)),n){if(i[n]&&Ra.indexOf(n)>=0)return;n==="set-cookie"?i[n]=(i[n]?i[n]:[]).concat([r]):i[n]=i[n]?i[n]+", "+r:r}}),i}});var br=V((ch,vr)=>{"use strict";var mr=Ue();vr.exports=mr.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),n;function r(s){var a=s;return e&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=r(window.location.href),function(a){var o=mr.isString(a)?r(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});var Hi=V((hh,yr)=>{"use strict";var ai=Ue(),Oa=sr(),Da=ar(),ka=Bi(),Na=fr(),Ba=gr(),Ma=br(),zi=ji();yr.exports=function(e){return new Promise(function(n,r){var s=e.data,a=e.headers,o=e.responseType;ai.isFormData(s)&&delete a["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(u+":"+g)}var p=Na(e.baseURL,e.url);l.open(e.method.toUpperCase(),ka(p,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function c(){if(l){var m="getAllResponseHeaders"in l?Ba(l.getAllResponseHeaders()):null,f=!o||o==="text"||o==="json"?l.responseText:l.response,b={data:f,status:l.status,statusText:l.statusText,headers:m,config:e,request:l};Oa(n,r,b),l=null}}if("onloadend"in l?l.onloadend=c:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(c)},l.onabort=function(){l&&(r(zi("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){r(zi("Network Error",e,null,l)),l=null},l.ontimeout=function(){var f="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(f=e.timeoutErrorMessage),r(zi(f,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},ai.isStandardBrowserEnv()){var h=(e.withCredentials||Ma(p))&&e.xsrfCookieName?Da.read(e.xsrfCookieName):void 0;h&&(a[e.xsrfHeaderName]=h)}"setRequestHeader"in l&&ai.forEach(a,function(f,b){typeof s>"u"&&b.toLowerCase()==="content-type"?delete a[b]:l.setRequestHeader(b,f)}),ai.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&o!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(f){l&&(l.abort(),r(f),l=null)}),s||(s=null),l.send(s)})}});var ui=V((fh,Sr)=>{"use strict";var Ne=Ue(),wr=tr(),ja=Mi(),La={"Content-Type":"application/x-www-form-urlencoded"};function xr(t,e){!Ne.isUndefined(t)&&Ne.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function za(){var t;return typeof XMLHttpRequest<"u"?t=Hi():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=Hi()),t}function Ha(t,e,i){if(Ne.isString(t))try{return(e||JSON.parse)(t),Ne.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(t)}var li={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:za(),transformRequest:[function(e,i){return wr(i,"Accept"),wr(i,"Content-Type"),Ne.isFormData(e)||Ne.isArrayBuffer(e)||Ne.isBuffer(e)||Ne.isStream(e)||Ne.isFile(e)||Ne.isBlob(e)?e:Ne.isArrayBufferView(e)?e.buffer:Ne.isURLSearchParams(e)?(xr(i,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ne.isObject(e)||i&&i["Content-Type"]==="application/json"?(xr(i,"application/json"),Ha(e)):e}],transformResponse:[function(e){var i=this.transitional,n=i&&i.silentJSONParsing,r=i&&i.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||r&&Ne.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?ja(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};li.headers={common:{Accept:"application/json, text/plain, */*"}};Ne.forEach(["delete","get","head"],function(e){li.headers[e]={}});Ne.forEach(["post","put","patch"],function(e){li.headers[e]=Ne.merge(La)});Sr.exports=li});var Er=V((ph,_r)=>{"use strict";var Va=Ue(),qa=ui();_r.exports=function(e,i,n){var r=this||qa;return Va.forEach(n,function(a){e=a.call(r,e,i)}),e}});var Vi=V((gh,Ar)=>{"use strict";Ar.exports=function(e){return!!(e&&e.__CANCEL__)}});var Cr=V((mh,Fr)=>{"use strict";var Ir=Ue(),qi=Er(),Ua=Vi(),Ka=ui();function Ui(t){t.cancelToken&&t.cancelToken.throwIfRequested()}Fr.exports=function(e){Ui(e),e.headers=e.headers||{},e.data=qi.call(e,e.data,e.headers,e.transformRequest),e.headers=Ir.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ir.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var i=e.adapter||Ka.adapter;return i(e).then(function(r){return Ui(e),r.data=qi.call(e,r.data,r.headers,e.transformResponse),r},function(r){return Ua(r)||(Ui(e),r&&r.response&&(r.response.data=qi.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})}});var Ki=V((vh,Tr)=>{"use strict";var je=Ue();Tr.exports=function(e,i){i=i||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(c,h){return je.isPlainObject(c)&&je.isPlainObject(h)?je.merge(c,h):je.isPlainObject(h)?je.merge({},h):je.isArray(h)?h.slice():h}function u(c){je.isUndefined(i[c])?je.isUndefined(e[c])||(n[c]=l(void 0,e[c])):n[c]=l(e[c],i[c])}je.forEach(r,function(h){je.isUndefined(i[h])||(n[h]=l(void 0,i[h]))}),je.forEach(s,u),je.forEach(a,function(h){je.isUndefined(i[h])?je.isUndefined(e[h])||(n[h]=l(void 0,e[h])):n[h]=l(void 0,i[h])}),je.forEach(o,function(h){h in i?n[h]=l(e[h],i[h]):h in e&&(n[h]=l(void 0,e[h]))});var g=r.concat(s).concat(a).concat(o),p=Object.keys(e).concat(Object.keys(i)).filter(function(h){return g.indexOf(h)===-1});return je.forEach(p,u),n}});var Pr=V((bh,Ga)=>{Ga.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var Nr=V((yh,kr)=>{"use strict";var Or=Pr(),Gi={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Gi[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Rr={},Wa=Or.version.split(".");function Dr(t,e){for(var i=e?e.split("."):Wa,n=t.split("."),r=0;r<3;r++){if(i[r]>n[r])return!0;if(i[r]<n[r])return!1}return!1}Gi.transitional=function(e,i,n){var r=i&&Dr(i);function s(a,o){return"[Axios v"+Or.version+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,l){if(e===!1)throw new Error(s(o," has been removed in "+i));return r&&!Rr[o]&&(Rr[o]=!0,console.warn(s(o," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(a,o,l):!0}};function $a(t,e,i){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),r=n.length;r-- >0;){var s=n[r],a=e[s];if(a){var o=t[s],l=o===void 0||a(o,s,t);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(i!==!0)throw Error("Unknown option "+s)}}kr.exports={isOlderVersion:Dr,assertOptions:$a,validators:Gi}});var Hr=V((wh,zr)=>{"use strict";var jr=Ue(),Ja=Bi(),Br=Zn(),Mr=Cr(),di=Ki(),Lr=Nr(),Mt=Lr.validators;function Gt(t){this.defaults=t,this.interceptors={request:new Br,response:new Br}}Gt.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=di(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var i=e.transitional;i!==void 0&&Lr.assertOptions(i,{silentJSONParsing:Mt.transitional(Mt.boolean,"1.0.0"),forcedJSONParsing:Mt.transitional(Mt.boolean,"1.0.0"),clarifyTimeoutError:Mt.transitional(Mt.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach(function(c){typeof c.runWhen=="function"&&c.runWhen(e)===!1||(r=r&&c.synchronous,n.unshift(c.fulfilled,c.rejected))});var s=[];this.interceptors.response.forEach(function(c){s.push(c.fulfilled,c.rejected)});var a;if(!r){var o=[Mr,void 0];for(Array.prototype.unshift.apply(o,n),o=o.concat(s),a=Promise.resolve(e);o.length;)a=a.then(o.shift(),o.shift());return a}for(var l=e;n.length;){var u=n.shift(),g=n.shift();try{l=u(l)}catch(p){g(p);break}}try{a=Mr(l)}catch(p){return Promise.reject(p)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};Gt.prototype.getUri=function(e){return e=di(this.defaults,e),Ja(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};jr.forEach(["delete","get","head","options"],function(e){Gt.prototype[e]=function(i,n){return this.request(di(n||{},{method:e,url:i,data:(n||{}).data}))}});jr.forEach(["post","put","patch"],function(e){Gt.prototype[e]=function(i,n,r){return this.request(di(r||{},{method:e,url:i,data:n}))}});zr.exports=Gt});var $i=V((xh,Vr)=>{"use strict";function Wi(t){this.message=t}Wi.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Wi.prototype.__CANCEL__=!0;Vr.exports=Wi});var Ur=V((Sh,qr)=>{"use strict";var Xa=$i();function ci(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(r){e=r});var i=this;t(function(r){i.reason||(i.reason=new Xa(r),e(i.reason))})}ci.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};ci.source=function(){var e,i=new ci(function(r){e=r});return{token:i,cancel:e}};qr.exports=ci});var Gr=V((_h,Kr)=>{"use strict";Kr.exports=function(e){return function(n){return e.apply(null,n)}}});var $r=V((Eh,Wr)=>{"use strict";Wr.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var Yr=V((Ah,Ji)=>{"use strict";var Jr=Ue(),Ya=Ri(),hi=Hr(),Qa=Ki(),Za=ui();function Xr(t){var e=new hi(t),i=Ya(hi.prototype.request,e);return Jr.extend(i,hi.prototype,e),Jr.extend(i,e),i}var st=Xr(Za);st.Axios=hi;st.create=function(e){return Xr(Qa(st.defaults,e))};st.Cancel=$i();st.CancelToken=Ur();st.isCancel=Vi();st.all=function(e){return Promise.all(e)};st.spread=Gr();st.isAxiosError=$r();Ji.exports=st;Ji.exports.default=st});var Zr=V((Ih,Qr)=>{Qr.exports=Yr()});var As=V(z=>{var Wt={};Wt.userAgent=!1;var jt={};var q=q||function(t,e){var i={},n=i.lib={},r=n.Base=function(){function h(){}return{extend:function(m){h.prototype=this;var f=new h;return m&&f.mixIn(m),f.hasOwnProperty("init")||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var f in m)m.hasOwnProperty(f)&&(this[f]=m[f]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=n.WordArray=r.extend({init:function(h,m){h=this.words=h||[],m!=e?this.sigBytes=m:this.sigBytes=h.length*4},toString:function(h){return(h||o).stringify(this)},concat:function(h){var m=this.words,f=h.words,b=this.sigBytes,v=h.sigBytes;if(this.clamp(),b%4)for(var w=0;w<v;w++){var y=f[w>>>2]>>>24-w%4*8&255;m[b+w>>>2]|=y<<24-(b+w)%4*8}else for(var w=0;w<v;w+=4)m[b+w>>>2]=f[w>>>2];return this.sigBytes+=v,this},clamp:function(){var h=this.words,m=this.sigBytes;h[m>>>2]&=4294967295<<32-m%4*8,h.length=t.ceil(m/4)},clone:function(){var h=r.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var m=[],f=0;f<h;f+=4)m.push(t.random()*4294967296|0);return new s.init(m,h)}}),a=i.enc={},o=a.Hex={stringify:function(h){for(var m=h.words,f=h.sigBytes,b=[],v=0;v<f;v++){var w=m[v>>>2]>>>24-v%4*8&255;b.push((w>>>4).toString(16)),b.push((w&15).toString(16))}return b.join("")},parse:function(h){for(var m=h.length,f=[],b=0;b<m;b+=2)f[b>>>3]|=parseInt(h.substr(b,2),16)<<24-b%8*4;return new s.init(f,m/2)}},l=a.Latin1={stringify:function(h){for(var m=h.words,f=h.sigBytes,b=[],v=0;v<f;v++){var w=m[v>>>2]>>>24-v%4*8&255;b.push(String.fromCharCode(w))}return b.join("")},parse:function(h){for(var m=h.length,f=[],b=0;b<m;b++)f[b>>>2]|=(h.charCodeAt(b)&255)<<24-b%4*8;return new s.init(f,m)}},u=a.Utf8={stringify:function(h){try{return decodeURIComponent(escape(l.stringify(h)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(h){return l.parse(unescape(encodeURIComponent(h)))}},g=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=u.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var m=this._data,f=m.words,b=m.sigBytes,v=this.blockSize,w=v*4,y=b/w;h?y=t.ceil(y):y=t.max((y|0)-this._minBufferSize,0);var S=y*v,E=t.min(S*4,b);if(S){for(var C=0;C<S;C+=v)this._doProcessBlock(f,C);var x=f.splice(0,S);m.sigBytes-=E}return new s.init(x,E)},clone:function(){var h=r.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0}),p=n.Hasher=g.extend({cfg:r.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){h&&this._append(h);var m=this._doFinalize();return m},blockSize:512/32,_createHelper:function(h){return function(m,f){return new h.init(f).finalize(m)}},_createHmacHelper:function(h){return function(m,f){return new c.HMAC.init(h,f).finalize(m)}}}),c=i.algo={};return i}(Math);(function(t){var r=q,e=r.lib,i=e.Base,n=e.WordArray,r=r.x64={};r.Word=i.extend({init:function(s,a){this.high=s,this.low=a}}),r.WordArray=i.extend({init:function(s,a){s=this.words=s||[],this.sigBytes=a!=t?a:8*s.length},toX32:function(){for(var s=this.words,a=s.length,o=[],l=0;l<a;l++){var u=s[l];o.push(u.high),o.push(u.low)}return n.create(o,this.sigBytes)},clone:function(){for(var s=i.clone.call(this),a=s.words=this.words.slice(0),o=a.length,l=0;l<o;l++)a[l]=a[l].clone();return s}})})();q.lib.Cipher||function(t){var h=q,e=h.lib,i=e.Base,n=e.WordArray,r=e.BufferedBlockAlgorithm,s=h.enc.Base64,a=h.algo.EvpKDF,o=e.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(f,b){return this.create(this._ENC_XFORM_MODE,f,b)},createDecryptor:function(f,b){return this.create(this._DEC_XFORM_MODE,f,b)},init:function(f,b,v){this.cfg=this.cfg.extend(v),this._xformMode=f,this._key=b,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(f){return this._append(f),this._process()},finalize:function(f){return f&&this._append(f),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(f){return{encrypt:function(b,v,w){return(typeof v=="string"?m:c).encrypt(f,b,v,w)},decrypt:function(b,v,w){return(typeof v=="string"?m:c).decrypt(f,b,v,w)}}}});e.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var p=h.mode={},l=function(f,b,v){var w=this._iv;w?this._iv=t:w=this._prevBlock;for(var y=0;y<v;y++)f[b+y]^=w[y]},u=(e.BlockCipherMode=i.extend({createEncryptor:function(f,b){return this.Encryptor.create(f,b)},createDecryptor:function(f,b){return this.Decryptor.create(f,b)},init:function(f,b){this._cipher=f,this._iv=b}})).extend();u.Encryptor=u.extend({processBlock:function(f,b){var v=this._cipher,w=v.blockSize;l.call(this,f,b,w),v.encryptBlock(f,b),this._prevBlock=f.slice(b,b+w)}}),u.Decryptor=u.extend({processBlock:function(f,b){var v=this._cipher,w=v.blockSize,y=f.slice(b,b+w);v.decryptBlock(f,b),l.call(this,f,b,w),this._prevBlock=y}}),p=p.CBC=u,u=(h.pad={}).Pkcs7={pad:function(f,b){for(var v=4*b,v=v-f.sigBytes%v,w=v<<24|v<<16|v<<8|v,y=[],S=0;S<v;S+=4)y.push(w);v=n.create(y,v),f.concat(v)},unpad:function(f){f.sigBytes-=f.words[f.sigBytes-1>>>2]&255}},e.BlockCipher=o.extend({cfg:o.cfg.extend({mode:p,padding:u}),reset:function(){o.reset.call(this);var b=this.cfg,f=b.iv,b=b.mode;if(this._xformMode==this._ENC_XFORM_MODE)var v=b.createEncryptor;else v=b.createDecryptor,this._minBufferSize=1;this._mode=v.call(b,this,f&&f.words)},_doProcessBlock:function(f,b){this._mode.processBlock(f,b)},_doFinalize:function(){var f=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){f.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),f.unpad(b);return b},blockSize:4});var g=e.CipherParams=i.extend({init:function(f){this.mixIn(f)},toString:function(f){return(f||this.formatter).stringify(this)}}),p=(h.format={}).OpenSSL={stringify:function(f){var b=f.ciphertext;return f=f.salt,(f?n.create([1398893684,1701076831]).concat(f).concat(b):b).toString(s)},parse:function(f){f=s.parse(f);var b=f.words;if(b[0]==1398893684&&b[1]==1701076831){var v=n.create(b.slice(2,4));b.splice(0,4),f.sigBytes-=16}return g.create({ciphertext:f,salt:v})}},c=e.SerializableCipher=i.extend({cfg:i.extend({format:p}),encrypt:function(f,b,v,w){w=this.cfg.extend(w);var y=f.createEncryptor(v,w);return b=y.finalize(b),y=y.cfg,g.create({ciphertext:b,key:v,iv:y.iv,algorithm:f,mode:y.mode,padding:y.padding,blockSize:f.blockSize,formatter:w.format})},decrypt:function(f,b,v,w){return w=this.cfg.extend(w),b=this._parse(b,w.format),f.createDecryptor(v,w).finalize(b.ciphertext)},_parse:function(f,b){return typeof f=="string"?b.parse(f,this):f}}),h=(h.kdf={}).OpenSSL={execute:function(f,b,v,w){return w||(w=n.random(8)),f=a.create({keySize:b+v}).compute(f,w),v=n.create(f.words.slice(b),4*v),f.sigBytes=4*b,g.create({key:f,iv:v,salt:w})}},m=e.PasswordBasedCipher=c.extend({cfg:c.cfg.extend({kdf:h}),encrypt:function(f,b,v,w){return w=this.cfg.extend(w),v=w.kdf.execute(v,f.keySize,f.ivSize),w.iv=v.iv,f=c.encrypt.call(this,f,b,v.key,w),f.mixIn(v),f},decrypt:function(f,b,v,w){return w=this.cfg.extend(w),b=this._parse(b,w.format),v=w.kdf.execute(v,f.keySize,f.ivSize,b.salt),w.iv=v.iv,c.decrypt.call(this,f,b,v.key,w)}})}();(function(){for(var t=q,e=t.lib.BlockCipher,C=t.algo,i=[],n=[],r=[],s=[],a=[],o=[],l=[],u=[],g=[],p=[],c=[],h=0;256>h;h++)c[h]=128>h?h<<1:h<<1^283;for(var m=0,f=0,h=0;256>h;h++){var b=f^f<<1^f<<2^f<<3^f<<4,b=b>>>8^b&255^99;i[m]=b,n[b]=m;var v=c[m],w=c[v],y=c[w],S=257*c[b]^16843008*b;r[m]=S<<24|S>>>8,s[m]=S<<16|S>>>16,a[m]=S<<8|S>>>24,o[m]=S,S=16843009*y^65537*w^257*v^16843008*m,l[b]=S<<24|S>>>8,u[b]=S<<16|S>>>16,g[b]=S<<8|S>>>24,p[b]=S,m?(m=v^c[c[c[y^v]]],f^=c[c[f]]):m=f=1}var E=[0,1,2,4,8,16,32,64,128,27,54],C=C.AES=e.extend({_doReset:function(){for(var A=this._key,x=A.words,_=A.sigBytes/4,A=4*((this._nRounds=_+6)+1),F=this._keySchedule=[],T=0;T<A;T++)if(T<_)F[T]=x[T];else{var R=F[T-1];T%_?6<_&&T%_==4&&(R=i[R>>>24]<<24|i[R>>>16&255]<<16|i[R>>>8&255]<<8|i[R&255]):(R=R<<8|R>>>24,R=i[R>>>24]<<24|i[R>>>16&255]<<16|i[R>>>8&255]<<8|i[R&255],R^=E[T/_|0]<<24),F[T]=F[T-_]^R}for(x=this._invKeySchedule=[],_=0;_<A;_++)T=A-_,R=_%4?F[T]:F[T-4],x[_]=4>_||4>=T?R:l[i[R>>>24]]^u[i[R>>>16&255]]^g[i[R>>>8&255]]^p[i[R&255]]},encryptBlock:function(x,_){this._doCryptBlock(x,_,this._keySchedule,r,s,a,o,i)},decryptBlock:function(x,_){var A=x[_+1];x[_+1]=x[_+3],x[_+3]=A,this._doCryptBlock(x,_,this._invKeySchedule,l,u,g,p,n),A=x[_+1],x[_+1]=x[_+3],x[_+3]=A},_doCryptBlock:function(x,_,A,F,T,R,M,P){for(var N=this._nRounds,Q=x[_]^A[0],_e=x[_+1]^A[1],he=x[_+2]^A[2],Y=x[_+3]^A[3],D=4,k=1;k<N;k++)var W=F[Q>>>24]^T[_e>>>16&255]^R[he>>>8&255]^M[Y&255]^A[D++],U=F[_e>>>24]^T[he>>>16&255]^R[Y>>>8&255]^M[Q&255]^A[D++],$=F[he>>>24]^T[Y>>>16&255]^R[Q>>>8&255]^M[_e&255]^A[D++],Y=F[Y>>>24]^T[Q>>>16&255]^R[_e>>>8&255]^M[he&255]^A[D++],Q=W,_e=U,he=$;W=(P[Q>>>24]<<24|P[_e>>>16&255]<<16|P[he>>>8&255]<<8|P[Y&255])^A[D++],U=(P[_e>>>24]<<24|P[he>>>16&255]<<16|P[Y>>>8&255]<<8|P[Q&255])^A[D++],$=(P[he>>>24]<<24|P[Y>>>16&255]<<16|P[Q>>>8&255]<<8|P[_e&255])^A[D++],Y=(P[Y>>>24]<<24|P[Q>>>16&255]<<16|P[_e>>>8&255]<<8|P[he&255])^A[D++],x[_]=W,x[_+1]=U,x[_+2]=$,x[_+3]=Y},keySize:8});t.AES=e._createHelper(C)})();(function(){function t(c,h){var m=(this._lBlock>>>c^this._rBlock)&h;this._rBlock^=m,this._lBlock^=m<<c}function e(c,h){var m=(this._rBlock>>>c^this._lBlock)&h;this._lBlock^=m,this._rBlock^=m<<c}var i=q,r=i.lib,n=r.WordArray,r=r.BlockCipher,s=i.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],g=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=s.DES=r.extend({_doReset:function(){for(var c=this._key.words,h=[],m=0;56>m;m++){var f=a[m]-1;h[m]=c[f>>>5]>>>31-f%32&1}for(c=this._subKeys=[],f=0;16>f;f++){for(var b=c[f]=[],v=l[f],m=0;24>m;m++)b[m/6|0]|=h[(o[m]-1+v)%28]<<31-m%6,b[4+(m/6|0)]|=h[28+(o[m+24]-1+v)%28]<<31-m%6;for(b[0]=b[0]<<1|b[0]>>>31,m=1;7>m;m++)b[m]>>>=4*(m-1)+3;b[7]=b[7]<<5|b[7]>>>27}for(h=this._invSubKeys=[],m=0;16>m;m++)h[m]=c[15-m]},encryptBlock:function(c,h){this._doCryptBlock(c,h,this._subKeys)},decryptBlock:function(c,h){this._doCryptBlock(c,h,this._invSubKeys)},_doCryptBlock:function(c,h,m){this._lBlock=c[h],this._rBlock=c[h+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var f=0;16>f;f++){for(var b=m[f],v=this._lBlock,w=this._rBlock,y=0,S=0;8>S;S++)y|=u[S][((w^b[S])&g[S])>>>0];this._lBlock=w,this._rBlock=v^y}m=this._lBlock,this._lBlock=this._rBlock,this._rBlock=m,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),c[h]=this._lBlock,c[h+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=r._createHelper(p),s=s.TripleDES=r.extend({_doReset:function(){var c=this._key.words;this._des1=p.createEncryptor(n.create(c.slice(0,2))),this._des2=p.createEncryptor(n.create(c.slice(2,4))),this._des3=p.createEncryptor(n.create(c.slice(4,6)))},encryptBlock:function(c,h){this._des1.encryptBlock(c,h),this._des2.decryptBlock(c,h),this._des3.encryptBlock(c,h)},decryptBlock:function(c,h){this._des3.decryptBlock(c,h),this._des2.encryptBlock(c,h),this._des1.decryptBlock(c,h)},keySize:6,ivSize:2,blockSize:2}),i.TripleDES=r._createHelper(s)})();(function(){var t=q,e=t.lib.WordArray;t.enc.Base64={stringify:function(i){var n=i.words,r=i.sigBytes,s=this._map;i.clamp(),i=[];for(var a=0;a<r;a+=3)for(var o=(n[a>>>2]>>>24-8*(a%4)&255)<<16|(n[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|n[a+2>>>2]>>>24-8*((a+2)%4)&255,l=0;4>l&&a+.75*l<r;l++)i.push(s.charAt(o>>>6*(3-l)&63));if(n=s.charAt(64))for(;i.length%4;)i.push(n);return i.join("")},parse:function(i){var n=i.length,r=this._map,s=r.charAt(64);s&&(s=i.indexOf(s),s!=-1&&(n=s));for(var s=[],a=0,o=0;o<n;o++)if(o%4){var l=r.indexOf(i.charAt(o-1))<<2*(o%4),u=r.indexOf(i.charAt(o))>>>6-2*(o%4);s[a>>>2]|=(l|u)<<24-8*(a%4),a++}return e.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(t){function e(p,c,h,m,f,b,v){return p=p+(c&h|~c&m)+f+v,(p<<b|p>>>32-b)+c}function i(p,c,h,m,f,b,v){return p=p+(c&m|h&~m)+f+v,(p<<b|p>>>32-b)+c}function n(p,c,h,m,f,b,v){return p=p+(c^h^m)+f+v,(p<<b|p>>>32-b)+c}function r(p,c,h,m,f,b,v){return p=p+(h^(c|~m))+f+v,(p<<b|p>>>32-b)+c}for(var s=q,l=s.lib,a=l.WordArray,o=l.Hasher,l=s.algo,u=[],g=0;64>g;g++)u[g]=4294967296*t.abs(t.sin(g+1))|0;l=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,c){for(var h=0;16>h;h++){var m=c+h,f=p[m];p[m]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360}var h=this._hash.words,m=p[c+0],f=p[c+1],b=p[c+2],v=p[c+3],w=p[c+4],y=p[c+5],S=p[c+6],E=p[c+7],C=p[c+8],x=p[c+9],_=p[c+10],A=p[c+11],F=p[c+12],T=p[c+13],R=p[c+14],M=p[c+15],P=h[0],k=h[1],D=h[2],N=h[3],P=e(P,k,D,N,m,7,u[0]),N=e(N,P,k,D,f,12,u[1]),D=e(D,N,P,k,b,17,u[2]),k=e(k,D,N,P,v,22,u[3]),P=e(P,k,D,N,w,7,u[4]),N=e(N,P,k,D,y,12,u[5]),D=e(D,N,P,k,S,17,u[6]),k=e(k,D,N,P,E,22,u[7]),P=e(P,k,D,N,C,7,u[8]),N=e(N,P,k,D,x,12,u[9]),D=e(D,N,P,k,_,17,u[10]),k=e(k,D,N,P,A,22,u[11]),P=e(P,k,D,N,F,7,u[12]),N=e(N,P,k,D,T,12,u[13]),D=e(D,N,P,k,R,17,u[14]),k=e(k,D,N,P,M,22,u[15]),P=i(P,k,D,N,f,5,u[16]),N=i(N,P,k,D,S,9,u[17]),D=i(D,N,P,k,A,14,u[18]),k=i(k,D,N,P,m,20,u[19]),P=i(P,k,D,N,y,5,u[20]),N=i(N,P,k,D,_,9,u[21]),D=i(D,N,P,k,M,14,u[22]),k=i(k,D,N,P,w,20,u[23]),P=i(P,k,D,N,x,5,u[24]),N=i(N,P,k,D,R,9,u[25]),D=i(D,N,P,k,v,14,u[26]),k=i(k,D,N,P,C,20,u[27]),P=i(P,k,D,N,T,5,u[28]),N=i(N,P,k,D,b,9,u[29]),D=i(D,N,P,k,E,14,u[30]),k=i(k,D,N,P,F,20,u[31]),P=n(P,k,D,N,y,4,u[32]),N=n(N,P,k,D,C,11,u[33]),D=n(D,N,P,k,A,16,u[34]),k=n(k,D,N,P,R,23,u[35]),P=n(P,k,D,N,f,4,u[36]),N=n(N,P,k,D,w,11,u[37]),D=n(D,N,P,k,E,16,u[38]),k=n(k,D,N,P,_,23,u[39]),P=n(P,k,D,N,T,4,u[40]),N=n(N,P,k,D,m,11,u[41]),D=n(D,N,P,k,v,16,u[42]),k=n(k,D,N,P,S,23,u[43]),P=n(P,k,D,N,x,4,u[44]),N=n(N,P,k,D,F,11,u[45]),D=n(D,N,P,k,M,16,u[46]),k=n(k,D,N,P,b,23,u[47]),P=r(P,k,D,N,m,6,u[48]),N=r(N,P,k,D,E,10,u[49]),D=r(D,N,P,k,R,15,u[50]),k=r(k,D,N,P,y,21,u[51]),P=r(P,k,D,N,F,6,u[52]),N=r(N,P,k,D,v,10,u[53]),D=r(D,N,P,k,_,15,u[54]),k=r(k,D,N,P,f,21,u[55]),P=r(P,k,D,N,C,6,u[56]),N=r(N,P,k,D,M,10,u[57]),D=r(D,N,P,k,S,15,u[58]),k=r(k,D,N,P,T,21,u[59]),P=r(P,k,D,N,w,6,u[60]),N=r(N,P,k,D,A,10,u[61]),D=r(D,N,P,k,b,15,u[62]),k=r(k,D,N,P,x,21,u[63]);h[0]=h[0]+P|0,h[1]=h[1]+k|0,h[2]=h[2]+D|0,h[3]=h[3]+N|0},_doFinalize:function(){var p=this._data,c=p.words,h=8*this._nDataBytes,m=8*p.sigBytes;c[m>>>5]|=128<<24-m%32;var f=t.floor(h/4294967296);for(c[(m+64>>>9<<4)+15]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,c[(m+64>>>9<<4)+14]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,p.sigBytes=4*(c.length+1),this._process(),p=this._hash,c=p.words,h=0;4>h;h++)m=c[h],c[h]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360;return p},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}}),s.MD5=o._createHelper(l),s.HmacMD5=o._createHmacHelper(l)})(Math);(function(){var t=q,r=t.lib,e=r.WordArray,i=r.Hasher,n=[],r=t.algo.SHA1=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(s,a){for(var o=this._hash.words,l=o[0],u=o[1],g=o[2],p=o[3],c=o[4],h=0;80>h;h++){if(16>h)n[h]=s[a+h]|0;else{var m=n[h-3]^n[h-8]^n[h-14]^n[h-16];n[h]=m<<1|m>>>31}m=(l<<5|l>>>27)+c+n[h],m=20>h?m+((u&g|~u&p)+1518500249):40>h?m+((u^g^p)+1859775393):60>h?m+((u&g|u&p|g&p)-1894007588):m+((u^g^p)-899497514),c=p,p=g,g=u<<30|u>>>2,u=l,l=m}o[0]=o[0]+l|0,o[1]=o[1]+u|0,o[2]=o[2]+g|0,o[3]=o[3]+p|0,o[4]=o[4]+c|0},_doFinalize:function(){var s=this._data,a=s.words,o=8*this._nDataBytes,l=8*s.sigBytes;return a[l>>>5]|=128<<24-l%32,a[(l+64>>>9<<4)+14]=Math.floor(o/4294967296),a[(l+64>>>9<<4)+15]=o,s.sigBytes=4*a.length,this._process(),this._hash},clone:function(){var s=i.clone.call(this);return s._hash=this._hash.clone(),s}});t.SHA1=i._createHelper(r),t.HmacSHA1=i._createHmacHelper(r)})();(function(t){for(var e=q,h=e.lib,i=h.WordArray,n=h.Hasher,h=e.algo,r=[],s=[],a=function(f){return 4294967296*(f-(f|0))|0},o=2,l=0;64>l;){var u;e:{u=o;for(var g=t.sqrt(u),p=2;p<=g;p++)if(!(u%p)){u=!1;break e}u=!0}u&&(8>l&&(r[l]=a(t.pow(o,.5))),s[l]=a(t.pow(o,1/3)),l++),o++}var c=[],h=h.SHA256=n.extend({_doReset:function(){this._hash=new i.init(r.slice(0))},_doProcessBlock:function(m,f){for(var b=this._hash.words,v=b[0],w=b[1],y=b[2],S=b[3],E=b[4],C=b[5],x=b[6],_=b[7],A=0;64>A;A++){if(16>A)c[A]=m[f+A]|0;else{var F=c[A-15],T=c[A-2];c[A]=((F<<25|F>>>7)^(F<<14|F>>>18)^F>>>3)+c[A-7]+((T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10)+c[A-16]}F=_+((E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25))+(E&C^~E&x)+s[A]+c[A],T=((v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22))+(v&w^v&y^w&y),_=x,x=C,C=E,E=S+F|0,S=y,y=w,w=v,v=F+T|0}b[0]=b[0]+v|0,b[1]=b[1]+w|0,b[2]=b[2]+y|0,b[3]=b[3]+S|0,b[4]=b[4]+E|0,b[5]=b[5]+C|0,b[6]=b[6]+x|0,b[7]=b[7]+_|0},_doFinalize:function(){var m=this._data,f=m.words,b=8*this._nDataBytes,v=8*m.sigBytes;return f[v>>>5]|=128<<24-v%32,f[(v+64>>>9<<4)+14]=t.floor(b/4294967296),f[(v+64>>>9<<4)+15]=b,m.sigBytes=4*f.length,this._process(),this._hash},clone:function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m}});e.SHA256=n._createHelper(h),e.HmacSHA256=n._createHmacHelper(h)})(Math);(function(){var t=q,e=t.lib.WordArray,n=t.algo,i=n.SHA256,n=n.SHA224=i.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var r=i._doFinalize.call(this);return r.sigBytes-=4,r}});t.SHA224=i._createHelper(n),t.HmacSHA224=i._createHmacHelper(n)})();(function(){function t(){return n.create.apply(n,arguments)}for(var e=q,i=e.lib.Hasher,s=e.x64,n=s.Word,r=s.WordArray,s=e.algo,a=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],o=[],l=0;80>l;l++)o[l]=t();s=s.SHA512=i.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(u,g){for(var w=this._hash.words,p=w[0],c=w[1],h=w[2],m=w[3],f=w[4],b=w[5],v=w[6],w=w[7],y=p.high,S=p.low,E=c.high,C=c.low,x=h.high,_=h.low,A=m.high,F=m.low,T=f.high,R=f.low,M=b.high,P=b.low,N=v.high,D=v.low,k=w.high,W=w.low,U=y,$=S,Y=E,Q=C,_e=x,he=_,Ie=A,me=F,Ee=T,ve=R,Ce=M,nt=P,It=N,Ut=D,Fi=k,Kt=W,rt=0;80>rt;rt++){var xt=o[rt];if(16>rt)var Ye=xt.high=u[g+2*rt]|0,ae=xt.low=u[g+2*rt+1]|0;else{var Ye=o[rt-15],ae=Ye.high,ct=Ye.low,Ye=(ae>>>1|ct<<31)^(ae>>>8|ct<<24)^ae>>>7,ct=(ct>>>1|ae<<31)^(ct>>>8|ae<<24)^(ct>>>7|ae<<25),Ft=o[rt-2],ae=Ft.high,be=Ft.low,Ft=(ae>>>19|be<<13)^(ae<<3|be>>>29)^ae>>>6,be=(be>>>19|ae<<13)^(be<<3|ae>>>29)^(be>>>6|ae<<26),ae=o[rt-7],Ci=ae.high,wt=o[rt-16],ht=wt.high,wt=wt.low,ae=ct+ae.low,Ye=Ye+Ci+(ae>>>0<ct>>>0?1:0),ae=ae+be,Ye=Ye+Ft+(ae>>>0<be>>>0?1:0),ae=ae+wt,Ye=Ye+ht+(ae>>>0<wt>>>0?1:0);xt.high=Ye,xt.low=ae}var Ci=Ee&Ce^~Ee&It,wt=ve&nt^~ve&Ut,xt=U&Y^U&_e^Y&_e,ta=$&Q^$&he^Q&he,ct=(U>>>28|$<<4)^(U<<30|$>>>2)^(U<<25|$>>>7),Ft=($>>>28|U<<4)^($<<30|U>>>2)^($<<25|U>>>7),be=a[rt],ia=be.high,Hn=be.low,be=Kt+((ve>>>14|Ee<<18)^(ve>>>18|Ee<<14)^(ve<<23|Ee>>>9)),ht=Fi+((Ee>>>14|ve<<18)^(Ee>>>18|ve<<14)^(Ee<<23|ve>>>9))+(be>>>0<Kt>>>0?1:0),be=be+wt,ht=ht+Ci+(be>>>0<wt>>>0?1:0),be=be+Hn,ht=ht+ia+(be>>>0<Hn>>>0?1:0),be=be+ae,ht=ht+Ye+(be>>>0<ae>>>0?1:0),ae=Ft+ta,xt=ct+xt+(ae>>>0<Ft>>>0?1:0),Fi=It,Kt=Ut,It=Ce,Ut=nt,Ce=Ee,nt=ve,ve=me+be|0,Ee=Ie+ht+(ve>>>0<me>>>0?1:0)|0,Ie=_e,me=he,_e=Y,he=Q,Y=U,Q=$,$=be+ae|0,U=ht+xt+($>>>0<be>>>0?1:0)|0}S=p.low=S+$,p.high=y+U+(S>>>0<$>>>0?1:0),C=c.low=C+Q,c.high=E+Y+(C>>>0<Q>>>0?1:0),_=h.low=_+he,h.high=x+_e+(_>>>0<he>>>0?1:0),F=m.low=F+me,m.high=A+Ie+(F>>>0<me>>>0?1:0),R=f.low=R+ve,f.high=T+Ee+(R>>>0<ve>>>0?1:0),P=b.low=P+nt,b.high=M+Ce+(P>>>0<nt>>>0?1:0),D=v.low=D+Ut,v.high=N+It+(D>>>0<Ut>>>0?1:0),W=w.low=W+Kt,w.high=k+Fi+(W>>>0<Kt>>>0?1:0)},_doFinalize:function(){var u=this._data,g=u.words,p=8*this._nDataBytes,c=8*u.sigBytes;return g[c>>>5]|=128<<24-c%32,g[(c+128>>>10<<5)+30]=Math.floor(p/4294967296),g[(c+128>>>10<<5)+31]=p,u.sigBytes=4*g.length,this._process(),this._hash.toX32()},clone:function(){var u=i.clone.call(this);return u._hash=this._hash.clone(),u},blockSize:32}),e.SHA512=i._createHelper(s),e.HmacSHA512=i._createHmacHelper(s)})();(function(){var t=q,r=t.x64,e=r.Word,i=r.WordArray,r=t.algo,n=r.SHA512,r=r.SHA384=n.extend({_doReset:function(){this._hash=new i.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var s=n._doFinalize.call(this);return s.sigBytes-=16,s}});t.SHA384=n._createHelper(r),t.HmacSHA384=n._createHmacHelper(r)})();(function(){var t=q,u=t.lib,e=u.WordArray,i=u.Hasher,u=t.algo,n=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),r=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),o=e.create([0,1518500249,1859775393,2400959708,2840853838]),l=e.create([1352829926,1548603684,1836072691,2053994217,0]),u=u.RIPEMD160=i.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(g,p){for(var c=0;16>c;c++){var h=p+c,m=g[h];g[h]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360}var h=this._hash.words,m=o.words,f=l.words,b=n.words,v=r.words,w=s.words,y=a.words,S,E,C,x,_,A,F,T,R,M;A=S=h[0],F=E=h[1],T=C=h[2],R=x=h[3],M=_=h[4];for(var P,c=0;80>c;c+=1)P=S+g[p+b[c]]|0,P=16>c?P+((E^C^x)+m[0]):32>c?P+((E&C|~E&x)+m[1]):48>c?P+(((E|~C)^x)+m[2]):64>c?P+((E&x|C&~x)+m[3]):P+((E^(C|~x))+m[4]),P|=0,P=P<<w[c]|P>>>32-w[c],P=P+_|0,S=_,_=x,x=C<<10|C>>>22,C=E,E=P,P=A+g[p+v[c]]|0,P=16>c?P+((F^(T|~R))+f[0]):32>c?P+((F&R|T&~R)+f[1]):48>c?P+(((F|~T)^R)+f[2]):64>c?P+((F&T|~F&R)+f[3]):P+((F^T^R)+f[4]),P|=0,P=P<<y[c]|P>>>32-y[c],P=P+M|0,A=M,M=R,R=T<<10|T>>>22,T=F,F=P;P=h[1]+C+R|0,h[1]=h[2]+x+M|0,h[2]=h[3]+_+A|0,h[3]=h[4]+S+F|0,h[4]=h[0]+E+T|0,h[0]=P},_doFinalize:function(){var g=this._data,p=g.words,c=8*this._nDataBytes,h=8*g.sigBytes;for(p[h>>>5]|=128<<24-h%32,p[(h+64>>>9<<4)+14]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360,g.sigBytes=4*(p.length+1),this._process(),g=this._hash,p=g.words,c=0;5>c;c++)h=p[c],p[c]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360;return g},clone:function(){var g=i.clone.call(this);return g._hash=this._hash.clone(),g}});t.RIPEMD160=i._createHelper(u),t.HmacRIPEMD160=i._createHmacHelper(u)})(Math);(function(){var t=q,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(i,n){i=this._hasher=new i.init,typeof n=="string"&&(n=e.parse(n));var r=i.blockSize,s=4*r;n.sigBytes>s&&(n=i.finalize(n)),n.clamp();for(var a=this._oKey=n.clone(),o=this._iKey=n.clone(),l=a.words,u=o.words,g=0;g<r;g++)l[g]^=1549556828,u[g]^=909522486;a.sigBytes=o.sigBytes=s,this.reset()},reset:function(){var i=this._hasher;i.reset(),i.update(this._iKey)},update:function(i){return this._hasher.update(i),this},finalize:function(i){var n=this._hasher;return i=n.finalize(i),n.reset(),n.finalize(this._oKey.clone().concat(i))}})})();(function(){var t=q,n=t.lib,e=n.Base,i=n.WordArray,n=t.algo,r=n.HMAC,s=n.PBKDF2=e.extend({cfg:e.extend({keySize:4,hasher:n.SHA1,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,o){for(var m=this.cfg,l=r.create(m.hasher,a),u=i.create(),g=i.create([1]),p=u.words,c=g.words,h=m.keySize,m=m.iterations;p.length<h;){var f=l.update(o).finalize(g);l.reset();for(var b=f.words,v=b.length,w=f,y=1;y<m;y++){w=l.finalize(w),l.reset();for(var S=w.words,E=0;E<v;E++)b[E]^=S[E]}u.concat(f),c[0]++}return u.sigBytes=4*h,u}});t.PBKDF2=function(a,o,l){return s.create(l).compute(a,o)}})();var Lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zi="=";function pt(t){var e,i,n="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),n+=Lt.charAt(i>>6)+Lt.charAt(i&63);if(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),n+=Lt.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),n+=Lt.charAt(i>>2)+Lt.charAt((i&3)<<4)),Zi)for(;(n.length&3)>0;)n+=Zi;return n}function Ht(t){var e="",i,n=0,r,s;for(i=0;i<t.length&&t.charAt(i)!=Zi;++i)s=Lt.indexOf(t.charAt(i)),!(s<0)&&(n==0?(e+=ft(s>>2),r=s&3,n=1):n==1?(e+=ft(r<<2|s>>4),r=s&15,n=2):n==2?(e+=ft(r),e+=ft(s>>2),r=s&3,n=3):(e+=ft(r<<2|s>>4),e+=ft(s&15),n=0));return n==1&&(e+=ft(r<<2)),e}function ss(t){var e=Ht(t),i,n=new Array;for(i=0;2*i<e.length;++i)n[i]=parseInt(e.substring(2*i,2*i+2),16);return n}var _t,el=0xdeadbeefcafe,es=(el&16777215)==15715070;function O(t,e,i){t!=null&&(typeof t=="number"?this.fromNumber(t,e,i):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}function ee(){return new O(null)}function tl(t,e,i,n,r,s){for(;--s>=0;){var a=e*this[t++]+i[n]+r;r=Math.floor(a/67108864),i[n++]=a&67108863}return r}function il(t,e,i,n,r,s){for(var a=e&32767,o=e>>15;--s>=0;){var l=this[t]&32767,u=this[t++]>>15,g=o*l+u*a;l=a*l+((g&32767)<<15)+i[n]+(r&1073741823),r=(l>>>30)+(g>>>15)+o*u+(r>>>30),i[n++]=l&1073741823}return r}function nl(t,e,i,n,r,s){for(var a=e&16383,o=e>>14;--s>=0;){var l=this[t]&16383,u=this[t++]>>14,g=o*l+u*a;l=a*l+((g&16383)<<14)+i[n]+r,r=(l>>28)+(g>>14)+o*u,i[n++]=l&268435455}return r}es&&Wt.appName=="Microsoft Internet Explorer"?(O.prototype.am=il,_t=30):es&&Wt.appName!="Netscape"?(O.prototype.am=tl,_t=26):(O.prototype.am=nl,_t=28);O.prototype.DB=_t;O.prototype.DM=(1<<_t)-1;O.prototype.DV=1<<_t;var sn=52;O.prototype.FV=Math.pow(2,sn);O.prototype.F1=sn-_t;O.prototype.F2=2*_t-sn;var rl="0123456789abcdefghijklmnopqrstuvwxyz",vi=new Array,Vt,Ze;Vt="0".charCodeAt(0);for(Ze=0;Ze<=9;++Ze)vi[Vt++]=Ze;Vt="a".charCodeAt(0);for(Ze=10;Ze<36;++Ze)vi[Vt++]=Ze;Vt="A".charCodeAt(0);for(Ze=10;Ze<36;++Ze)vi[Vt++]=Ze;function ft(t){return rl.charAt(t)}function os(t,e){var i=vi[t.charCodeAt(e)];return i??-1}function sl(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function ol(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function St(t){var e=ee();return e.fromInt(t),e}function al(t,e){var i;if(e==16)i=4;else if(e==8)i=3;else if(e==256)i=8;else if(e==2)i=1;else if(e==32)i=5;else if(e==4)i=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,r=!1,s=0;--n>=0;){var a=i==8?t[n]&255:os(t,n);if(a<0){t.charAt(n)=="-"&&(r=!0);continue}r=!1,s==0?this[this.t++]=a:s+i>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=i,s>=this.DB&&(s-=this.DB)}i==8&&t[0]&128&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&O.ZERO.subTo(this,this)}function ll(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function ul(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var i=(1<<e)-1,n,r=!1,s="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(n=this[a]>>o)>0&&(r=!0,s=ft(n));a>=0;)o<e?(n=(this[a]&(1<<o)-1)<<e-o,n|=this[--a]>>(o+=this.DB-e)):(n=this[a]>>(o-=e)&i,o<=0&&(o+=this.DB,--a)),n>0&&(r=!0),r&&(s+=ft(n));return r?s:"0"}function dl(){var t=ee();return O.ZERO.subTo(this,t),t}function cl(){return this.s<0?this.negate():this}function hl(t){var e=this.s-t.s;if(e!=0)return e;var i=this.t;if(e=i-t.t,e!=0)return this.s<0?-e:e;for(;--i>=0;)if((e=this[i]-t[i])!=0)return e;return 0}function bi(t){var e=1,i;return(i=t>>>16)!=0&&(t=i,e+=16),(i=t>>8)!=0&&(t=i,e+=8),(i=t>>4)!=0&&(t=i,e+=4),(i=t>>2)!=0&&(t=i,e+=2),(i=t>>1)!=0&&(t=i,e+=1),e}function fl(){return this.t<=0?0:this.DB*(this.t-1)+bi(this[this.t-1]^this.s&this.DM)}function pl(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function gl(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function ml(t,e){var i=t%this.DB,n=this.DB-i,r=(1<<n)-1,s=Math.floor(t/this.DB),a=this.s<<i&this.DM,o;for(o=this.t-1;o>=0;--o)e[o+s+1]=this[o]>>n|a,a=(this[o]&r)<<i;for(o=s-1;o>=0;--o)e[o]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function vl(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t){e.t=0;return}var n=t%this.DB,r=this.DB-n,s=(1<<n)-1;e[0]=this[i]>>n;for(var a=i+1;a<this.t;++a)e[a-i-1]|=(this[a]&s)<<r,e[a-i]=this[a]>>n;n>0&&(e[this.t-i-1]|=(this.s&s)<<r),e.t=this.t-i,e.clamp()}function bl(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()}function yl(t,e){var i=this.abs(),n=t.abs(),r=i.t;for(e.t=r+n.t;--r>=0;)e[r]=0;for(r=0;r<n.t;++r)e[r+i.t]=i.am(0,n[r],e,r,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&O.ZERO.subTo(e,e)}function wl(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function xl(t,e,i){var n=t.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t){e?.fromInt(0),i!=null&&this.copyTo(i);return}i==null&&(i=ee());var s=ee(),a=this.s,o=t.s,l=this.DB-bi(n[n.t-1]);l>0?(n.lShiftTo(l,s),r.lShiftTo(l,i)):(n.copyTo(s),r.copyTo(i));var u=s.t,g=s[u-1];if(g!=0){var p=g*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),c=this.FV/p,h=(1<<this.F1)/p,m=1<<this.F2,f=i.t,b=f-u,v=e??ee();for(s.dlShiftTo(b,v),i.compareTo(v)>=0&&(i[i.t++]=1,i.subTo(v,i)),O.ONE.dlShiftTo(u,v),v.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--b>=0;){var w=i[--f]==g?this.DM:Math.floor(i[f]*c+(i[f-1]+m)*h);if((i[f]+=s.am(0,w,i,b,0,u))<w)for(s.dlShiftTo(b,v),i.subTo(v,i);i[f]<--w;)i.subTo(v,i)}e!=null&&(i.drShiftTo(u,e),a!=o&&O.ZERO.subTo(e,e)),i.t=u,i.clamp(),l>0&&i.rShiftTo(l,i),a<0&&O.ZERO.subTo(i,i)}}}function Sl(t){var e=ee();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(O.ZERO)>0&&t.subTo(e,e),e}function Tt(t){this.m=t}function _l(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function El(t){return t}function Al(t){t.divRemTo(this.m,null,t)}function Il(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function Fl(t,e){t.squareTo(e),this.reduce(e)}Tt.prototype.convert=_l;Tt.prototype.revert=El;Tt.prototype.reduce=Al;Tt.prototype.mulTo=Il;Tt.prototype.sqrTo=Fl;function Cl(){if(this.t<1)return 0;var t=this[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Pt(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Tl(t){var e=ee();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(O.ZERO)>0&&this.m.subTo(e,e),e}function Pl(t){var e=ee();return t.copyTo(e),this.reduce(e),e}function Rl(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=t[e]&32767,n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Ol(t,e){t.squareTo(e),this.reduce(e)}function Dl(t,e,i){t.multiplyTo(e,i),this.reduce(i)}Pt.prototype.convert=Tl;Pt.prototype.revert=Pl;Pt.prototype.reduce=Rl;Pt.prototype.mulTo=Dl;Pt.prototype.sqrTo=Ol;function kl(){return(this.t>0?this[0]&1:this.s)==0}function Nl(t,e){if(t>4294967295||t<1)return O.ONE;var i=ee(),n=ee(),r=e.convert(this),s=bi(t)-1;for(r.copyTo(i);--s>=0;)if(e.sqrTo(i,n),(t&1<<s)>0)e.mulTo(n,r,i);else{var a=i;i=n,n=a}return e.revert(i)}function Bl(t,e){var i;return t<256||e.isEven()?i=new Tt(e):i=new Pt(e),this.exp(t,i)}O.prototype.copyTo=sl;O.prototype.fromInt=ol;O.prototype.fromString=al;O.prototype.clamp=ll;O.prototype.dlShiftTo=pl;O.prototype.drShiftTo=gl;O.prototype.lShiftTo=ml;O.prototype.rShiftTo=vl;O.prototype.subTo=bl;O.prototype.multiplyTo=yl;O.prototype.squareTo=wl;O.prototype.divRemTo=xl;O.prototype.invDigit=Cl;O.prototype.isEven=kl;O.prototype.exp=Nl;O.prototype.toString=ul;O.prototype.negate=dl;O.prototype.abs=cl;O.prototype.compareTo=hl;O.prototype.bitLength=fl;O.prototype.mod=Sl;O.prototype.modPowInt=Bl;O.ZERO=St(0);O.ONE=St(1);function Ml(){var t=ee();return this.copyTo(t),t}function jl(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Ll(){return this.t==0?this.s:this[0]<<24>>24}function zl(){return this.t==0?this.s:this[0]<<16>>16}function Hl(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Vl(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function ql(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=St(i),r=ee(),s=ee(),a="";for(this.divRemTo(n,r,s);r.signum()>0;)a=(i+s.intValue()).toString(t).substr(1)+a,r.divRemTo(n,r,s);return s.intValue().toString(t)+a}function Ul(t,e){this.fromInt(0),e==null&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),r=!1,s=0,a=0,o=0;o<t.length;++o){var l=os(t,o);if(l<0){t.charAt(o)=="-"&&this.signum()==0&&(r=!0);continue}a=e*a+l,++s>=i&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),r&&O.ZERO.subTo(this,this)}function Kl(t,e,i){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(O.ONE.shiftLeft(t-1),on,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(O.ONE.shiftLeft(t-1),this);else{var n=new Array,r=t&7;n.length=(t>>3)+1,e.nextBytes(n),r>0?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}}function Gl(){var t=this.t,e=new Array;e[0]=this.s;var i=this.DB-t*this.DB%8,n,r=0;if(t-- >0)for(i<this.DB&&(n=this[t]>>i)!=(this.s&this.DM)>>i&&(e[r++]=n|this.s<<this.DB-i);t>=0;)i<8?(n=(this[t]&(1<<i)-1)<<8-i,n|=this[--t]>>(i+=this.DB-8)):(n=this[t]>>(i-=8)&255,i<=0&&(i+=this.DB,--t)),n&128&&(n|=-256),r==0&&(this.s&128)!=(n&128)&&++r,(r>0||n!=this.s)&&(e[r++]=n);return e}function Wl(t){return this.compareTo(t)==0}function $l(t){return this.compareTo(t)<0?this:t}function Jl(t){return this.compareTo(t)>0?this:t}function Xl(t,e,i){var n,r,s=Math.min(t.t,this.t);for(n=0;n<s;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(r=t.s&this.DM,n=s;n<this.t;++n)i[n]=e(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=s;n<t.t;++n)i[n]=e(r,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function Yl(t,e){return t&e}function Ql(t){var e=ee();return this.bitwiseTo(t,Yl,e),e}function on(t,e){return t|e}function Zl(t){var e=ee();return this.bitwiseTo(t,on,e),e}function as(t,e){return t^e}function eu(t){var e=ee();return this.bitwiseTo(t,as,e),e}function ls(t,e){return t&~e}function tu(t){var e=ee();return this.bitwiseTo(t,ls,e),e}function iu(){for(var t=ee(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function nu(t){var e=ee();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function ru(t){var e=ee();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function su(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function ou(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+su(this[t]);return this.s<0?this.t*this.DB:-1}function au(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function lu(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=au(this[i]^e);return t}function uu(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this[e]&1<<t%this.DB)!=0}function du(t,e){var i=O.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function cu(t){return this.changeBit(t,on)}function hu(t){return this.changeBit(t,ls)}function fu(t){return this.changeBit(t,as)}function pu(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()}function gu(t){var e=ee();return this.addTo(t,e),e}function mu(t){var e=ee();return this.subTo(t,e),e}function vu(t){var e=ee();return this.multiplyTo(t,e),e}function bu(){var t=ee();return this.squareTo(t),t}function yu(t){var e=ee();return this.divRemTo(t,e,null),e}function wu(t){var e=ee();return this.divRemTo(t,null,e),e}function xu(t){var e=ee(),i=ee();return this.divRemTo(t,e,i),new Array(e,i)}function Su(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function _u(t,e){if(t!=0){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Jt(){}function us(t){return t}function Eu(t,e,i){t.multiplyTo(e,i)}function Au(t,e){t.squareTo(e)}Jt.prototype.convert=us;Jt.prototype.revert=us;Jt.prototype.mulTo=Eu;Jt.prototype.sqrTo=Au;function Iu(t){return this.exp(t,new Jt)}function Fu(t,e,i){var n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i[--n]=0;var r;for(r=i.t-this.t;n<r;++n)i[n+this.t]=this.am(0,t[n],i,n,0,this.t);for(r=Math.min(t.t,e);n<r;++n)this.am(0,t[n],i,n,0,e-n);i.clamp()}function Cu(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)}function qt(t){this.r2=ee(),this.q3=ee(),O.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Tu(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=ee();return t.copyTo(e),this.reduce(e),e}function Pu(t){return t}function Ru(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Ou(t,e){t.squareTo(e),this.reduce(e)}function Du(t,e,i){t.multiplyTo(e,i),this.reduce(i)}qt.prototype.convert=Tu;qt.prototype.revert=Pu;qt.prototype.reduce=Ru;qt.prototype.mulTo=Du;qt.prototype.sqrTo=Ou;function ku(t,e){var i=t.bitLength(),n,r=St(1),s;if(i<=0)return r;i<18?n=1:i<48?n=3:i<144?n=4:i<768?n=5:n=6,i<8?s=new Tt(e):e.isEven()?s=new qt(e):s=new Pt(e);var a=new Array,o=3,l=n-1,u=(1<<n)-1;if(a[1]=s.convert(this),n>1){var g=ee();for(s.sqrTo(a[1],g);o<=u;)a[o]=ee(),s.mulTo(g,a[o-2],a[o]),o+=2}var p=t.t-1,c,h=!0,m=ee(),f;for(i=bi(t[p])-1;p>=0;){for(i>=l?c=t[p]>>i-l&u:(c=(t[p]&(1<<i+1)-1)<<l-i,p>0&&(c|=t[p-1]>>this.DB+i-l)),o=n;!(c&1);)c>>=1,--o;if((i-=o)<0&&(i+=this.DB,--p),h)a[c].copyTo(r),h=!1;else{for(;o>1;)s.sqrTo(r,m),s.sqrTo(m,r),o-=2;o>0?s.sqrTo(r,m):(f=r,r=m,m=f),s.mulTo(m,a[c],r)}for(;p>=0&&!(t[p]&1<<i);)s.sqrTo(r,m),f=r,r=m,m=f,--i<0&&(i=this.DB-1,--p)}return s.revert(r)}function Nu(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var r=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(r<s&&(s=r),s>0&&(e.rShiftTo(s,e),i.rShiftTo(s,i));e.signum()>0;)(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i}function Bu(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(e==0)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i}function Mu(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return O.ZERO;for(var i=t.clone(),n=this.clone(),r=St(1),s=St(0),a=St(0),o=St(1);i.signum()!=0;){for(;i.isEven();)i.rShiftTo(1,i),e?((!r.isEven()||!s.isEven())&&(r.addTo(this,r),s.subTo(t,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);i.compareTo(n)>=0?(i.subTo(n,i),e&&r.subTo(a,r),s.subTo(o,s)):(n.subTo(i,n),e&&a.subTo(r,a),o.subTo(s,o))}if(n.compareTo(O.ONE)!=0)return O.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var Ve=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ju=(1<<26)/Ve[Ve.length-1];function Lu(t){var e,i=this.abs();if(i.t==1&&i[0]<=Ve[Ve.length-1]){for(e=0;e<Ve.length;++e)if(i[0]==Ve[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<Ve.length;){for(var n=Ve[e],r=e+1;r<Ve.length&&n<ju;)n*=Ve[r++];for(n=i.modInt(n);e<r;)if(n%Ve[e++]==0)return!1}return i.millerRabin(t)}function zu(t){var e=this.subtract(O.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);t=t+1>>1,t>Ve.length&&(t=Ve.length);for(var r=ee(),s=0;s<t;++s){r.fromInt(Ve[Math.floor(Math.random()*Ve.length)]);var a=r.modPow(n,this);if(a.compareTo(O.ONE)!=0&&a.compareTo(e)!=0){for(var o=1;o++<i&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(O.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}O.prototype.chunkSize=Hl;O.prototype.toRadix=ql;O.prototype.fromRadix=Ul;O.prototype.fromNumber=Kl;O.prototype.bitwiseTo=Xl;O.prototype.changeBit=du;O.prototype.addTo=pu;O.prototype.dMultiply=Su;O.prototype.dAddOffset=_u;O.prototype.multiplyLowerTo=Fu;O.prototype.multiplyUpperTo=Cu;O.prototype.modInt=Bu;O.prototype.millerRabin=zu;O.prototype.clone=Ml;O.prototype.intValue=jl;O.prototype.byteValue=Ll;O.prototype.shortValue=zl;O.prototype.signum=Vl;O.prototype.toByteArray=Gl;O.prototype.equals=Wl;O.prototype.min=$l;O.prototype.max=Jl;O.prototype.and=Ql;O.prototype.or=Zl;O.prototype.xor=eu;O.prototype.andNot=tu;O.prototype.not=iu;O.prototype.shiftLeft=nu;O.prototype.shiftRight=ru;O.prototype.getLowestSetBit=ou;O.prototype.bitCount=lu;O.prototype.testBit=uu;O.prototype.setBit=cu;O.prototype.clearBit=hu;O.prototype.flipBit=fu;O.prototype.add=gu;O.prototype.subtract=mu;O.prototype.multiply=vu;O.prototype.divide=yu;O.prototype.remainder=wu;O.prototype.divideAndRemainder=xu;O.prototype.modPow=ku;O.prototype.modInverse=Mu;O.prototype.pow=Iu;O.prototype.gcd=Nu;O.prototype.isProbablePrime=Lu;O.prototype.square=bu;function an(){this.i=0,this.j=0,this.S=new Array}function Hu(t){var e,i,n;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[i],this.S[i]=n;this.i=0,this.j=0}function Vu(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}an.prototype.init=Hu;an.prototype.next=Vu;function qu(){return new an}var en=256;var fi,Ge,ke;function Uu(t){Ge[ke++]^=t&255,Ge[ke++]^=t>>8&255,Ge[ke++]^=t>>16&255,Ge[ke++]^=t>>24&255,ke>=en&&(ke-=en)}function ln(){Uu(new Date().getTime())}if(Ge==null){if(Ge=new Array,ke=0,jt!==void 0&&(jt.crypto!==void 0||jt.msCrypto!==void 0)){if(Xi=jt.crypto||jt.msCrypto,Xi.getRandomValues)for(Yi=new Uint8Array(32),Xi.getRandomValues(Yi),Qe=0;Qe<32;++Qe)Ge[ke++]=Yi[Qe];else if(Wt.appName=="Netscape"&&Wt.appVersion<"5")for(Qi=jt.crypto.random(32),Qe=0;Qe<Qi.length;++Qe)Ge[ke++]=Qi.charCodeAt(Qe)&255}for(;ke<en;)Qe=Math.floor(65536*Math.random()),Ge[ke++]=Qe>>>8,Ge[ke++]=Qe&255;ke=0,ln()}var Qe,Xi,Yi,Qi;function Ku(){if(fi==null){for(ln(),fi=qu(),fi.init(Ge),ke=0;ke<Ge.length;++ke)Ge[ke]=0;ke=0}return fi.next()}function Gu(t){var e;for(e=0;e<t.length;++e)t[e]=Ku()}function Et(){}Et.prototype.nextBytes=Gu;function Le(t,e){return new O(t,e)}function Wu(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var i=new Array,n=t.length-1;n>=0&&e>0;){var r=t.charCodeAt(n--);r<128?i[--e]=r:r>127&&r<2048?(i[--e]=r&63|128,i[--e]=r>>6|192):(i[--e]=r&63|128,i[--e]=r>>6&63|128,i[--e]=r>>12|224)}i[--e]=0;for(var s=new Et,a=new Array;e>2;){for(a[0]=0;a[0]==0;)s.nextBytes(a);i[--e]=a[0]}return i[--e]=2,i[--e]=0,new O(i)}function ts(t,e,i){for(var n="",r=0;n.length<e;)n+=i(String.fromCharCode.apply(String,t.concat([(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255]))),r+=1;return n}function $u(t,e,i,n){var r=d.crypto.MessageDigest,s=d.crypto.Util,a=null;if(i||(i="sha1"),typeof i=="string"&&(a=r.getCanonicalAlgName(i),n=r.getHashLength(a),i=function(f){return ze(s.hashHex(et(f),a))}),t.length+2*n+2>e)throw"Message too long for RSA";var o="",l;for(l=0;l<e-t.length-2*n-2;l+=1)o+="\0";var u=i("")+o+""+t,g=new Array(n);new Et().nextBytes(g);var p=ts(g,u.length,i),c=[];for(l=0;l<u.length;l+=1)c[l]=u.charCodeAt(l)^p.charCodeAt(l);var h=ts(c,g.length,i),m=[0];for(l=0;l<g.length;l+=1)m[l+1]=g[l]^h.charCodeAt(l);return new O(m.concat(c))}function K(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Ju(t,e){if(this.isPublic=!0,this.isPrivate=!1,typeof t!="string")this.n=t,this.e=e;else if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=Le(t,16),this.e=parseInt(e,16);else throw"Invalid RSA public key"}function Xu(t){return t.modPowInt(this.e,this.n)}function Yu(t){var e=Wu(t,this.n.bitLength()+7>>3);if(e==null)return null;var i=this.doPublic(e);if(i==null)return null;var n=i.toString(16);return n.length&1?"0"+n:n}function Qu(t,e,i){var n=$u(t,this.n.bitLength()+7>>3,e,i);if(n==null)return null;var r=this.doPublic(n);if(r==null)return null;var s=r.toString(16);return s.length&1?"0"+s:s}K.prototype.doPublic=Xu;K.prototype.setPublic=Ju;K.prototype.encrypt=Yu;K.prototype.encryptOAEP=Qu;K.prototype.type="RSA";function Zu(t,e){for(var i=t.toByteArray(),n=0;n<i.length&&i[n]==0;)++n;if(i.length-n!=e-1||i[n]!=2)return null;for(++n;i[n]!=0;)if(++n>=i.length)return null;for(var r="";++n<i.length;){var s=i[n]&255;s<128?r+=String.fromCharCode(s):s>191&&s<224?(r+=String.fromCharCode((s&31)<<6|i[n+1]&63),++n):(r+=String.fromCharCode((s&15)<<12|(i[n+1]&63)<<6|i[n+2]&63),n+=2)}return r}function is(t,e,i){for(var n="",r=0;n.length<e;)n+=i(t+String.fromCharCode.apply(String,[(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])),r+=1;return n}function ed(t,e,i,n){var r=d.crypto.MessageDigest,s=d.crypto.Util,a=null;i||(i="sha1"),typeof i=="string"&&(a=r.getCanonicalAlgName(i),n=r.getHashLength(a),i=function(b){return ze(s.hashHex(et(b),a))}),t=t.toByteArray();var p;for(p=0;p<t.length;p+=1)t[p]&=255;for(;t.length<e;)t.unshift(0);if(t=String.fromCharCode.apply(String,t),t.length<2*n+2)throw"Cipher too short";var o=t.substr(1,n),l=t.substr(n+1),u=is(l,n,i),g=[],p;for(p=0;p<o.length;p+=1)g[p]=o.charCodeAt(p)^u.charCodeAt(p);var c=is(String.fromCharCode.apply(String,g),t.length-n,i),h=[];for(p=0;p<l.length;p+=1)h[p]=l.charCodeAt(p)^c.charCodeAt(p);if(h=String.fromCharCode.apply(String,h),h.substr(0,n)!==i(""))throw"Hash mismatch";h=h.substr(n);var m=h.indexOf(""),f=m!=-1?h.substr(0,m).lastIndexOf("\0"):-1;if(f+1!=m)throw"Malformed data";return h.substr(m+1)}function td(t,e,i){if(this.isPrivate=!0,typeof t!="string")this.n=t,this.e=e,this.d=i;else if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=Le(t,16),this.e=parseInt(e,16),this.d=Le(i,16);else throw"Invalid RSA private key"}function id(t,e,i,n,r,s,a,o){if(this.isPrivate=!0,this.isPublic=!1,t==null)throw"RSASetPrivateEx N == null";if(e==null)throw"RSASetPrivateEx E == null";if(t.length==0)throw"RSASetPrivateEx N.length == 0";if(e.length==0)throw"RSASetPrivateEx E.length == 0";if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=Le(t,16),this.e=parseInt(e,16),this.d=Le(i,16),this.p=Le(n,16),this.q=Le(r,16),this.dmp1=Le(s,16),this.dmq1=Le(a,16),this.coeff=Le(o,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function nd(t,e){var i=new Et,n=t>>1;this.e=parseInt(e,16);for(var r=new O(e,16),s=t/2-100,a=O.ONE.shiftLeft(s);;){for(;this.p=new O(t-n,1,i),!(this.p.subtract(O.ONE).gcd(r).compareTo(O.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new O(n,1,i),!(this.q.subtract(O.ONE).gcd(r).compareTo(O.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var l=this.q.subtract(this.p).abs();if(!(l.bitLength()<s||l.compareTo(a)<=0)){var u=this.p.subtract(O.ONE),g=this.q.subtract(O.ONE),p=u.multiply(g);if(p.gcd(r).compareTo(O.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==t)){this.d=r.modInverse(p),this.dmp1=this.d.mod(u),this.dmq1=this.d.mod(g),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function rd(t){if(this.p==null||this.q==null)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)}function sd(t){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var e=Le(t,16),i=this.doPrivate(e);return i==null?null:Zu(i,this.n.bitLength()+7>>3)}function od(t,e,i){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var n=Le(t,16),r=this.doPrivate(n);return r==null?null:ed(r,this.n.bitLength()+7>>3,e,i)}K.prototype.doPrivate=rd;K.prototype.setPrivate=td;K.prototype.setPrivateEx=id;K.prototype.generate=nd;K.prototype.decrypt=sd;K.prototype.decryptOAEP=od;function Pe(t,e){this.x=e,this.q=t}function ad(t){return t==this?!0:this.q.equals(t.q)&&this.x.equals(t.x)}function ld(){return this.x}function ud(){return new Pe(this.q,this.x.negate().mod(this.q))}function dd(t){return new Pe(this.q,this.x.add(t.toBigInteger()).mod(this.q))}function cd(t){return new Pe(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))}function hd(t){return new Pe(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))}function fd(){return new Pe(this.q,this.x.square().mod(this.q))}function pd(t){return new Pe(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))}Pe.prototype.equals=ad;Pe.prototype.toBigInteger=ld;Pe.prototype.negate=ud;Pe.prototype.add=dd;Pe.prototype.subtract=cd;Pe.prototype.multiply=hd;Pe.prototype.square=fd;Pe.prototype.divide=pd;Pe.prototype.sqrt=function(){return new Pe(this.q,this.x.sqrt().mod(this.q))};function se(t,e,i,n){this.curve=t,this.x=e,this.y=i,n==null?this.z=O.ONE:this.z=n,this.zinv=null}function gd(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function md(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function vd(t){if(t==this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();var e,i;return e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),e.equals(O.ZERO)?(i=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q),i.equals(O.ZERO)):!1}function bd(){return this.x==null&&this.y==null?!0:this.z.equals(O.ZERO)&&!this.y.toBigInteger().equals(O.ZERO)}function yd(){return new se(this.curve,this.x,this.y.negate(),this.z)}function wd(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),i=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(O.ZERO.equals(i))return O.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new O("3"),r=this.x.toBigInteger(),s=this.y.toBigInteger(),a=t.x.toBigInteger(),o=t.y.toBigInteger(),l=i.square(),u=l.multiply(i),g=r.multiply(l),p=e.square().multiply(this.z),c=p.subtract(g.shiftLeft(1)).multiply(t.z).subtract(u).multiply(i).mod(this.curve.q),h=g.multiply(n).multiply(e).subtract(s.multiply(u)).subtract(p.multiply(e)).multiply(t.z).add(e.multiply(u)).mod(this.curve.q),m=u.multiply(this.z).multiply(t.z).mod(this.curve.q);return new se(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(h),m)}function xd(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=new O("3"),e=this.x.toBigInteger(),i=this.y.toBigInteger(),n=i.multiply(this.z),r=n.multiply(i).mod(this.curve.q),s=this.curve.a.toBigInteger(),a=e.square().multiply(t);O.ZERO.equals(s)||(a=a.add(this.z.square().multiply(s))),a=a.mod(this.curve.q);var o=a.square().subtract(e.shiftLeft(3).multiply(r)).shiftLeft(1).multiply(n).mod(this.curve.q),l=a.multiply(t).multiply(e).subtract(r.shiftLeft(1)).shiftLeft(2).multiply(r).subtract(a.square().multiply(a)).mod(this.curve.q),u=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new se(this.curve,this.curve.fromBigInteger(o),this.curve.fromBigInteger(l),u)}function Sd(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t,i=e.multiply(new O("3")),n=this.negate(),r=this,s=this.curve.q.subtract(t),a=s.multiply(new O("3")),o=new se(this.curve,this.x,this.y),l=o.negate(),u;for(u=i.bitLength()-2;u>0;--u){r=r.twice();var g=i.testBit(u),p=e.testBit(u);g!=p&&(r=r.add(g?this:n))}for(u=a.bitLength()-2;u>0;--u){o=o.twice();var c=a.testBit(u),h=s.testBit(u);c!=h&&(o=o.add(c?o:l))}return r}function _d(t,e,i){var n;t.bitLength()>i.bitLength()?n=t.bitLength()-1:n=i.bitLength()-1;for(var r=this.curve.getInfinity(),s=this.add(e);n>=0;)r=r.twice(),t.testBit(n)?i.testBit(n)?r=r.add(s):r=r.add(this):i.testBit(n)&&(r=r.add(e)),--n;return r}se.prototype.getX=gd;se.prototype.getY=md;se.prototype.equals=vd;se.prototype.isInfinity=bd;se.prototype.negate=yd;se.prototype.add=wd;se.prototype.twice=xd;se.prototype.multiply=Sd;se.prototype.multiplyTwo=_d;function gt(t,e,i){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(i),this.infinity=new se(this,null,null)}function Ed(){return this.q}function Ad(){return this.a}function Id(){return this.b}function Fd(t){return t==this?!0:this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}function Cd(){return this.infinity}function Td(t){return new Pe(this.q,t)}function Pd(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var e=t.substr(0,2),i=t.substr(2),n=this.fromBigInteger(new O(u,16)),r=this.getA(),s=this.getB(),a=n.square().add(r).multiply(n).add(s),o=a.sqrt();return e=="03"&&(o=o.negate()),new se(this,n,o);case 4:case 6:case 7:var l=(t.length-2)/2,u=t.substr(2,l),g=t.substr(l+2,l);return new se(this,this.fromBigInteger(new O(u,16)),this.fromBigInteger(new O(g,16)));default:return null}}gt.prototype.getQ=Ed;gt.prototype.getA=Ad;gt.prototype.getB=Id;gt.prototype.equals=Fd;gt.prototype.getInfinity=Cd;gt.prototype.fromBigInteger=Td;gt.prototype.decodePointHex=Pd;Pe.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};se.prototype.getEncoded=function(t){var e=function(s,a){var o=s.toByteArrayUnsigned();if(a<o.length)o=o.slice(o.length-a);else for(;a>o.length;)o.unshift(0);return o},i=this.getX().toBigInteger(),n=this.getY().toBigInteger(),r=e(i,32);return t?n.isEven()?r.unshift(2):r.unshift(3):(r.unshift(4),r=r.concat(e(n,32))),r};se.decodeFrom=function(t,e){var i=e[0],n=e.length-1,r=e.slice(1,1+n/2),s=e.slice(1+n/2,1+n);r.unshift(0),s.unshift(0);var a=new O(r),o=new O(s);return new se(t,t.fromBigInteger(a),t.fromBigInteger(o))};se.decodeFromHex=function(t,e){var i=e.substr(0,2),n=e.length-2,r=e.substr(2,n/2),s=e.substr(2+n/2,n/2),a=new O(r,16),o=new O(s,16);return new se(t,t.fromBigInteger(a),t.fromBigInteger(o))};se.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),i=t.y.subtract(this.y),n=i.divide(e),r=n.square().subtract(this.x).subtract(t.x),s=n.multiply(this.x.subtract(r)).subtract(this.y);return new se(this.curve,r,s)};se.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=this.curve.fromBigInteger(O.valueOf(2)),e=this.curve.fromBigInteger(O.valueOf(3)),i=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n=i.square().subtract(this.x.multiply(t)),r=i.multiply(this.x.subtract(n)).subtract(this.y);return new se(this.curve,n,r)};se.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t,i=e.multiply(new O("3")),n=this.negate(),r=this,s;for(s=i.bitLength()-2;s>0;--s){r=r.twice();var a=i.testBit(s),o=e.testBit(s);a!=o&&(r=r.add2D(a?this:n))}return r};se.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),i=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),r=this.curve.getQ(),s=e.multiply(e).mod(r),a=t.multiply(t).multiply(t).add(i.multiply(t)).add(n).mod(r);return s.equals(a)};se.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};se.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),i=this.getY().toBigInteger();if(e.compareTo(O.ONE)<0||e.compareTo(t.subtract(O.ONE))>0)throw new Error("x coordinate out of bounds");if(i.compareTo(O.ONE)<0||i.compareTo(t.subtract(O.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ds=function(){var t="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",e='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',i='(?:"'+e+'*")',n=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+t+"|"+i+")","g"),r=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),s={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function a(p,c,h){return c?s[c]:String.fromCharCode(parseInt(h,16))}var o=new String(""),l="\\",u={"{":Object,"[":Array},g=Object.hasOwnProperty;return function(p,c){var h=p.match(n),m,f=h[0],b=!1;f==="{"?m={}:f==="["?m=[]:(m=[],b=!0);for(var v,w=[m],y=1-b,S=h.length;y<S;++y){f=h[y];var E;switch(f.charCodeAt(0)){default:E=w[0],E[v||E.length]=+f,v=void 0;break;case 34:if(f=f.substring(1,f.length-1),f.indexOf(l)!==-1&&(f=f.replace(r,a)),E=w[0],!v)if(E instanceof Array)v=E.length;else{v=f||o;break}E[v]=f,v=void 0;break;case 91:E=w[0],w.unshift(E[v||E.length]=[]),v=void 0;break;case 93:w.shift();break;case 102:E=w[0],E[v||E.length]=!1,v=void 0;break;case 110:E=w[0],E[v||E.length]=null,v=void 0;break;case 116:E=w[0],E[v||E.length]=!0,v=void 0;break;case 123:E=w[0],w.unshift(E[v||E.length]={}),v=void 0;break;case 125:w.shift();break}}if(b){if(w.length!==1)throw new Error;m=m[0]}else if(w.length)throw new Error;if(c){var C=function(x,_){var A=x[_];if(A&&typeof A=="object"){var F=null;for(var T in A)if(g.call(A,T)&&A!==x){var R=C(A,T);R!==void 0?A[T]=R:(F||(F=[]),F.push(T))}if(F)for(var M=F.length;--M>=0;)delete A[F[M]]}return c.call(x,_,A)};m=C({"":m},"")}return m}}();(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});d.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if(e.substr(0,1)!="-")e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var i=e.substr(1),n=i.length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",s=0;s<n;s++)r+="f";var a=new O(r,16),o=a.xor(t).add(O.ONE);e=o.toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return De(t,e)},this.newObject=function(t){var e=d,i=e.asn1,n=i.ASN1Object,r=i.DERBoolean,s=i.DERInteger,a=i.DERBitString,o=i.DEROctetString,l=i.DERNull,u=i.DERObjectIdentifier,g=i.DEREnumerated,p=i.DERUTF8String,c=i.DERNumericString,h=i.DERPrintableString,m=i.DERTeletexString,f=i.DERIA5String,b=i.DERUTCTime,v=i.DERGeneralizedTime,w=i.DERVisibleString,y=i.DERBMPString,S=i.DERSequence,E=i.DERSet,C=i.DERTaggedObject,x=i.ASN1Util.newObject;if(t instanceof i.ASN1Object)return t;var _=Object.keys(t);if(_.length!=1)throw new Error("key of param shall be only one.");var A=_[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+A+":")==-1)throw new Error("undefined key: "+A);if(A=="bool")return new r(t[A]);if(A=="int")return new s(t[A]);if(A=="bitstr")return new a(t[A]);if(A=="octstr")return new o(t[A]);if(A=="null")return new l(t[A]);if(A=="oid")return new u(t[A]);if(A=="enum")return new g(t[A]);if(A=="utf8str")return new p(t[A]);if(A=="numstr")return new c(t[A]);if(A=="prnstr")return new h(t[A]);if(A=="telstr")return new m(t[A]);if(A=="ia5str")return new f(t[A]);if(A=="utctime")return new b(t[A]);if(A=="gentime")return new v(t[A]);if(A=="visstr")return new w(t[A]);if(A=="bmpstr")return new y(t[A]);if(A=="asn1")return new n(t[A]);if(A=="seq"){for(var F=t[A],T=[],R=0;R<F.length;R++){var M=x(F[R]);T.push(M)}return new S({array:T})}if(A=="set"){for(var F=t[A],T=[],R=0;R<F.length;R++){var M=x(F[R]);T.push(M)}return new E({array:T})}if(A=="tag"){var P=t[A];if(Object.prototype.toString.call(P)==="[object Array]"&&P.length==3){var N=x(P[2]);return new C({tag:P[0],explicit:P[1],obj:N})}else return new C(P)}},this.jsonToASN1HEX=function(t){var e=this.newObject(t);return e.tohex()}};d.asn1.ASN1Util.oidHexToInt=function(t){for(var r="",e=parseInt(t.substr(0,2),16),i=Math.floor(e/40),n=e%40,r=i+"."+n,s="",a=2;a<t.length;a+=2){var o=parseInt(t.substr(a,2),16),l=("00000000"+o.toString(2)).slice(-8);if(s=s+l.substr(1,7),l.substr(0,1)=="0"){var u=new O(s,2);r=r+"."+u.toString(10),s=""}}return r};d.asn1.ASN1Util.oidIntToHex=function(t){var e=function(o){var l=o.toString(16);return l.length==1&&(l="0"+l),l},i=function(o){var l="",u=new O(o,10),g=u.toString(2),p=7-g.length%7;p==7&&(p=0);for(var c="",h=0;h<p;h++)c+="0";g=c+g;for(var h=0;h<g.length-1;h+=7){var m=g.substr(h,7);h!=g.length-7&&(m="1"+m),l+=e(parseInt(m,2))}return l};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",r=t.split("."),s=parseInt(r[0])*40+parseInt(r[1]);n+=e(s),r.splice(0,2);for(var a=0;a<r.length;a++)n+=i(r[a]);return n};d.asn1.ASN1Object=function(t){var e=!0,i=null,n="00",r="00",s="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+s.length+",v="+this.hV);var a=this.hV.length/2,o=a.toString(16);if(o.length%2==1&&(o="0"+o),a<128)return o;var l=o.length/2;if(l>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+a.toString(16));var u=128+l;return u.toString(16)+o},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(a){this.params=a},t!=null&&t.tlv!=null&&(this.hTLV=t.tlv,this.isModified=!1)};d.asn1.DERAbstractString=function(t){d.asn1.DERAbstractString.superclass.constructor.call(this);var e=null,i=null;this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=wi(this.s).toLowerCase()},this.setStringHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"?this.setString(t):typeof t.str<"u"?this.setString(t.str):typeof t.hex<"u"&&this.setStringHex(t.hex))};B(d.asn1.DERAbstractString,d.asn1.ASN1Object);d.asn1.DERAbstractTime=function(t){d.asn1.DERAbstractTime.superclass.constructor.call(this);var e=null,i=null;this.localDateToUTC=function(n){var r=n.getTime()+n.getTimezoneOffset()*6e4,s=new Date(r);return s},this.formatDate=function(n,r,s){var a=this.zeroPadding,o=this.localDateToUTC(n),l=String(o.getFullYear());r=="utc"&&(l=l.substr(2,2));var u=a(String(o.getMonth()+1),2),g=a(String(o.getDate()),2),p=a(String(o.getHours()),2),c=a(String(o.getMinutes()),2),h=a(String(o.getSeconds()),2),m=l+u+g+p+c+h;if(s===!0){var f=o.getMilliseconds();if(f!=0){var b=a(String(f),3);b=b.replace(/[0]+$/,""),m=m+"."+b}}return m+"Z"},this.zeroPadding=function(n,r){return n.length>=r?n:new Array(r-n.length+1).join("0")+n},this.setByParam=function(n){this.hV=null,this.hTLV=null,this.params=n},this.getString=function(){},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=n},this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=n},this.setByDateValue=function(n,r,s,a,o,l){var u=new Date(Date.UTC(n,r-1,s,a,o,l,0));this.setByDate(u)},this.getFreshValueHex=function(){return this.hV}};B(d.asn1.DERAbstractTime,d.asn1.ASN1Object);d.asn1.DERAbstractStructured=function(t){d.asn1.DERAbstractString.superclass.constructor.call(this);var e=null;this.setByASN1ObjectArray=function(i){this.hTLV=null,this.isModified=!0,this.asn1Array=i},this.appendASN1Object=function(i){this.hTLV=null,this.isModified=!0,this.asn1Array.push(i)},this.asn1Array=new Array,typeof t<"u"&&typeof t.array<"u"&&(this.asn1Array=t.array)};B(d.asn1.DERAbstractStructured,d.asn1.ASN1Object);d.asn1.DERBoolean=function(t){d.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",t==!1?this.hTLV="010100":this.hTLV="0101ff"};B(d.asn1.DERBoolean,d.asn1.ASN1Object);d.asn1.DERInteger=function(t){d.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=d.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var i=new O(String(e),10);this.setByBigInteger(i)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t.bigint<"u"?this.setByBigInteger(t.bigint):typeof t.int<"u"?this.setByInteger(t.int):typeof t=="number"?this.setByInteger(t):typeof t.hex<"u"&&this.setValueHex(t.hex))};B(d.asn1.DERInteger,d.asn1.ASN1Object);d.asn1.DERBitString=function(t){if(t!==void 0&&typeof t.obj<"u"){var e=d.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.tohex()}d.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(i){this.hTLV=null,this.isModified=!0,this.hV=i},this.setUnusedBitsAndHexValue=function(i,n){if(i<0||7<i)throw"unused bits shall be from 0 to 7: u = "+i;var r="0"+i;this.hTLV=null,this.isModified=!0,this.hV=r+n},this.setByBinaryString=function(i){i=i.replace(/0+$/,"");var n=8-i.length%8;n==8&&(n=0),i+="0000000".substr(0,n);for(var r="",s=0;s<i.length-1;s+=8){var a=i.substr(s,8),o=parseInt(a,2).toString(16);o.length==1&&(o="0"+o),r+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+n+r},this.setByBooleanArray=function(i){for(var n="",r=0;r<i.length;r++)i[r]==!0?n+="1":n+="0";this.setByBinaryString(n)},this.newFalseArray=function(i){for(var n=new Array(i),r=0;r<i;r++)n[r]=!1;return n},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):typeof t.hex<"u"?this.setHexValueIncludingUnusedBits(t.hex):typeof t.bin<"u"?this.setByBinaryString(t.bin):typeof t.array<"u"&&this.setByBooleanArray(t.array))};B(d.asn1.DERBitString,d.asn1.ASN1Object);d.asn1.DEROctetString=function(t){if(t!==void 0&&typeof t.obj<"u"){var e=d.asn1.ASN1Util.newObject(t.obj);t.hex=e.tohex()}d.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"};B(d.asn1.DEROctetString,d.asn1.DERAbstractString);d.asn1.DERNull=function(){d.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};B(d.asn1.DERNull,d.asn1.ASN1Object);d.asn1.DERObjectIdentifier=function(t){d.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var i=bs(e);if(i==null)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=i},this.setValueName=function(e){var i=d.asn1.x509.OID.name2oid(e);if(i!=="")this.setValueOidString(i);else throw new Error("DERObjectIdentifier oidName undefined: "+e)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){typeof e=="string"?this.setValueNameOrOid(e):e.oid!==void 0?this.setValueNameOrOid(e.oid):e.name!==void 0?this.setValueNameOrOid(e.name):e.hex!==void 0&&this.setValueHex(e.hex)},t!==void 0&&this.setByParam(t)};B(d.asn1.DERObjectIdentifier,d.asn1.ASN1Object);d.asn1.DEREnumerated=function(t){d.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=d.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var i=new O(String(e),10);this.setByBigInteger(i)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t.int<"u"?this.setByInteger(t.int):typeof t=="number"?this.setByInteger(t):typeof t.hex<"u"&&this.setValueHex(t.hex))};B(d.asn1.DEREnumerated,d.asn1.ASN1Object);d.asn1.DERUTF8String=function(t){d.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"};B(d.asn1.DERUTF8String,d.asn1.DERAbstractString);d.asn1.DERNumericString=function(t){d.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"};B(d.asn1.DERNumericString,d.asn1.DERAbstractString);d.asn1.DERPrintableString=function(t){d.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"};B(d.asn1.DERPrintableString,d.asn1.DERAbstractString);d.asn1.DERTeletexString=function(t){d.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"};B(d.asn1.DERTeletexString,d.asn1.DERAbstractString);d.asn1.DERIA5String=function(t){d.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"};B(d.asn1.DERIA5String,d.asn1.DERAbstractString);d.asn1.DERVisibleString=function(t){d.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="1a"};B(d.asn1.DERVisibleString,d.asn1.DERAbstractString);d.asn1.DERBMPString=function(t){d.asn1.DERBMPString.superclass.constructor.call(this,t),this.hT="1e"};B(d.asn1.DERBMPString,d.asn1.DERAbstractString);d.asn1.DERUTCTime=function(t){d.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var e=this.params;if(this.params==null&&(e={date:new Date}),typeof e=="string")if(e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=Ke(e);else throw new Error("malformed string for UTCTime: "+e);else if(e.str!=null)this.hV=Ke(e.str);else if(e.date==null&&e.millis==!0){var i=new Date;this.hV=Ke(this.formatDate(i,"utc",!0))}else if(e.date!=null&&e.date instanceof Date){var n=e.millis===!0;this.hV=Ke(this.formatDate(e.date,"utc",n))}else e instanceof Date&&(this.hV=Ke(this.formatDate(e,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},t!=null&&this.setByParam(t)};B(d.asn1.DERUTCTime,d.asn1.DERAbstractTime);d.asn1.DERGeneralizedTime=function(t){d.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.params=t,this.getFreshValueHex=function(){var e=this.params;if(this.params==null&&(e={date:new Date}),typeof e=="string")if(e.match(/^[0-9]{14}Z$/)||e.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=Ke(e);else throw new Error("malformed string for GeneralizedTime: "+e);else if(e.str!=null)this.hV=Ke(e.str);else if(e.date==null&&e.millis==!0){var i=new Date;this.hV=Ke(this.formatDate(i,"gen",!0))}else if(e.date!=null&&e.date instanceof Date){var n=e.millis===!0;this.hV=Ke(this.formatDate(e.date,"gen",n))}else e instanceof Date&&(this.hV=Ke(this.formatDate(e,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},t!=null&&this.setByParam(t)};B(d.asn1.DERGeneralizedTime,d.asn1.DERAbstractTime);d.asn1.DERSequence=function(t){d.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var e="",i=0;i<this.asn1Array.length;i++){var n=this.asn1Array[i];e+=n.tohex()}return this.hV=e,this.hV}};B(d.asn1.DERSequence,d.asn1.DERAbstractStructured);d.asn1.DERSet=function(t){d.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,i=0;i<this.asn1Array.length;i++){var n=this.asn1Array[i];e.push(n.tohex())}return this.sortFlag==!0&&e.sort(),this.hV=e.join(""),this.hV},typeof t<"u"&&typeof t.sortflag<"u"&&t.sortflag==!1&&(this.sortFlag=!1)};B(d.asn1.DERSet,d.asn1.DERAbstractStructured);d.asn1.DERTaggedObject=function(t){d.asn1.DERTaggedObject.superclass.constructor.call(this);var e=d.asn1,i=j,n=i.getV,r=i.isASN1HEX,s=e.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(a,o,l){this.params={tag:o,explicit:a,obj:l}},this.getFreshValueHex=function(){var a=this.params;if(a.explicit==null&&(a.explicit=!0),a.tage!=null&&(a.tag=a.tage,a.explicit=!0),a.tagi!=null&&(a.tag=a.tagi,a.explicit=!1),a.str!=null)this.hV=wi(a.str);else if(a.hex!=null)this.hV=a.hex;else if(a.obj!=null){var o;a.obj instanceof e.ASN1Object?o=a.obj.tohex():typeof a.obj=="object"&&(o=s(a.obj).tohex()),a.explicit?this.hV=o:this.hV=n(o,0)}else throw new Error("str, hex nor obj not specified");return a.tag==null&&(a.tag="a0"),this.hT=a.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(a){this.params=a},t!==void 0&&this.setByParam(t)};B(d.asn1.DERTaggedObject,d.asn1.ASN1Object);var j=new function(){};j.getLblen=function(t,e){if(t.substr(e+2,1)!="8")return 1;var i=parseInt(t.substr(e+3,1));return i==0?-1:0<i&&i<10?i+1:-2};j.getL=function(t,e){var i=j.getLblen(t,e);return i<1?"":t.substr(e+2,i*2)};j.getVblen=function(t,e){var i,n;return i=j.getL(t,e),i==""?-1:(i.substr(0,1)==="8"?n=new O(i.substr(2),16):n=new O(i,16),n.intValue())};j.getVidx=function(t,e){var i=j.getLblen(t,e);return i<0?i:e+(i+1)*2};j.getV=function(t,e){var i=j.getVidx(t,e),n=j.getVblen(t,e);return t.substr(i,n*2)};j.getTLV=function(t,e){return t.substr(e,2)+j.getL(t,e)+j.getV(t,e)};j.getTLVblen=function(t,e){return 2+j.getLblen(t,e)*2+j.getVblen(t,e)*2};j.getNextSiblingIdx=function(t,e){var i=j.getVidx(t,e),n=j.getVblen(t,e);return i+n*2};j.getChildIdx=function(t,e){var i=j,n=[],r,s,a;r=i.getVidx(t,e),s=i.getVblen(t,e)*2,t.substr(e,2)=="03"&&(r+=2,s-=2),a=0;for(var o=r;a<=s;){var l=i.getTLVblen(t,o);if(a+=l,a<=s&&n.push(o),o+=l,a>=s)break}return n};j.getNthChildIdx=function(t,e,i){var n=j.getChildIdx(t,e);return n[i]};j.getIdxbyList=function(t,e,i,n){var r=j,s,a;return i.length==0?n!==void 0&&t.substr(e,2)!==n?-1:e:(s=i.shift(),a=r.getChildIdx(t,e),s>=a.length?-1:r.getIdxbyList(t,a[s],i,n))};j.getIdxbyListEx=function(t,e,i,n){var r=j,s,a;if(i.length==0)return n!==void 0&&t.substr(e,2)!==n?-1:e;s=i.shift(),a=r.getChildIdx(t,e);for(var o=0,l=0;l<a.length;l++){var u=t.substr(a[l],2);if(typeof s=="number"&&!r.isContextTag(u)&&o==s||typeof s=="string"&&r.isContextTag(u,s))return r.getIdxbyListEx(t,a[l],i,n);r.isContextTag(u)||o++}return-1};j.getTLVbyList=function(t,e,i,n){var r=j,s=r.getIdxbyList(t,e,i,n);return s==-1||s>=t.length?null:r.getTLV(t,s)};j.getTLVbyListEx=function(t,e,i,n){var r=j,s=r.getIdxbyListEx(t,e,i,n);return s==-1?null:r.getTLV(t,s)};j.getVbyList=function(t,e,i,n,r){var s=j,a,o;return a=s.getIdxbyList(t,e,i,n),a==-1||a>=t.length?null:(o=s.getV(t,a),r===!0&&(o=o.substr(2)),o)};j.getVbyListEx=function(t,e,i,n,r){var s=j,a,o,l;return a=s.getIdxbyListEx(t,e,i,n),a==-1?null:(l=s.getV(t,a),t.substr(a,2)=="03"&&r!==!1&&(l=l.substr(2)),l)};j.getInt=function(t,e,i){i==null&&(i=-1);try{var n=t.substr(e,2);if(n!="02"&&n!="03")return i;var r=j.getV(t,e);return n=="02"?parseInt(r,16):ys(r)}catch{return i}};j.getOID=function(t,e,i){i==null&&(i=null);try{if(t.substr(e,2)!="06")return i;var n=j.getV(t,e);return Ei(n)}catch{return i}};j.getOIDName=function(t,e,i){i==null&&(i=null);try{var n=j.getOID(t,e,i);if(n==i)return i;var r=d.asn1.x509.OID.oid2name(n);return r==""?n:r}catch{return i}};j.getString=function(t,e,i){i==null&&(i=null);try{var n=j.getV(t,e);return ze(n)}catch{return i}};j.hextooidstr=function(t){var e=function(p,c){return p.length>=c?p:new Array(c-p.length+1).join("0")+p},i=[],n=t.substr(0,2),r=parseInt(n,16);i[0]=new String(Math.floor(r/40)),i[1]=new String(r%40);for(var s=t.substr(2),a=[],o=0;o<s.length/2;o++)a.push(parseInt(s.substr(o*2,2),16));for(var l=[],u="",o=0;o<a.length;o++)a[o]&128?u=u+e((a[o]&127).toString(2),7):(u=u+e((a[o]&127).toString(2),7),l.push(new String(parseInt(u,2))),u="");var g=i.join(".");return l.length>0&&(g=g+"."+l.join(".")),g};j.dump=function(t,e,i,n){var r=j,s=r.getV,a=r.dump,o=r.getChildIdx,l=t;t instanceof d.asn1.ASN1Object&&(l=t.tohex());var u=function(x,_){if(x.length<=_*2)return x;var A=x.substr(0,_)+"..(total "+x.length/2+"bytes).."+x.substr(x.length-_,_);return A};e===void 0&&(e={ommit_long_octet:32}),i===void 0&&(i=0),n===void 0&&(n="");var g=e.ommit_long_octet,E=l.substr(i,2);if(E=="01"){var p=s(l,i);return p=="00"?n+`BOOLEAN FALSE
`:n+`BOOLEAN TRUE
`}if(E=="02"){var p=s(l,i);return n+"INTEGER "+u(p,g)+`
`}if(E=="03"){var p=s(l,i);if(r.isASN1HEX(p.substr(2))){var c=n+`BITSTRING, encapsulates
`;return c=c+a(p.substr(2),e,0,n+"  "),c}else return n+"BITSTRING "+u(p,g)+`
`}if(E=="04"){var p=s(l,i);if(r.isASN1HEX(p)){var c=n+`OCTETSTRING, encapsulates
`;return c=c+a(p,e,0,n+"  "),c}else return n+"OCTETSTRING "+u(p,g)+`
`}if(E=="05")return n+`NULL
`;if(E=="06"){var h=s(l,i),m=d.asn1.ASN1Util.oidHexToInt(h),f=d.asn1.x509.OID.oid2name(m),b=m.replace(/\./g," ");return f!=""?n+"ObjectIdentifier "+f+" ("+b+`)
`:n+"ObjectIdentifier ("+b+`)
`}if(E=="0a")return n+"ENUMERATED "+parseInt(s(l,i))+`
`;if(E=="0c")return n+"UTF8String '"+de(s(l,i))+`'
`;if(E=="13")return n+"PrintableString '"+de(s(l,i))+`'
`;if(E=="14")return n+"TeletexString '"+de(s(l,i))+`'
`;if(E=="16")return n+"IA5String '"+de(s(l,i))+`'
`;if(E=="17")return n+"UTCTime "+de(s(l,i))+`
`;if(E=="18")return n+"GeneralizedTime "+de(s(l,i))+`
`;if(E=="1a")return n+"VisualString '"+de(s(l,i))+`'
`;if(E=="1e")return n+"BMPString '"+cn(s(l,i))+`'
`;if(E=="30"){if(l.substr(i,4)=="3000")return n+`SEQUENCE {}
`;var c=n+`SEQUENCE
`,v=o(l,i),w=e;if((v.length==2||v.length==3)&&l.substr(v[0],2)=="06"&&l.substr(v[v.length-1],2)=="04"){var f=r.oidname(s(l,v[0])),y=JSON.parse(JSON.stringify(e));y.x509ExtName=f,w=y}for(var S=0;S<v.length;S++)c=c+a(l,w,v[S],n+"  ");return c}if(E=="31"){for(var c=n+`SET
`,v=o(l,i),S=0;S<v.length;S++)c=c+a(l,e,v[S],n+"  ");return c}var E=parseInt(E,16);if(E&128){var C=E&31;if(E&32){for(var c=n+"["+C+`]
`,v=o(l,i),S=0;S<v.length;S++)c=c+a(l,e,v[S],n+"  ");return c}else{var p=s(l,i);if(j.isASN1HEX(p)){var c=n+"["+C+`]
`;return c=c+a(p,e,0,n+"  "),c}else(p.substr(0,8)=="68747470"||e.x509ExtName==="subjectAltName"&&C==2)&&(p=de(p));var c=n+"["+C+"] "+p+`
`;return c}}return n+"UNKNOWN("+E+") "+s(l,i)+`
`};j.parse=function(t){var e=j,i=e.parse,n=e.isASN1HEX,r=e.getV,s=e.getTLV,a=e.getChildIdx,o=d.asn1,l=o.ASN1Util.oidHexToInt,u=o.x509.OID.oid2name,g=de,p=cn,c=Bd,h={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},m=function(A){for(var F=[],T=a(A,0),R=0;R<T.length;R++){var M=T[R],P=s(A,M),N=i(P);F.push(N)}return F},f=t.substr(0,2),b={},v=r(t,0);if(f=="01")return t=="0101ff"?{bool:!0}:{bool:!1};if(f=="02")return{int:{hex:v}};if(f=="03")try{if(v.substr(0,2)!="00")throw"not encap";var w=v.substr(2);if(!n(w))throw"not encap";return{bitstr:{obj:i(w)}}}catch{var y=null;return v.length<=10&&(y=xs(v)),y==null?{bitstr:{hex:v}}:{bitstr:{bin:y}}}else if(f=="04")try{if(!n(v))throw"not encap";return{octstr:{obj:i(v)}}}catch{return{octstr:{hex:v}}}else{if(f=="05")return{null:""};if(f=="06"){var S=l(v),E=u(S);return E==""?{oid:S}:{oid:E}}else{if(f=="0a")return v.length>4?{enum:{hex:v}}:{enum:parseInt(v,16)};if(f=="30"||f=="31")return b[h[f]]=m(t),b;if(f=="14"){var C=c(v);return b[h[f]]={str:C},b}else if(f=="1e"){var C=p(v);return b[h[f]]={str:C},b}else if(":0c:12:13:16:17:18:1a:".indexOf(f)!=-1){var C=g(v);return b[h[f]]={str:C},b}else if(f.match(/^8[0-9]$/)){var C=g(v);return C==null|C==""?{tag:{tag:f,explicit:!1,hex:v}}:C.match(/[\x00-\x1F\x7F-\x9F]/)!=null||C.match(/[\u0000-\u001F\u0080\u009F]/)!=null?{tag:{tag:f,explicit:!1,hex:v}}:{tag:{tag:f,explicit:!1,str:C}}}else if(f.match(/^a[0-9]$/))try{if(!n(v))throw new Error("not encap");return{tag:{tag:f,explicit:!0,obj:i(v)}}}catch{return{tag:{tag:f,explicit:!0,hex:v}}}else{var x=new d.asn1.ASN1Object;x.hV=v;var _=x.getLengthHexFromValue();return{asn1:{tlv:f+_+v}}}}}};j.isContextTag=function(t,e){t=t.toLowerCase();var i,n;try{i=parseInt(t,16)}catch{return-1}if(e===void 0)return(i&192)==128;try{var r=e.match(/^\[[0-9]+\]$/);return r==null||(n=parseInt(e.substr(1,e.length-1),10),n>31)?!1:(i&192)==128&&(i&31)==n}catch{return!1}};j.isASN1HEX=function(t){var e=j;if(t.length%2==1)return!1;var i=e.getVblen(t,0),n=t.substr(0,2),r=e.getL(t,0),s=t.length-n.length-r.length;return s==i*2};j.checkStrictDER=function(t,e,i,n,r){var s=j;if(i===void 0){if(typeof t!="string")throw new Error("not hex string");if(t=t.toLowerCase(),!d.lang.String.isHex(t))throw new Error("not hex string");i=t.length,n=t.length/2,n<128?r=1:r=Math.ceil(n.toString(16))+1}var a=s.getL(t,e);if(a.length>r*2)throw new Error("L of TLV too long: idx="+e);var o=s.getVblen(t,e);if(o>n)throw new Error("value of L too long than hex: idx="+e);var l=s.getTLV(t,e),u=l.length-2-s.getL(t,e).length;if(u!==o*2)throw new Error("V string length and L's value not the same:"+u+"/"+o*2);if(e===0&&t.length!=l.length)throw new Error("total length and TLV length unmatch:"+t.length+"!="+l.length);var g=t.substr(e,2);if(g==="02"){var p=s.getVidx(t,e);if(t.substr(p,2)=="00"&&t.charCodeAt(p+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(g,16)&32){for(var c=s.getVblen(t,e),h=0,m=s.getChildIdx(t,e),f=0;f<m.length;f++){var b=s.getTLV(t,m[f]);h+=b.length,s.checkStrictDER(t,m[f],i,n,r)}if(c*2!=h)throw new Error("sum of children's TLV length and L unmatch: "+c*2+"!="+h)}};j.oidname=function(t){var e=d.asn1;d.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var i=e.x509.OID.oid2name(t);return i===""&&(i=t),i};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.x509>"u"||!d.asn1.x509)&&(d.asn1.x509={});d.asn1.x509.Certificate=function(t){d.asn1.x509.Certificate.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.DERBitString,r=i.DERSequence,s=i.x509,a=s.TBSCertificate,o=s.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=this.params,u=l.sigalg;l.sigalg.name!=null&&(u=l.sigalg.name);var g=l.tbsobj.tohex(),p=new d.crypto.Signature({alg:u});p.init(l.cakey),p.updateHex(g),l.sighex=p.sign()},this.getPEM=function(){return De(this.tohex(),"CERTIFICATE")},this.tohex=function(){var l=this.params;if((l.tbsobj==null||l.tbsobj==null)&&(l.tbsobj=new a(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var u=[];u.push(l.tbsobj),u.push(new o({name:l.sigalg})),u.push(new n({hex:"00"+l.sighex}));var g=new r({array:u});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};B(d.asn1.x509.Certificate,d.asn1.ASN1Object);d.asn1.x509.TBSCertificate=function(t){d.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.x509,r=i.DERTaggedObject,s=i.DERInteger,a=i.DERSequence,o=n.AlgorithmIdentifier,l=n.Time,u=n.X500Name,g=n.Extensions,p=n.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(c){this.params=c},this.tohex=function(){var c=[],h=this.params;if(h.version!=null||h.version!=1){var m=2;h.version!=null&&(m=h.version-1);var f=new r({obj:new s({int:m})});c.push(f)}c.push(new s(h.serial)),c.push(new o({name:h.sigalg})),c.push(new u(h.issuer)),c.push(new a({array:[new l(h.notbefore),new l(h.notafter)]})),c.push(new u(h.subject)),c.push(new p(te.getKey(h.sbjpubkey))),h.ext!==void 0&&h.ext.length>0&&c.push(new r({tag:"a3",obj:new g(h.ext)}));var b=new d.asn1.DERSequence({array:c});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.x509.TBSCertificate,d.asn1.ASN1Object);d.asn1.x509.Extensions=function(t){d.asn1.x509.Extensions.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.DERSequence,r=i.x509;this.aParam=[],this.setByParam=function(s){this.aParam=s},this.tohex=function(){for(var s=[],a=0;a<this.aParam.length;a++){var o=this.aParam[a],l=o.extname,u=null;if(o.extn!=null)u=new r.PrivateExtension(o);else if(l=="subjectKeyIdentifier")u=new r.SubjectKeyIdentifier(o);else if(l=="keyUsage")u=new r.KeyUsage(o);else if(l=="subjectAltName")u=new r.SubjectAltName(o);else if(l=="issuerAltName")u=new r.IssuerAltName(o);else if(l=="basicConstraints")u=new r.BasicConstraints(o);else if(l=="nameConstraints")u=new r.NameConstraints(o);else if(l=="cRLDistributionPoints")u=new r.CRLDistributionPoints(o);else if(l=="certificatePolicies")u=new r.CertificatePolicies(o);else if(l=="authorityKeyIdentifier")u=new r.AuthorityKeyIdentifier(o);else if(l=="extKeyUsage")u=new r.ExtKeyUsage(o);else if(l=="authorityInfoAccess")u=new r.AuthorityInfoAccess(o);else if(l=="cRLNumber")u=new r.CRLNumber(o);else if(l=="cRLReason")u=new r.CRLReason(o);else if(l=="ocspNonce")u=new r.OCSPNonce(o);else if(l=="ocspNoCheck")u=new r.OCSPNoCheck(o);else if(l=="adobeTimeStamp")u=new r.AdobeTimeStamp(o);else if(l=="subjectDirectoryAttributes")u=new r.SubjectDirectoryAttributes(o);else throw new Error("extension not supported:"+JSON.stringify(o));u!=null&&s.push(u)}var g=new n({array:s});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.x509.Extensions,d.asn1.ASN1Object);d.asn1.x509.Extension=function(t){d.asn1.x509.Extension.superclass.constructor.call(this);var e=null,i=d,n=i.asn1,r=n.DERObjectIdentifier,s=n.DEROctetString,a=n.DERBitString,o=n.DERBoolean,l=n.DERSequence;this.tohex=function(){var u=new r({oid:this.oid}),g=new s({hex:this.getExtnValueHex()}),p=new Array;p.push(u),this.critical&&p.push(new o),p.push(g);var c=new l({array:p});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,t!==void 0&&t.critical!==void 0&&(this.critical=t.critical)};B(d.asn1.x509.Extension,d.asn1.ASN1Object);d.asn1.x509.KeyUsage=function(t){d.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=Error,i={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var n=this.getBinValue();return this.asn1ExtnValue=new d.asn1.DERBitString({bin:n}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var n=this.params;if(typeof n!="object"||typeof n.names!="object"&&typeof n.bin!="string")throw new e("parameter not yet set");if(n.names!=null)return mi(n.names,i);if(n.bin!=null)return n.bin;throw new e("parameter not set properly")},this.oid="2.5.29.15",t!==void 0&&(this.params=t)};B(d.asn1.x509.KeyUsage,d.asn1.x509.Extension);d.asn1.x509.BasicConstraints=function(t){d.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);var e=d.asn1,i=e.DERBoolean,n=e.DERInteger,r=e.DERSequence,s=!1,a=-1;this.getExtnValueHex=function(){var o=new Array;this.cA&&o.push(new i),this.pathLen>-1&&o.push(new n({int:this.pathLen}));var l=new r({array:o});return this.asn1ExtnValue=l,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,t!==void 0&&(t.cA!==void 0&&(this.cA=t.cA),t.pathLen!==void 0&&(this.pathLen=t.pathLen))};B(d.asn1.x509.BasicConstraints,d.asn1.x509.Extension);d.asn1.x509.CRLDistributionPoints=function(t){d.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(r){for(var s=[],a=0;a<r.length;a++)if(r[a]instanceof d.asn1.ASN1Object)s.push(r[a]);else{var o=new n.DistributionPoint(r[a]);s.push(o)}this.asn1ExtnValue=new i.DERSequence({array:s})},this.setByOneURI=function(r){var s=new n.DistributionPoint({fulluri:r});this.setByDPArray([s])},this.oid="2.5.29.31",t!==void 0&&(t.array!==void 0?this.setByDPArray(t.array):t.uri!==void 0&&this.setByOneURI(t.uri))};B(d.asn1.x509.CRLDistributionPoints,d.asn1.x509.Extension);d.asn1.x509.DistributionPoint=function(t){d.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=null,i=d,n=i.asn1,r=n.x509.DistributionPointName;this.tohex=function(){var s=new n.DERSequence;if(this.asn1DP!=null){var a=new n.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});s.appendASN1Object(a)}return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.dpobj!==void 0?this.asn1DP=t.dpobj:t.dpname!==void 0?this.asn1DP=new r(t.dpname):t.fulluri!==void 0&&(this.asn1DP=new r({full:[{uri:t.fulluri}]})))};B(d.asn1.x509.DistributionPoint,d.asn1.ASN1Object);d.asn1.x509.DistributionPointName=function(t){d.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=null,i=null,n=null,r=null,s=d,a=s.asn1,o=a.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new o({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0)if(a.x509.GeneralNames.prototype.isPrototypeOf(t))this.type="full",this.tag="a0",this.asn1V=t;else if(t.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new a.x509.GeneralNames(t.full);else throw new Error("This class supports GeneralNames only as argument")};B(d.asn1.x509.DistributionPointName,d.asn1.ASN1Object);d.asn1.x509.CertificatePolicies=function(t){d.asn1.x509.CertificatePolicies.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.x509,r=i.DERSequence,s=n.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var a=[],o=0;o<this.params.array.length;o++)a.push(new s(this.params.array[o]));var l=new r({array:a});return this.asn1ExtnValue=l,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",t!==void 0&&(this.params=t)};B(d.asn1.x509.CertificatePolicies,d.asn1.x509.Extension);d.asn1.x509.PolicyInformation=function(t){d.asn1.x509.PolicyInformation.superclass.constructor.call(this,t);var e=d.asn1,i=e.DERSequence,n=e.DERObjectIdentifier,r=e.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var s=[new n(this.params.policyoid)];if(this.params.array!==void 0){for(var a=[],o=0;o<this.params.array.length;o++)a.push(new r(this.params.array[o]));a.length>0&&s.push(new i({array:a}))}var l=new i({array:s});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};B(d.asn1.x509.PolicyInformation,d.asn1.ASN1Object);d.asn1.x509.PolicyQualifierInfo=function(t){d.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,t);var e=d.asn1,i=e.DERSequence,n=e.DERIA5String,r=e.DERObjectIdentifier,s=e.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var a=new i({array:[new r({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]});return a.tohex()}if(this.params.unotice!=null){var a=new i({array:[new r({oid:"1.3.6.1.5.5.7.2.2"}),new s(this.params.unotice)]});return a.tohex()}},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};B(d.asn1.x509.PolicyQualifierInfo,d.asn1.ASN1Object);d.asn1.x509.UserNotice=function(t){d.asn1.x509.UserNotice.superclass.constructor.call(this,t);var e=d.asn1.DERSequence,i=d.asn1.DERInteger,n=d.asn1.x509.DisplayText,r=d.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var s=[];this.params.noticeref!==void 0&&s.push(new r(this.params.noticeref)),this.params.exptext!==void 0&&s.push(new n(this.params.exptext));var a=new e({array:s});return a.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};B(d.asn1.x509.UserNotice,d.asn1.ASN1Object);d.asn1.x509.NoticeReference=function(t){d.asn1.x509.NoticeReference.superclass.constructor.call(this,t);var e=d.asn1.DERSequence,i=d.asn1.DERInteger,n=d.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var r=[];if(this.params.org!==void 0&&r.push(new n(this.params.org)),this.params.noticenum!==void 0){for(var s=[],a=this.params.noticenum,o=0;o<a.length;o++)s.push(new i(a[o]));r.push(new e({array:s}))}if(r.length==0)throw new Error("parameter is empty");var l=new e({array:r});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};B(d.asn1.x509.NoticeReference,d.asn1.ASN1Object);d.asn1.x509.DisplayText=function(t){d.asn1.x509.DisplayText.superclass.constructor.call(this,t),this.hT="0c",t!==void 0&&(t.type==="ia5"?this.hT="16":t.type==="vis"?this.hT="1a":t.type==="bmp"&&(this.hT="1e"))};B(d.asn1.x509.DisplayText,d.asn1.DERAbstractString);d.asn1.x509.NameConstraints=function(t){d.asn1.x509.NameConstraints.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.x509,r=i.ASN1Util.newObject,s=n.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var a=this.params,o=[];if(a.permit!=null&&a.permit.length!=null){for(var l=[],u=0;u<a.permit.length;u++)l.push(new s(a.permit[u]));o.push({tag:{tagi:"a0",obj:{seq:l}}})}if(a.exclude!=null&&a.exclude.length!=null){for(var g=[],u=0;u<a.exclude.length;u++)g.push(new s(a.exclude[u]));o.push({tag:{tagi:"a1",obj:{seq:g}}})}return this.asn1ExtnValue=r({seq:o}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",t!==void 0&&(this.params=t)};B(d.asn1.x509.NameConstraints,d.asn1.x509.Extension);d.asn1.x509.GeneralSubtree=function(t){d.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var e=d.asn1,i=e.x509,n=i.GeneralName,r=e.ASN1Util.newObject;this.params=null,this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params,a=[new n(s)];s.min!=null&&a.push({tag:{tagi:"80",obj:{int:s.min}}}),s.max!=null&&a.push({tag:{tagi:"81",obj:{int:s.max}}});var o=r({seq:a});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.x509.GeneralSubtree,d.asn1.ASN1Object);d.asn1.x509.ExtKeyUsage=function(t){d.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=d,i=e.asn1;this.setPurposeArray=function(n){this.asn1ExtnValue=new i.DERSequence;for(var r=0;r<n.length;r++){var s=new i.DERObjectIdentifier(n[r]);this.asn1ExtnValue.appendASN1Object(s)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",t!==void 0&&t.array!==void 0&&this.setPurposeArray(t.array)};B(d.asn1.x509.ExtKeyUsage,d.asn1.x509.Extension);d.asn1.x509.AuthorityKeyIdentifier=function(t){d.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.DERTaggedObject,r=i.x509.GeneralNames,s=e.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var a=new Array;this.asn1KID&&a.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&a.push(new n({explicit:!1,tag:"a1",obj:new r([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&a.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var o=new i.DERSequence({array:a});return this.asn1ExtnValue=o,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(a){if(a.str!==void 0||a.hex!==void 0)this.asn1KID=new d.asn1.DEROctetString(a);else if(typeof a=="object"&&d.crypto.Util.isKey(a)||typeof a=="string"&&a.indexOf("BEGIN ")!=-1){var o=a;typeof a=="string"&&(o=te.getKey(a));var l=te.getKeyID(o);this.asn1KID=new d.asn1.DEROctetString({hex:l})}},this.setCertIssuerByParam=function(a){a.str!==void 0||a.ldapstr!==void 0||a.hex!==void 0||a.certsubject!==void 0||a.certissuer!==void 0?this.asn1CertIssuer=new d.asn1.x509.X500Name(a):typeof a=="string"&&a.indexOf("BEGIN ")!=-1&&a.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new d.asn1.x509.X500Name({certissuer:a}))},this.setCertSNByParam=function(a){if(a.str!==void 0||a.bigint!==void 0||a.hex!==void 0)this.asn1CertSN=new d.asn1.DERInteger(a);else if(typeof a=="string"&&a.indexOf("BEGIN ")!=-1&&a.indexOf("CERTIFICATE")){var o=new J;o.readCertPEM(a);var l=o.getSerialNumberHex();this.asn1CertSN=new d.asn1.DERInteger({hex:l})}},this.oid="2.5.29.35",t!==void 0&&(t.kid!==void 0&&this.setKIDByParam(t.kid),t.issuer!==void 0&&this.setCertIssuerByParam(t.issuer),t.sn!==void 0&&this.setCertSNByParam(t.sn),t.issuersn!==void 0&&typeof t.issuersn=="string"&&t.issuersn.indexOf("BEGIN ")!=-1&&t.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(t.issuersn),this.setCertIssuerByParam(t.issuersn)))};B(d.asn1.x509.AuthorityKeyIdentifier,d.asn1.x509.Extension);d.asn1.x509.SubjectKeyIdentifier=function(t){d.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(r){if(r.str!==void 0||r.hex!==void 0)this.asn1KID=new n(r);else if(typeof r=="object"&&d.crypto.Util.isKey(r)||typeof r=="string"&&r.indexOf("BEGIN")!=-1){var s=r;typeof r=="string"&&(s=te.getKey(r));var a=te.getKeyID(s);this.asn1KID=new d.asn1.DEROctetString({hex:a})}},this.oid="2.5.29.14",t!==void 0&&t.kid!==void 0&&this.setKIDByParam(t.kid)};B(d.asn1.x509.SubjectKeyIdentifier,d.asn1.x509.Extension);d.asn1.x509.AuthorityInfoAccess=function(t){d.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(e){for(var i=new Array,n=d,r=n.asn1,s=r.DERSequence,a=r.DERObjectIdentifier,o=r.x509.GeneralName,l=0;l<e.length;l++){var u,g=e[l];if(g.ocsp!==void 0)u=new s({array:[new a({oid:"1.3.6.1.5.5.7.48.1"}),new o({uri:g.ocsp})]});else if(g.caissuer!==void 0)u=new s({array:[new a({oid:"1.3.6.1.5.5.7.48.2"}),new o({uri:g.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(g));i.push(u)}this.asn1ExtnValue=new s({array:i})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",t!==void 0&&t.array!==void 0&&this.setAccessDescriptionArray(t.array)};B(d.asn1.x509.AuthorityInfoAccess,d.asn1.x509.Extension);d.asn1.x509.SubjectAltName=function(t){d.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(e){this.asn1ExtnValue=new d.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};B(d.asn1.x509.SubjectAltName,d.asn1.x509.Extension);d.asn1.x509.IssuerAltName=function(t){d.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(e){this.asn1ExtnValue=new d.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};B(d.asn1.x509.IssuerAltName,d.asn1.x509.Extension);d.asn1.x509.SubjectDirectoryAttributes=function(t){d.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,t);var e=d.asn1,i=e.DERSequence,n=e.ASN1Util.newObject,r=e.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var s=[],a=0;a<this.params.array.length;a++){var o=this.params.array[a],l={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(o.attr=="dateOfBirth")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={gentime:o.str};else if(o.attr=="placeOfBirth")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={utf8str:o.str};else if(o.attr=="gender")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={prnstr:o.str};else if(o.attr=="countryOfCitizenship")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={prnstr:o.str};else if(o.attr=="countryOfResidence")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={prnstr:o.str};else throw new Error("unsupported attribute: "+o.attr);s.push(new n(l))}var u=new i({array:s});return this.asn1ExtnValue=u,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",t!==void 0&&(this.params=t)};B(d.asn1.x509.SubjectDirectoryAttributes,d.asn1.x509.Extension);d.asn1.x509.PrivateExtension=function(t){d.asn1.x509.PrivateExtension.superclass.constructor.call(this,t);var e=d,i=e.lang.String.isHex,n=e.asn1,r=n.x509.OID.name2oid,s=n.ASN1Util.newObject;this.params=null,this.setByParam=function(a){this.oid=r(a.extname),this.params=a},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var a=this.params.extn;if(typeof a=="string"&&i(a))return a;if(typeof a=="object")try{return s(a).tohex()}catch{}throw new Error("unsupported extn value")},t!=null&&this.setByParam(t)};B(d.asn1.x509.PrivateExtension,d.asn1.x509.Extension);d.asn1.x509.CRL=function(t){d.asn1.x509.CRL.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.DERSequence,r=i.DERBitString,s=i.x509,a=s.AlgorithmIdentifier,o=s.TBSCertList;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=new o(this.params).tohex(),u=new d.crypto.Signature({alg:this.params.sigalg});u.init(this.params.cakey),u.updateHex(l);var g=u.sign();this.params.sighex=g},this.getPEM=function(){return De(this.tohex(),"X509 CRL")},this.tohex=function(){var l=this.params;if(l.tbsobj==null&&(l.tbsobj=new o(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var u=[];u.push(l.tbsobj),u.push(new a({name:l.sigalg})),u.push(new r({hex:"00"+l.sighex}));var g=new n({array:u});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};B(d.asn1.x509.CRL,d.asn1.ASN1Object);d.asn1.x509.TBSCertList=function(t){d.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.DERTaggedObject,a=i.DERObjectIdentifier,o=i.x509,l=o.AlgorithmIdentifier,u=o.Time,g=o.Extensions,p=o.X500Name;this.params=null,this.setByParam=function(c){this.params=c},this.getRevCertSequence=function(){for(var c=[],h=this.params.revcert,m=0;m<h.length;m++){var f=[new n(h[m].sn),new u(h[m].date)];h[m].ext!=null&&f.push(new g(h[m].ext)),c.push(new r({array:f}))}return new r({array:c})},this.tohex=function(){var c=[],h=this.params;if(h.version!=null){var m=h.version-1,f=new n({int:m});c.push(f)}if(c.push(new l({name:h.sigalg})),c.push(new p(h.issuer)),c.push(new u(h.thisupdate)),h.nextupdate!=null&&c.push(new u(h.nextupdate)),h.revcert!=null&&c.push(this.getRevCertSequence()),h.ext!=null){var b=new g(h.ext);c.push(new s({tag:"a0",explicit:!0,obj:b}))}var v=new r({array:c});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.x509.TBSCertList,d.asn1.ASN1Object);d.asn1.x509.CRLEntry=function(t){d.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1;this.setCertSerial=function(s){this.sn=new r.DERInteger(s)},this.setRevocationDate=function(s){this.time=new r.x509.Time(s)},this.tohex=function(){var s=new r.DERSequence({array:[this.sn,this.time]});return this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.time!==void 0&&this.setRevocationDate(t.time),t.sn!==void 0&&this.setCertSerial(t.sn))};B(d.asn1.x509.CRLEntry,d.asn1.ASN1Object);d.asn1.x509.CRLNumber=function(t){d.asn1.x509.CRLNumber.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new d.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",t!=null&&(this.params=t)};B(d.asn1.x509.CRLNumber,d.asn1.x509.Extension);d.asn1.x509.CRLReason=function(t){d.asn1.x509.CRLReason.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new d.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",t!=null&&(this.params=t)};B(d.asn1.x509.CRLReason,d.asn1.x509.Extension);d.asn1.x509.OCSPNonce=function(t){d.asn1.x509.OCSPNonce.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new d.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",t!=null&&(this.params=t)};B(d.asn1.x509.OCSPNonce,d.asn1.x509.Extension);d.asn1.x509.OCSPNoCheck=function(t){d.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new d.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",t!=null&&(this.params=t)};B(d.asn1.x509.OCSPNoCheck,d.asn1.x509.Extension);d.asn1.x509.AdobeTimeStamp=function(t){d.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,t);var e=d,i=e.asn1,n=i.DERInteger,r=i.DERBoolean,s=i.DERSequence,a=i.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var o=this.params,l=[new n(1)];return l.push(new a({uri:o.uri})),o.reqauth!=null&&l.push(new r(o.reqauth)),this.asn1ExtnValue=new s({array:l}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",t!==void 0&&this.setByParam(t)};B(d.asn1.x509.AdobeTimeStamp,d.asn1.x509.Extension);d.asn1.x509.X500Name=function(t){d.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=d,i=e.asn1,n=i.x509,r=n.RDN,s=Fe;this.setByString=function(a,o){o!==void 0&&(this.sRule=o);var l=a.split("/");l.shift();for(var u=[],g=0;g<l.length;g++)if(l[g].match(/^[^=]+=.+$/))u.push(l[g]);else{var p=u.length-1;u[p]=u[p]+"/"+l[g]}for(var g=0;g<u.length;g++)this.asn1Array.push(new r({str:u[g],rule:this.sRule}))},this.setByLdapString=function(a,o){o!==void 0&&(this.sRule=o);var l=n.X500Name.ldapToCompat(a);this.setByString(l,o)},this.setByObject=function(a,o){o!==void 0&&(this.sRule=o);for(var l in a)if(a.hasOwnProperty(l)){var u=new r({str:l+"="+a[l],rule:this.sRule});this.asn1Array?this.asn1Array.push(u):this.asn1Array=[u]}},this.setByParam=function(a){if(a.rule!==void 0&&(this.sRule=a.rule),a.array!==void 0)this.paramArray=a.array;else if(a.str!==void 0)this.setByString(a.str);else if(a.ldapstr!==void 0)this.setByLdapString(a.ldapstr);else if(a.hex!==void 0)this.hTLV=a.hex;else if(a.certissuer!==void 0){var o=new J;o.readCertPEM(a.certissuer),this.hTLV=o.getIssuerHex()}else if(a.certsubject!==void 0){var o=new J;o.readCertPEM(a.certsubject),this.hTLV=o.getSubjectHex()}else typeof a=="object"&&a.certsubject===void 0&&a.certissuer===void 0&&this.setByObject(a)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var a=0;a<this.paramArray.length;a++){var o={array:this.paramArray[a]};this.sRule!="utf8"&&(o.rule=this.sRule);var l=new r(o);this.asn1Array.push(l)}var u=new i.DERSequence({array:this.asn1Array});return this.hTLV=u.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.x509.X500Name,d.asn1.ASN1Object);d.asn1.x509.X500Name.compatToLDAP=function(t){if(t.substr(0,1)!=="/")throw"malformed input";var e="";t=t.substr(1);var i=t.split("/");return i.reverse(),i=i.map(function(n){return n.replace(/,/,"\\,")}),i.join(",")};d.asn1.x509.X500Name.onelineToLDAP=function(t){return d.asn1.x509.X500Name.compatToLDAP(t)};d.asn1.x509.X500Name.ldapToCompat=function(t){for(var e=t.split(","),i=!1,n=[],r=0;e.length>0;r++){var s=e.shift();if(i===!0){var a=n.pop(),o=(a+","+s).replace(/\\,/g,",");n.push(o),i=!1}else n.push(s);s.substr(-1,1)==="\\"&&(i=!0)}return n=n.map(function(l){return l.replace("/","\\/")}),n.reverse(),"/"+n.join("/")};d.asn1.x509.X500Name.ldapToOneline=function(t){return d.asn1.x509.X500Name.ldapToCompat(t)};d.asn1.x509.RDN=function(t){d.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=d.asn1.x509.AttributeTypeAndValue;this.setByParam=function(i){i.rule!==void 0&&(this.sRule=i.rule),i.str!==void 0&&this.addByMultiValuedString(i.str),i.array!==void 0&&(this.paramArray=i.array)},this.addByString=function(i){this.asn1Array.push(new d.asn1.x509.AttributeTypeAndValue({str:i,rule:this.sRule}))},this.addByMultiValuedString=function(i){for(var n=d.asn1.x509.RDN.parseString(i),r=0;r<n.length;r++)this.addByString(n[r])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var i=0;i<this.paramArray.length;i++){var n=this.paramArray[i];n.rule!==void 0&&this.sRule!="utf8"&&(n.rule=this.sRule);var r=new e(n);this.asn1Array.push(r)}var s=new d.asn1.DERSet({array:this.asn1Array});return this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.x509.RDN,d.asn1.ASN1Object);d.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),i=!1,n=[],r=0;e.length>0;r++){var s=e.shift();if(i===!0){var a=n.pop(),o=(a+"+"+s).replace(/\\\+/g,"+");n.push(o),i=!1}else n.push(s);s.substr(-1,1)==="\\"&&(i=!0)}for(var l=!1,u=[],r=0;n.length>0;r++){var s=n.shift();if(l===!0){var g=u.pop();if(s.match(/"$/)){var o=(g+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");u.push(o),l=!1}else u.push(g+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(l=!0)}return u};d.asn1.x509.AttributeTypeAndValue=function(t){d.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var e=d,i=e.asn1,n=i.DERSequence,r=i.DERUTF8String,s=i.DERPrintableString,a=i.DERTeletexString,o=i.DERIA5String,l=i.DERVisibleString,u=i.DERBMPString,g=e.lang.String.isMail,p=e.lang.String.isPrintable;this.setByParam=function(c){if(c.rule!==void 0&&(this.sRule=c.rule),c.ds!==void 0&&(this.dsType=c.ds),c.value===void 0&&c.str!==void 0){var h=c.str,m=h.match(/^([^=]+)=(.+)$/);if(m)this.sType=m[1],this.sValue=m[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=c.type,this.sValue=c.value},this.setByString=function(c,h){h!==void 0&&(this.sRule=h);var m=c.match(/^([^=]+)=(.+)$/);if(m)this.setByAttrTypeAndValueStr(m[1],m[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var c=this.sType,h=this.sValue,m=this.sRule;return m==="prn"?c=="CN"&&g(h)?"ia5":p(h)?"prn":"utf8":m==="utf8"?c=="CN"&&g(h)?"ia5":c=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(c,h,m){m!==void 0&&(this.sRule=m),this.sType=c,this.sValue=h},this.getValueObj=function(c,h){if(c=="utf8")return new r({str:h});if(c=="prn")return new s({str:h});if(c=="tel")return new a({str:h});if(c=="ia5")return new o({str:h});if(c=="vis")return new l({str:h});if(c=="bmp")return new u({str:h});throw new Error("unsupported directory string type: type="+c+" value="+h)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var c=d.asn1.x509.OID.atype2obj(this.sType),h=this.getValueObj(this.dsType,this.sValue),m=new n({array:[c,h]});return this.TLV=m.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.x509.AttributeTypeAndValue,d.asn1.ASN1Object);d.asn1.x509.SubjectPublicKeyInfo=function(t){d.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1,s=r.DERInteger,a=r.DERBitString,o=r.DERObjectIdentifier,l=r.DERSequence,u=r.ASN1Util.newObject,g=r.x509,p=g.AlgorithmIdentifier,c=n.crypto,h=c.ECDSA,m=c.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var f=new l({array:[this.asn1AlgId,this.asn1SubjPKey]});return f},this.tohex=function(){var f=this.getASN1Object();return this.hTLV=f.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(f){try{if(f instanceof K){var b=u({seq:[{int:{bigint:f.n}},{int:{int:f.e}}]}),v=b.tohex();this.asn1AlgId=new p({name:"rsaEncryption"}),this.asn1SubjPKey=new a({hex:"00"+v})}}catch{}try{if(f instanceof d.crypto.ECDSA){var w=new o({name:f.curveName});this.asn1AlgId=new p({name:"ecPublicKey",asn1params:w}),this.asn1SubjPKey=new a({hex:"00"+f.pubKeyHex})}}catch{}try{if(f instanceof d.crypto.DSA){var w=new u({seq:[{int:{bigint:f.p}},{int:{bigint:f.q}},{int:{bigint:f.g}}]});this.asn1AlgId=new p({name:"dsa",asn1params:w});var y=new s({bigint:f.y});this.asn1SubjPKey=new a({hex:"00"+y.tohex()})}}catch{}},t!==void 0&&this.setPubKey(t)};B(d.asn1.x509.SubjectPublicKeyInfo,d.asn1.ASN1Object);d.asn1.x509.Time=function(t){d.asn1.x509.Time.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1,s=r.DERUTCTime,a=r.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(o){this.timeParams=o},this.setByParam=function(o){this.params=o},this.getType=function(o){return o.match(/^[0-9]{12}Z$/)?"utc":o.match(/^[0-9]{14}Z$/)?"gen":o.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":o.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var o=this.params,l=null;if(typeof o=="string"&&(o={str:o}),o!=null&&o.str&&(o.type==null||o.type==null)&&(o.type=this.getType(o.str)),o!=null&&o.str?(o.type=="utc"&&(l=new s(o.str)),o.type=="gen"&&(l=new a(o.str))):this.type=="gen"?l=new a:l=new s,l==null)throw new Error("wrong setting for Time");return this.TLV=l.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};d.asn1.x509.Time_bak=function(t){d.asn1.x509.Time_bak.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1,s=r.DERUTCTime,a=r.DERGeneralizedTime;this.setTimeParams=function(o){this.timeParams=o},this.tohex=function(){var o=null;return this.timeParams!=null?this.type=="utc"?o=new s(this.timeParams):o=new a(this.timeParams):this.type=="utc"?o=new s:o=new a,this.TLV=o.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",t!==void 0&&(t.type!==void 0?this.type=t.type:t.str!==void 0&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)};B(d.asn1.x509.Time,d.asn1.ASN1Object);d.asn1.x509.AlgorithmIdentifier=function(t){d.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=d,i=e.asn1,n=i.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var s=null;for(var a in n)a===this.nameAlg&&(s=n[a]);if(s!==null)return this.hTLV=s,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=i.x509.OID.name2obj(this.nameAlg));var o=[this.asn1Alg];this.asn1Params!==null&&o.push(this.asn1Params);var l=new i.DERSequence({array:o});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.name!==void 0&&(this.nameAlg=t.name),t.asn1params!==void 0&&(this.asn1Params=t.asn1params),t.paramempty!==void 0&&(this.paramEmpty=t.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var r=this.nameAlg.toLowerCase();r.substr(-7,7)!=="withdsa"&&r.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new i.DERNull)}};B(d.asn1.x509.AlgorithmIdentifier,d.asn1.ASN1Object);d.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};d.asn1.x509.GeneralName=function(t){d.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},i=d,n=i.asn1,r=n.x509,s=r.X500Name,a=r.OtherName,o=n.DERIA5String,l=n.DERPrintableString,u=n.DEROctetString,g=n.DERTaggedObject,p=n.ASN1Object,c=Error;this.params=null,this.setByParam=function(h){this.params=h},this.tohex=function(){var h=this.params,m,b,f,b=!1;if(h.other!==void 0)m="a0",f=new a(h.other);else if(h.rfc822!==void 0)m="81",f=new o({str:h.rfc822});else if(h.dns!==void 0)m="82",f=new o({str:h.dns});else if(h.dn!==void 0)m="a4",b=!0,typeof h.dn=="string"?f=new s({str:h.dn}):h.dn instanceof d.asn1.x509.X500Name?f=h.dn:f=new s(h.dn);else if(h.ldapdn!==void 0)m="a4",b=!0,f=new s({ldapstr:h.ldapdn});else if(h.certissuer!==void 0||h.certsubj!==void 0){m="a4",b=!0;var v,w,y=null;if(h.certsubj!==void 0?(v=!1,w=h.certsubj):(v=!0,w=h.certissuer),w.match(/^[0-9A-Fa-f]+$/)&&y==w,w.indexOf("-----BEGIN ")!=-1&&(y=Fe(w)),y==null)throw new Error("certsubj/certissuer not cert");var S=new J;S.hex=y;var E;v?E=S.getIssuerHex():E=S.getSubjectHex(),f=new p,f.hTLV=E}else if(h.uri!==void 0)m="86",f=new o({str:h.uri});else if(h.ip!==void 0){m="87";var C,x=h.ip;try{if(x.match(/^[0-9a-f]+$/)){var _=x.length;if(_==8||_==16||_==32||_==64)C=x;else throw"err"}else C=dn(x)}catch(F){throw new c("malformed IP address: "+h.ip+":"+F.message)}f=new u({hex:C})}else throw new c("improper params");var A=new g({tag:m,explicit:b,obj:f});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.x509.GeneralName,d.asn1.ASN1Object);d.asn1.x509.GeneralNames=function(t){d.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=null,i=d,n=i.asn1;this.setByParamArray=function(r){for(var s=0;s<r.length;s++){var a=new n.x509.GeneralName(r[s]);this.asn1Array.push(a)}},this.tohex=function(){var r=new n.DERSequence({array:this.asn1Array});return r.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof t<"u"&&this.setByParamArray(t)};B(d.asn1.x509.GeneralNames,d.asn1.ASN1Object);d.asn1.x509.OtherName=function(t){d.asn1.x509.OtherName.superclass.constructor.call(this);var e=null,i=null,n=d,r=n.asn1,s=r.DERObjectIdentifier,a=r.DERSequence,o=r.ASN1Util.newObject;this.params=null,this.setByParam=function(l){this.params=l},this.tohex=function(){var l=this.params;if(l.oid==null||l.value==null)throw new Error("oid or value not specified");var u=new s({oid:l.oid}),g=o({tag:{tag:"a0",explicit:!0,obj:l.value}}),p=new a({array:[u,g]});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.x509.OtherName,d.asn1.ASN1Object);d.asn1.x509.OID=new function(){var t=d.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(e){if(typeof this.objCache[e]<"u")return this.objCache[e];if(typeof this.name2oidList[e]>"u")throw"Name of ObjectIdentifier not defined: "+e;var i=this.name2oidList[e],n=new t({oid:i});return this.objCache[e]=n,n},this.atype2obj=function(e){if(this.objCache[e]!==void 0)return this.objCache[e];var i;if(e.match(/^\d+\.\d+\.[0-9.]+$/))i=e;else if(this.atype2oidList[e]!==void 0)i=this.atype2oidList[e];else if(this.name2oidList[e]!==void 0)i=this.name2oidList[e];else throw new Error("AttributeType name undefined: "+e);var n=new t({oid:i});return this.objCache[e]=n,n},this.registerOIDs=function(e){if(this.checkOIDs(e))for(var i in e)this.name2oidList[i]=e[i]},this.checkOIDs=function(e){try{var i=Object.keys(e);return i.length==0?!1:(i.map(function(n,r,s){var a=this[n];if(!a.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},e),!0)}catch{return!1}}};d.asn1.x509.OID.oid2name=function(t){var e=d.asn1.x509.OID.name2oidList;for(var i in e)if(e[i]==t)return i;return""};d.asn1.x509.OID.oid2atype=function(t){var e=d.asn1.x509.OID.atype2oidList;for(var i in e)if(e[i]==t)return i;return t};d.asn1.x509.OID.name2oid=function(t){if(t.match(/^[0-9.]+$/))return t;var e=d.asn1.x509.OID.name2oidList;return e[t]===void 0?"":e[t]};d.asn1.x509.X509Util={};d.asn1.x509.X509Util.newCertPEM=function(t){var e=d.asn1.x509,i=e.TBSCertificate,n=e.Certificate,r=new n(t);return r.getPEM()};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.cms>"u"||!d.asn1.cms)&&(d.asn1.cms={});d.asn1.cms.Attribute=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DERSet,a=n.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(o){this.params=o},this.getValueArray=function(){throw new e("not yet implemented abstract")},this.tohex=function(){var o=new a({oid:this.typeOid}),l=new s({array:this.getValueArray()}),u=new r({array:[o,l]});return u.tohex()},this.getEncodedHex=function(){return this.tohex()}};B(d.asn1.cms.Attribute,d.asn1.ASN1Object);d.asn1.cms.ContentType=function(t){var e=d,i=e.asn1;i.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var n=new i.DERObjectIdentifier(this.params.type);return[n]},t!=null&&this.setByParam(t)};B(d.asn1.cms.ContentType,d.asn1.cms.Attribute);d.asn1.cms.MessageDigest=function(t){var e=d,i=e.asn1,n=i.DEROctetString,r=i.cms;r.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var s=new n(this.params);return[s]},t!=null&&this.setByParam(t)};B(d.asn1.cms.MessageDigest,d.asn1.cms.Attribute);d.asn1.cms.SigningTime=function(t){var e=d,i=e.asn1;i.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var n=new i.x509.Time(this.params);return[n]},t!=null&&this.setByParam(t)};B(d.asn1.cms.SigningTime,d.asn1.cms.Attribute);d.asn1.cms.SigningCertificate=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.cms,a=s.ESSCertID,o=i.crypto;s.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new e("parameter 'array' not specified");for(var l=this.params.array,u=[],g=0;g<l.length;g++){var p=l[g];t.hasis==!1&&typeof p=="string"&&(p.indexOf("-----BEGIN")!=-1||j.isASN1HEX(p))&&(p={cert:p}),p.hasis!=!1&&t.hasis==!1&&(p.hasis=!1),u.push(new a(p))}var c=new r({array:u}),h=new r({array:[c]});return[h]},t!=null&&this.setByParam(t)};B(d.asn1.cms.SigningCertificate,d.asn1.cms.Attribute);d.asn1.cms.ESSCertID=function(t){d.asn1.cms.ESSCertID.superclass.constructor.call(this);var e=Error,i=d,n=i.asn1,r=n.DEROctetString,s=n.DERSequence,a=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(o,l){if(o.hash!=null)return o.hash;if(typeof o=="string"&&o.indexOf("-----BEGIN")==-1&&!j.isASN1HEX(o))return o;var u;if(typeof o=="string")u=o;else if(o.cert!=null)u=o.cert;else throw new e("hash nor cert unspecified");var g;u.indexOf("-----BEGIN")!=-1?g=Fe(u):g=u,typeof o=="string"&&(o.indexOf("-----BEGIN")!=-1?g=Fe(o):j.isASN1HEX(o)&&(g=o));var p;if(o.alg!=null)p=o.alg;else if(l!=null)p=l;else throw new e("hash alg unspecified");return i.crypto.Util.hashHex(g,p)},this.tohex=function(){var o=this.params,l=this.getCertHash(o,"sha1"),u=[];u.push(new r({hex:l})),(typeof o=="string"&&o.indexOf("-----BEGIN")!=-1||o.cert!=null&&o.hasis!=!1||o.issuer!=null&&o.serial!=null)&&u.push(new a(o));var g=new s({array:u});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.ESSCertID,d.asn1.ASN1Object);d.asn1.cms.SigningCertificateV2=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.x509,a=n.cms,o=a.ESSCertIDv2,l=i.crypto;a.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new e("parameter 'array' not specified");for(var u=this.params.array,g=[],p=0;p<u.length;p++){var c=u[p];(t.alg!=null||t.hasis==!1)&&typeof c=="string"&&(c.indexOf("-----BEGIN")!=-1||j.isASN1HEX(c))&&(c={cert:c}),c.alg==null&&t.alg!=null&&(c.alg=t.alg),c.hasis!=!1&&t.hasis==!1&&(c.hasis=!1),g.push(new o(c))}var h=new r({array:g}),m=new r({array:[h]});return[m]},t!=null&&this.setByParam(t)};B(d.asn1.cms.SigningCertificateV2,d.asn1.cms.Attribute);d.asn1.cms.ESSCertIDv2=function(t){d.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var e=Error,i=d,n=i.asn1,r=n.DEROctetString,s=n.DERSequence,a=n.cms.IssuerSerial,o=n.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var l=this.params,u=this.getCertHash(l,"sha256"),g=[];l.alg!=null&&l.alg!="sha256"&&g.push(new o({name:l.alg})),g.push(new r({hex:u})),(typeof l=="string"&&l.indexOf("-----BEGIN")!=-1||l.cert!=null&&l.hasis!=!1||l.issuer!=null&&l.serial!=null)&&g.push(new a(l));var p=new s({array:g});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.ESSCertIDv2,d.asn1.cms.ESSCertID);d.asn1.cms.IssuerSerial=function(t){var e=Error,i=d,n=i.asn1,r=n.DERInteger,s=n.DERSequence,a=n.cms,o=n.x509,l=o.GeneralNames,u=J;a.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(g){this.params=g},this.tohex=function(){var g=this.params,p,c;if(typeof g=="string"&&g.indexOf("-----BEGIN")!=-1||g.cert!=null){var h;g.cert!=null?h=g.cert:h=g;var m=new u;m.readCertPEM(h),p=m.getIssuer(),c={hex:m.getSerialNumberHex()}}else if(g.issuer!=null&&g.serial)p=g.issuer,c=g.serial;else throw new e("cert or issuer and serial parameter not specified");var f=new l([{dn:p}]),b=new r(c),v=new s({array:[f,b]});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.IssuerSerial,d.asn1.ASN1Object);d.asn1.cms.SignerIdentifier=function(t){var e=d,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.cms,a=s.IssuerAndSerialNumber,o=s.SubjectKeyIdentifier,l=i.x509,u=l.X500Name,g=J,p=Error;s.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params;if(c.type=="isssn"){var h=new a(c);return h.tohex()}else if(c.type=="skid"){var m=new o(c);return m.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.SignerIdentifier,d.asn1.ASN1Object);d.asn1.cms.IssuerAndSerialNumber=function(t){var e=d,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.cms,a=i.x509,o=a.X500Name,l=J,u=Error;s.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var g=this.params,p,c;if(typeof g=="string"&&g.indexOf("-----BEGIN")!=-1||g.cert!=null){var h;g.cert!=null?h=g.cert:h=g;var m=new l;m.readCertPEM(h),p=m.getIssuer(),c={hex:m.getSerialNumberHex()}}else if(g.issuer!=null&&g.serial)p=g.issuer,c=g.serial;else throw new u("cert or issuer and serial parameter not specified");var f=new o(p),b=new n(c),v=new r({array:[f,b]});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(g){this.params=g},t!=null&&this.setByParam(t)};B(d.asn1.cms.IssuerAndSerialNumber,d.asn1.ASN1Object);d.asn1.cms.SubjectKeyIdentifier=function(t){var e=d,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.ASN1Util.newObject,a=i.cms,o=a.IssuerAndSerialName,l=a.SubjectKeyIdentifier,u=i.x509,g=u.X500Name,p=J,c=Error;a.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var h=this.params;if(h.cert==null&&h.skid==null)throw new c("property cert nor skid undefined");var m;if(h.cert!=null){var f=new p(h.cert),b=f.getExtSubjectKeyIdentifier();m=b.kid.hex}else h.skid!=null&&(m=h.skid);var v=s({tag:{tage:"a0",obj:{octstr:{hex:m}}}});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.SubjectKeyIdentifier,d.asn1.ASN1Object);d.asn1.cms.AttributeList=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSet,s=n.cms;s.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(this.hTLV!=null)return this.hTLV;var o=!0;a.sortflag!=null&&(o=a.sortflag);for(var l=a.array,u=[],g=0;g<l.length;g++){var p=l[g],c=p.attr;if(c=="contentType")u.push(new s.ContentType(p));else if(c=="messageDigest")u.push(new s.MessageDigest(p));else if(c=="signingTime")u.push(new s.SigningTime(p));else if(c=="signingCertificate")u.push(new s.SigningCertificate(p));else if(c=="signingCertificateV2")u.push(new s.SigningCertificateV2(p));else if(c=="signaturePolicyIdentifier")u.push(new d.asn1.cades.SignaturePolicyIdentifier(p));else if(c=="signatureTimeStamp"||c=="timeStampToken")u.push(new d.asn1.cades.SignatureTimeStamp(p));else throw new e("unknown attr: "+c)}var h=new r({array:u,sortflag:o});return this.hTLV=h.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.AttributeList,d.asn1.ASN1Object);d.asn1.cms.SignerInfo=function(t){var e=Error,i=d,n=i.asn1,r=n.DERInteger,s=n.DEROctetString,a=n.DERSequence,o=n.DERTaggedObject,l=n.cms,u=l.SignerIdentifier,g=l.AttributeList,p=l.ContentType,c=l.EncapsulatedContentInfo,h=l.MessageDigest,m=l.SignedData,f=n.x509,b=f.AlgorithmIdentifier,v=i.crypto,w=te;l.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var y=this.params,S=y.sigalg,E=new g(y.sattrs).tohex(),C=w.getKey(y.signkey),x=new v.Signature({alg:S});x.init(C),x.updateHex(E);var _=x.sign();y.sighex=_},this.tohex=function(){var y=this.params,S=[];if(S.push(new r({int:y.version})),S.push(new u(y.id)),S.push(new b({name:y.hashalg})),y.sattrs!=null){var E=new g(y.sattrs);try{S.push(new o({tag:"a0",explicit:!1,obj:E}))}catch(x){throw new e("si sattr error: "+x)}}if(y.sigalgfield!=null?S.push(new b({name:y.sigalgfield})):S.push(new b({name:y.sigalg})),y.sighex==null&&y.signkey!=null&&this.sign(),S.push(new s({hex:y.sighex})),y.uattrs!=null){var E=new g(y.uattrs);try{S.push(new o({tag:"a1",explicit:!1,obj:E}))}catch(_){throw new e("si uattr error: "+_)}}var C=new a({array:S});return C.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.SignerInfo,d.asn1.ASN1Object);d.asn1.cms.EncapsulatedContentInfo=function(t){var e=d,i=e.asn1,n=i.DERTaggedObject,r=i.DERSequence,s=i.DERObjectIdentifier,a=i.DEROctetString,o=i.cms;o.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params,u=[];if(u.push(new s(l.type)),l.content!=null&&(l.content.hex!=null||l.content.str!=null)&&l.isDetached!=!0){var g=new a(l.content),p=new n({tag:"a0",explicit:!0,obj:g});u.push(p)}var c=new r({array:u});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},t!=null&&this.setByParam(t)};B(d.asn1.cms.EncapsulatedContentInfo,d.asn1.ASN1Object);d.asn1.cms.ContentInfo=function(t){var e=d,i=e.asn1,n=i.DERTaggedObject,r=i.DERSequence,s=i.DERObjectIdentifier,a=i.x509,o=a.OID.name2obj;d.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params,u=[];u.push(new s(l.type));var g=new n({tag:"a0",explicit:!0,obj:l.obj});u.push(g);var p=new r({array:u});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},t!=null&&this.setByParam(t)};B(d.asn1.cms.ContentInfo,d.asn1.ASN1Object);d.asn1.cms.SignedData=function(t){var e=Error,i=d,n=i.asn1,r=n.ASN1Object,s=n.DERInteger,a=n.DERSet,o=n.DERSequence,l=n.DERTaggedObject,u=n.cms,g=u.EncapsulatedContentInfo,p=u.SignerInfo,c=u.ContentInfo,h=u.CertificateSet,m=u.RevocationInfoChoices,f=n.x509,b=f.AlgorithmIdentifier;d.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var v=this.params;this._setDigestAlgs(v),this._setContentTypeByEContent(v),this._setMessageDigestByEContent(v),this._setSignerInfoVersion(v),this._setSignedDataVersion(v)},this._setDigestAlgs=function(v){for(var w={},y=v.sinfos,S=0;S<y.length;S++){var E=y[S];w[E.hashalg]=1}v.hashalgs=Object.keys(w).sort()},this._setContentTypeByEContent=function(v){for(var w=v.econtent.type,y=v.sinfos,S=0;S<y.length;S++){var E=y[S],C=this._getAttrParamByName(E,"contentType");C.type=w}},this._setMessageDigestByEContent=function(v){var w=v.econtent,y=v.econtent.type,S=w.content.hex;S==null&&w.type=="data"&&w.content.str!=null&&(S=et(w.content.str));for(var E=v.sinfos,C=0;C<E.length;C++){var x=E[C],_=x.hashalg,A=this._getAttrParamByName(x,"messageDigest"),F=d.crypto.Util.hashHex(S,_);A.hex=F}},this._getAttrParamByName=function(v,w){for(var y=v.sattrs.array,S=0;S<y.length;S++)if(y[S].attr==w)return y[S]},this._setSignerInfoVersion=function(v){for(var w=v.sinfos,y=0;y<w.length;y++){var S=w[y],E=1;S.id.type=="skid"&&(E=3),S.version=E}},this._setSignedDataVersion=function(v){var w=this._getSignedDataVersion(v);v.version=w},this._getSignedDataVersion=function(v){if(v.revinfos!=null)for(var w=v.revinfos,y=0;y<w.length;y++){var S=w[y];if(S.ocsp!=null)return 5}for(var E=v.sinfos,y=0;y<E.length;y++){var C=v.sinfos[y];if(C.version==3)return 3}return v.econtent.type!="data"?3:1},this.tohex=function(){var v=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),v.fixed!=!0&&this.checkAndFixParam();var w=[];w.push(new s({int:v.version}));for(var y=[],S=0;S<v.hashalgs.length;S++){var E=v.hashalgs[S];y.push(new b({name:E}))}w.push(new a({array:y})),w.push(new g(v.econtent)),v.certs!=null&&w.push(new h(v.certs)),v.revinfos!=null&&w.push(new m(v.revinfos));for(var C=[],S=0;S<v.sinfos.length;S++){var x=v.sinfos[S];C.push(new p(x))}w.push(new a({array:C}));var _=new o({array:w});return _.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var v=new c({type:"signed-data",obj:this});return v},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.SignedData,d.asn1.ASN1Object);d.asn1.cms.CertificateSet=function(t){d.asn1.cms.CertificateSet.superclass.constructor.call(this);var e=Error,i=d.asn1,n=i.DERTaggedObject,r=i.DERSet,s=i.ASN1Object;this.params=null,this.tohex=function(){var a=this.params,o=[],l;if(a instanceof Array)l=a;else if(a.array!=null)l=a.array;else throw new e("cert array not specified");for(var u=0;u<l.length;u++){var g=l[u],p=Fe(g),c=new s;c.hTLV=p,o.push(c)}var h={array:o};a.sortflag==!1&&(h.sortflag=!1);var m=new r(h),f=new n({tag:"a0",explicit:!1,obj:m});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.CertificateSet,d.asn1.ASN1Object);d.asn1.cms.RevocationInfoChoices=function(t){d.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new Error("params is not array");for(var i=[],n=0;n<e.length;n++)i.push(new d.asn1.cms.RevocationInfoChoice(e[n]));var r=d.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:i}}});return r.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.RevocationInfoChoices,d.asn1.ASN1Object);d.asn1.cms.RevocationInfoChoice=function(t){d.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(e.crl!=null&&typeof e.crl=="string"){var i=e.crl;return e.crl.indexOf("-----BEGIN")!=-1&&(i=Fe(e.crl)),i}else if(e.ocsp!=null){var n=d.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new d.asn1.cms.OtherRevocationFormat(e)}});return n.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.RevocationInfoChoice,d.asn1.ASN1Object);d.asn1.cms.OtherRevocationFormat=function(t){d.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var e=Error,i=d,n=i.asn1,r=n.ASN1Util.newObject,s=i.lang.String.isHex;this.params=null,this.tohex=function(){var a=this.params;if(a.ocsp==null)throw new e("property ocsp not specified");if(!s(a.ocsp)||!j.isASN1HEX(a.ocsp))throw new e("ocsp value not ASN.1 hex string");var o=r({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:a.ocsp}}]});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cms.OtherRevocationFormat,d.asn1.ASN1Object);d.asn1.cms.CMSUtil=new function(){};d.asn1.cms.CMSUtil.newSignedData=function(t){return new d.asn1.cms.SignedData(t)};d.asn1.cms.CMSUtil.verifySignedData=function(t){var e=d,i=e.asn1,n=i.cms,r=n.SignerInfo,s=n.SignedData,a=n.SigningTime,o=n.SigningCertificate,l=n.SigningCertificateV2,u=i.cades,g=u.SignaturePolicyIdentifier,p=e.lang.String.isHex,c=j,h=c.getVbyList,m=c.getTLVbyList,f=c.getIdxbyList,b=c.getChildIdx,v=c.getTLV,w=c.oidname,y=e.crypto.Util.hashHex;t.cms===void 0&&p(t.cms);var S=t.cms,E=function(N,D){for(var k,W=3;W<6;W++)if(k=f(N,0,[1,0,W]),k!==void 0){var U=N.substr(k,2);U==="a0"&&(D.certsIdx=k),U==="a1"&&(D.revinfosIdx=k),U==="31"&&(D.signerinfosIdx=k)}},C=function(N,D){var k=D.signerinfosIdx;if(k!==void 0){var W=b(N,k);D.signerInfoIdxList=W;for(var U=0;U<W.length;U++){var $=W[U],Y={idx:$};x(N,Y),D.signerInfos.push(Y)}}},x=function(N,D){var k=D.idx;D.signerid_issuer1=m(N,k,[1,0],"30"),D.signerid_serial1=h(N,k,[1,1],"02"),D.hashalg=w(h(N,k,[2,0],"06"));var W=f(N,k,[3],"a0");D.idxSignedAttrs=W,_(N,D,W);var U=b(N,k),$=U.length;if($<6)throw"malformed SignerInfo";D.sigalg=w(h(N,k,[$-2,0],"06")),D.sigval=h(N,k,[$-1],"04")},_=function(N,D,k){var W=b(N,k);D.signedAttrIdxList=W;for(var U=0;U<W.length;U++){var $=W[U],Y=h(N,$,[0],"06"),Q;Y==="2a864886f70d010905"?(Q=de(h(N,$,[1,0])),D.saSigningTime=Q):Y==="2a864886f70d010904"&&(Q=h(N,$,[1,0],"04"),D.saMessageDigest=Q)}},A=function(N,D){if(h(N,0,[0],"06")!=="2a864886f70d010702")return D;D.cmsType="signedData",D.econtent=h(N,0,[1,0,2,1,0]),E(N,D),D.signerInfos=[],C(N,D)},F=function(N,D){for(var k=D.parse.signerInfos,W=k.length,U=!0,$=0;$<W;$++){var Y=k[$];R(N,D,Y,$),Y.isValid||(U=!1)}D.isValid=U},T=function(N,D,k,W){var U=D.parse.certsIdx,$;if(D.certs===void 0){$=[],D.certkeys=[];for(var Y=b(N,U),Q=0;Q<Y.length;Q++){var _e=v(N,Y[Q]),he=new J;he.readCertHex(_e),$[Q]=he,D.certkeys[Q]=he.getPublicKey()}D.certs=$}else $=D.certs;D.cccc=$.length,D.cccci=Y.length;for(var Q=0;Q<$.length;Q++){var Ie=he.getIssuerHex(),me=he.getSerialNumberHex();k.signerid_issuer1===Ie&&k.signerid_serial1===me&&(k.certkey_idx=Q)}},R=function(N,D,k,W){k.verifyDetail={};var U=k.verifyDetail,$=D.parse.econtent,Y=k.hashalg,Q=k.saMessageDigest;U.validMessageDigest=!1,y($,Y)===Q&&(U.validMessageDigest=!0),T(N,D,k,W),U.validSignatureValue=!1;var _e=k.sigalg,he="31"+v(N,k.idxSignedAttrs).substr(2);k.signedattrshex=he;var Ie=D.certs[k.certkey_idx].getPublicKey(),me=new d.crypto.Signature({alg:_e});me.init(Ie),me.updateHex(he);var Ee=me.verify(k.sigval);U.validSignatureValue_isValid=Ee,Ee===!0&&(U.validSignatureValue=!0),k.isValid=!1,U.validMessageDigest&&U.validSignatureValue&&(k.isValid=!0)},M=function(){},P={isValid:!1,parse:{}};return A(S,P.parse),F(S,P),P};d.asn1.cms.CMSParser=function(){var t=Error,e=J,i=new e,n=j,r=n.getV,s=n.getTLV,a=n.getIdxbyList,o=n.getTLVbyList,l=n.getTLVbyListEx,u=n.getVbyList,g=n.getVbyListEx,p=n.getChildIdx;this.getCMSSignedData=function(c){var h=o(c,0,[1,0]),m=this.getSignedData(h);return m},this.getSignedData=function(c){var h=p(c,0),m={},f=r(c,h[0]),b=parseInt(f,16);m.version=b;var v=s(c,h[1]);m.hashalgs=this.getHashAlgArray(v);var w=s(c,h[2]);m.econtent=this.getEContent(w);var y=l(c,0,["[0]"]);y!=null&&(m.certs=this.getCertificateSet(y));var S=l(c,0,["[1]"]);S!=null;var E=l(c,0,[3]);return m.sinfos=this.getSignerInfos(E),m},this.getHashAlgArray=function(c){for(var h=p(c,0),m=new e,f=[],b=0;b<h.length;b++){var v=s(c,h[b]),w=m.getAlgorithmIdentifierName(v);f.push(w)}return f},this.getEContent=function(c){var h={},m=u(c,0,[0]),f=u(c,0,[1,0]);return h.type=d.asn1.x509.OID.oid2name(j.hextooidstr(m)),h.content={hex:f},h},this.getSignerInfos=function(c){for(var h=[],m=p(c,0),f=0;f<m.length;f++){var b=s(c,m[f]),v=this.getSignerInfo(b);h.push(v)}return h},this.getSignerInfo=function(c){var h={},m=p(c,0),f=n.getInt(c,m[0],-1);f!=-1&&(h.version=f);var b=s(c,m[1]),v=this.getIssuerAndSerialNumber(b);h.id=v;var w=s(c,m[2]),y=i.getAlgorithmIdentifierName(w);h.hashalg=y;var S=l(c,0,["[0]"]);if(S!=null){var E=this.getAttributeList(S);h.sattrs=E}var C=l(c,0,[3]),x=i.getAlgorithmIdentifierName(C);h.sigalg=x;var _=g(c,0,[4]);h.sighex=_;var A=l(c,0,["[1]"]);if(A!=null){var F=this.getAttributeList(A);h.uattrs=F}return h},this.getSignerIdentifier=function(c){if(c.substr(0,2)=="30")return this.getIssuerAndSerialNumber(c);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(c){var h={type:"isssn"},m=p(c,0),f=s(c,m[0]);h.issuer=i.getX500Name(f);var b=r(c,m[1]);return h.serial={hex:b},h},this.getAttributeList=function(c){for(var h=[],m=p(c,0),f=0;f<m.length;f++){var b=s(c,m[f]),v=this.getAttribute(b);h.push(v)}return{array:h}},this.getAttribute=function(c){var h={},m=p(c,0),f=n.getOID(c,m[0]),b=d.asn1.x509.OID.oid2name(f);h.attr=b;var v=s(c,m[1]),w=p(v,0);if(w.length==1)h.valhex=s(v,w[0]);else{for(var y=[],S=0;S<w.length;S++)y.push(s(v,w[S]));h.valhex=y}return b=="contentType"?this.setContentType(h):b=="messageDigest"?this.setMessageDigest(h):b=="signingTime"?this.setSigningTime(h):b=="signingCertificate"?this.setSigningCertificate(h):b=="signingCertificateV2"?this.setSigningCertificateV2(h):b=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(h),h},this.setContentType=function(c){var h=n.getOIDName(c.valhex,0,null);h!=null&&(c.type=h,delete c.valhex)},this.setSigningTime=function(c){var h=r(c.valhex,0),m=de(h);c.str=m,delete c.valhex},this.setMessageDigest=function(c){var h=r(c.valhex,0);c.hex=h,delete c.valhex},this.setSigningCertificate=function(c){var h=p(c.valhex,0);if(h.length>0){for(var m=s(c.valhex,h[0]),f=p(m,0),b=[],v=0;v<f.length;v++){var w=s(m,f[v]),y=this.getESSCertID(w);b.push(y)}c.array=b}if(h.length>1){var S=s(c.valhex,h[1]);c.polhex=S}delete c.valhex},this.setSignaturePolicyIdentifier=function(c){var h=p(c.valhex,0);if(h.length>0){var m=n.getOID(c.valhex,h[0]);c.oid=m}if(h.length>1){var f=new e,b=p(c.valhex,h[1]),v=s(c.valhex,b[0]),w=f.getAlgorithmIdentifierName(v);c.alg=w;var y=r(c.valhex,b[1]);c.hash=y}delete c.valhex},this.setSigningCertificateV2=function(c){var h=p(c.valhex,0);if(h.length>0){for(var m=s(c.valhex,h[0]),f=p(m,0),b=[],v=0;v<f.length;v++){var w=s(m,f[v]),y=this.getESSCertIDv2(w);b.push(y)}c.array=b}if(h.length>1){var S=s(c.valhex,h[1]);c.polhex=S}delete c.valhex},this.getESSCertID=function(c){var h={},m=p(c,0);if(m.length>0){var f=r(c,m[0]);h.hash=f}if(m.length>1){var b=s(c,m[1]),v=this.getIssuerSerial(b);v.serial!=null&&(h.serial=v.serial),v.issuer!=null&&(h.issuer=v.issuer)}return h},this.getESSCertIDv2=function(c){var h={},m=p(c,0);if(m.length<1||3<m.length)throw new t("wrong number of elements");var f=0;if(c.substr(m[0],2)=="30"){var b=s(c,m[0]);h.alg=i.getAlgorithmIdentifierName(b),f++}else h.alg="sha256";var v=r(c,m[f]);if(h.hash=v,m.length>f+1){var w=s(c,m[f+1]),y=this.getIssuerSerial(w);h.issuer=y.issuer,h.serial=y.serial}return h},this.getIssuerSerial=function(c){var h={},m=p(c,0),f=s(c,m[0]),b=i.getGeneralNames(f),v=b[0].dn;h.issuer=v;var w=r(c,m[1]);return h.serial={hex:w},h},this.getCertificateSet=function(c){for(var h=p(c,0),m=[],f=0;f<h.length;f++){var b=s(c,h[f]);if(b.substr(0,2)=="30"){var v=De(b,"CERTIFICATE");m.push(v)}}return{array:m,sortflag:!1}}};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.tsp>"u"||!d.asn1.tsp)&&(d.asn1.tsp={});d.asn1.tsp.TimeStampToken=function(t){var e=d,i=e.asn1,n=i.tsp;n.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var r=new n.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=r.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.tsp.TimeStampToken,d.asn1.cms.SignedData);d.asn1.tsp.TSTInfo=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DERInteger,a=n.DERBoolean,o=n.DERGeneralizedTime,l=n.DERObjectIdentifier,u=n.DERTaggedObject,g=n.tsp,p=g.MessageImprint,c=g.Accuracy,h=n.x509.X500Name,m=n.x509.GeneralName;if(g.TSTInfo.superclass.constructor.call(this),this.dVersion=new s({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var f=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(f.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(f.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(f.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");f.push(this.dGenTime),this.dAccuracy!=null&&f.push(this.dAccuracy),this.dOrdering!=null&&f.push(this.dOrdering),this.dNonce!=null&&f.push(this.dNonce),this.dTsa!=null&&f.push(this.dTsa);var b=new r({array:f});return this.hTLV=b.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0){if(typeof t.policy=="string"){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new l({oid:t.policy})}t.messageImprint!==void 0&&(this.dMessageImprint=new p(t.messageImprint)),t.serial!==void 0&&(this.dSerial=new s(t.serial)),t.genTime!==void 0&&(this.dGenTime=new o(t.genTime)),t.accuracy!==void 0&&(this.dAccuracy=new c(t.accuracy)),t.ordering!==void 0&&t.ordering==!0&&(this.dOrdering=new a),t.nonce!==void 0&&(this.dNonce=new s(t.nonce)),t.tsa!==void 0&&(this.dTsa=new u({tag:"a0",explicit:!0,obj:new m({dn:t.tsa})}))}};B(d.asn1.tsp.TSTInfo,d.asn1.ASN1Object);d.asn1.tsp.Accuracy=function(t){var e=d,i=e.asn1,n=i.ASN1Util.newObject;i.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var r=this.params,s=[];return r.seconds!=null&&typeof r.seconds=="number"&&s.push({int:r.seconds}),r.millis!=null&&typeof r.millis=="number"&&s.push({tag:{tagi:"80",obj:{int:r.millis}}}),r.micros!=null&&typeof r.micros=="number"&&s.push({tag:{tagi:"81",obj:{int:r.micros}}}),n({seq:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.tsp.Accuracy,d.asn1.ASN1Object);d.asn1.tsp.MessageImprint=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.DEROctetString,s=i.x509,a=s.AlgorithmIdentifier;i.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params,l=new a({name:o.alg}),u=new r({hex:o.hash}),g=new n({array:[l,u]});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.tsp.MessageImprint,d.asn1.ASN1Object);d.asn1.tsp.TimeStampReq=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.DERInteger,s=i.DERBoolean,a=i.ASN1Object,o=i.DERObjectIdentifier,l=i.tsp,u=l.MessageImprint;l.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var g=this.params,p=[];p.push(new r({int:1})),g.messageImprint instanceof d.asn1.ASN1Object?p.push(g.messageImprint):p.push(new u(g.messageImprint)),g.policy!=null&&p.push(new o(g.policy)),g.nonce!=null&&p.push(new r(g.nonce)),g.certreq==!0&&p.push(new s);var c=new n({array:p});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.tsp.TimeStampReq,d.asn1.ASN1Object);d.asn1.tsp.TimeStampResp=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.ASN1Object,s=i.tsp,a=s.PKIStatusInfo;s.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params,l=[];if(o.econtent!=null||o.tst!=null)if(o.statusinfo!=null?l.push(new a(o.statusinfo)):l.push(new a("granted")),o.econtent!=null)l.push(new s.TimeStampToken(o).getContentInfo());else if(o.tst instanceof i.ASN1Object)l.push(o.tst);else throw new Error("improper member tst value");else if(o.statusinfo!=null)l.push(new a(o.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var u=new n({array:l});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.tsp.TimeStampResp,d.asn1.ASN1Object);d.asn1.tsp.PKIStatusInfo=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.tsp,a=s.PKIStatus,o=s.PKIFreeText,l=s.PKIFailureInfo;s.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,g=[];if(typeof u=="string")g.push(new a(u));else{if(u.status==null)throw new e("property 'status' unspecified");g.push(new a(u.status)),u.statusstr!=null&&g.push(new o(u.statusstr)),u.failinfo!=null&&g.push(new l(u.failinfo))}var p=new r({array:g});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.tsp.PKIStatusInfo,d.asn1.ASN1Object);d.asn1.tsp.PKIStatus=function(t){var e=Error,i=d,n=i.asn1,r=n.DERInteger,s=n.tsp;s.PKIStatus.superclass.constructor.call(this);var a={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var o=this.params,l,u;if(typeof o=="string")try{u=a[o]}catch{throw new e("undefined name: "+o)}else if(typeof o=="number")u=o;else throw new e("unsupported params");return new r({int:u}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.tsp.PKIStatus,d.asn1.ASN1Object);d.asn1.tsp.PKIFreeText=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DERUTF8String,a=n.tsp;a.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params;if(!o instanceof Array)throw new e("wrong params: not array");for(var l=[],u=0;u<o.length;u++)l.push(new s({str:o[u]}));var g=new r({array:l});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.tsp.PKIFreeText,d.asn1.ASN1Object);d.asn1.tsp.PKIFailureInfo=function(t){var e=Error,i=d,n=i.asn1,r=n.DERBitString,s=n.tsp,a=s.PKIFailureInfo,o={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};a.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var l=this.params,u=0;if(typeof l=="number"&&0<=l&&l<=25){u|=1<<l;for(var g=u.toString(2),p="",c=g.length-1;c>=0;c--)p+=g[c];return p}else{if(typeof l=="string"&&o[l]!=null)return mi([l],o);if(typeof l=="object"&&l.length!=null)return mi(l,o);throw new e("wrong params")}},this.tohex=function(){var l=this.params,u=this.getBinValue();return new r({bin:u}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.tsp.PKIFailureInfo,d.asn1.ASN1Object);d.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(e,i){throw"not implemented yet"}};d.asn1.tsp.SimpleTSAAdapter=function(t){var e=d,i=e.asn1,n=i.tsp,r=e.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(s,a){var o=r(s,a);this.params.econtent.content.messageImprint={alg:a,hash:o},this.params.econtent.content.serial={int:this.serial++};var l=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:l};var u=new n.TimeStampToken(this.params);return u.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};B(d.asn1.tsp.SimpleTSAAdapter,d.asn1.tsp.AbstractTSAAdapter);d.asn1.tsp.FixedTSAAdapter=function(t){var e=d,i=e.asn1,n=i.tsp,r=e.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(s,a){var o=r(s,a);this.params.econtent.content.messageImprint={alg:a,hash:o};var l=new n.TimeStampToken(this.params);return l.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};B(d.asn1.tsp.FixedTSAAdapter,d.asn1.tsp.AbstractTSAAdapter);d.asn1.tsp.TSPUtil=new function(){};d.asn1.tsp.TSPUtil.newTimeStampToken=function(t){return new d.asn1.tsp.TimeStampToken(t)};d.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=new d.asn1.tsp.TSPParser;return e.getTimeStampReq(t)};d.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=new d.asn1.tsp.TSPParser;return e.getMessageImprint(t)};d.asn1.tsp.TSPParser=function(){var t=Error,e=J,i=new e,n=j,r=n.getV,s=n.getTLV,a=n.getIdxbyList,o=n.getTLVbyListEx,l=n.getChildIdx,u=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],g={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(p){var c=l(p,0);if(c.length==1)return this.getPKIStatusInfo(s(p,c[0]));if(c.length>1){var h=this.getPKIStatusInfo(s(p,c[0])),m=s(p,c[1]),f=this.getToken(m);return f.statusinfo=h,f}},this.getToken=function(p){var c=new d.asn1.cms.CMSParser,h=c.getCMSSignedData(p);return this.setTSTInfo(h),h},this.setTSTInfo=function(p){var c=p.econtent;if(c.type=="tstinfo"){var h=c.content.hex,m=this.getTSTInfo(h);c.content=m}},this.getTSTInfo=function(p){var c={},h=l(p,0),m=r(p,h[1]);c.policy=Ei(m);var f=s(p,h[2]);c.messageImprint=this.getMessageImprint(f);var b=r(p,h[3]);c.serial={hex:b};var v=r(p,h[4]);c.genTime={str:de(v)};var w=0;if(h.length>5&&p.substr(h[5],2)=="30"){var y=s(p,h[5]);c.accuracy=this.getAccuracy(y),w++}if(h.length>5+w&&p.substr(h[5+w],2)=="01"){var S=r(p,h[5+w]);S=="ff"&&(c.ordering=!0),w++}if(h.length>5+w&&p.substr(h[5+w],2)=="02"){var E=r(p,h[5+w]);c.nonce={hex:E},w++}if(h.length>5+w&&p.substr(h[5+w],2)=="a0"){var C=s(p,h[5+w]);C="30"+C.substr(2),pGeneralNames=i.getGeneralNames(C);var x=pGeneralNames[0].dn;c.tsa=x,w++}if(h.length>5+w&&p.substr(h[5+w],2)=="a1"){var _=s(p,h[5+w]);_="30"+_.substr(2);var A=i.getExtParamArray(_);c.ext=A,w++}return c},this.getAccuracy=function(p){for(var c={},h=l(p,0),m=0;m<h.length;m++){var f=p.substr(h[m],2),b=r(p,h[m]),v=parseInt(b,16);f=="02"?c.seconds=v:f=="80"?c.millis=v:f=="81"&&(c.micros=v)}return c},this.getMessageImprint=function(p){if(p.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var c={},h=l(p,0),m=a(p,0,[0,0]),f=r(p,m),b=n.hextooidstr(f),v=d.asn1.x509.OID.oid2name(b);if(v=="")throw new Error("hashAlg name undefined: "+b);var w=v,y=a(p,0,[1]);return c.alg=w,c.hash=r(p,y),c},this.getPKIStatusInfo=function(p){var c={},h=l(p,0),m=0;try{var f=r(p,h[0]),b=parseInt(f,16);c.status=u[b]}catch{}if(h.length>1&&p.substr(h[1],2)=="30"){var v=s(p,h[1]);c.statusstr=this.getPKIFreeText(v),m++}if(h.length>m&&p.substr(h[1+m],2)=="03"){var w=s(p,h[1+m]);c.failinfo=this.getPKIFailureInfo(w)}return c},this.getPKIFreeText=function(p){for(var c=[],h=l(p,0),m=0;m<h.length;m++)c.push(n.getString(p,h[m]));return c},this.getPKIFailureInfo=function(p){var c=n.getInt(p,0);return g[c]!=null?g[c]:c},this.getTimeStampReq=function(p){var c={};c.certreq=!1;var h=l(p,0);if(h.length<2)throw new Error("TimeStampReq must have at least 2 items");var m=s(p,h[1]);c.messageImprint=d.asn1.tsp.TSPUtil.parseMessageImprint(m);for(var f=2;f<h.length;f++){var b=h[f],v=p.substr(b,2);if(v=="06"){var w=r(p,b);c.policy=n.hextooidstr(w)}v=="02"&&(c.nonce=r(p,b)),v=="01"&&(c.certreq=!0)}return c}};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.cades>"u"||!d.asn1.cades)&&(d.asn1.cades={});d.asn1.cades.SignaturePolicyIdentifier=function(t){var e=d,i=e.asn1,n=i.cades,r=n.SignaturePolicyId;n.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new r(this.params)]},this.setByParam=function(s){this.params=s},t!=null&&this.setByParam(t)};B(d.asn1.cades.SignaturePolicyIdentifier,d.asn1.cms.Attribute);d.asn1.cades.SignaturePolicyId=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.DERObjectIdentifier,s=i.x509,a=s.AlgorithmIdentifier,o=i.cades,l=o.SignaturePolicyId,u=o.OtherHashAlgAndValue;l.superclass.constructor.call(this),this.params=null,this.tohex=function(){var g=this.params,p=[];p.push(new r(g.oid)),p.push(new u(g));var c=new n({array:p});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(g){this.params=g},t!=null&&this.setByParam(t)};B(d.asn1.cades.SignaturePolicyId,d.asn1.ASN1Object);d.asn1.cades.OtherHashAlgAndValue=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DEROctetString,a=n.x509,o=a.AlgorithmIdentifier,l=n.cades,u=l.OtherHashAlgAndValue;u.superclass.constructor.call(this),this.params=null,this.tohex=function(){var g=this.params;if(g.alg==null)throw new e("property 'alg' not specified");if(g.hash==null&&g.cert==null)throw new e("property 'hash' nor 'cert' not specified");var p=null;if(g.hash!=null)p=g.hash;else if(g.cert!=null){if(typeof g.cert!="string")throw new e("cert not string");var c=g.cert;g.cert.indexOf("-----BEGIN")!=-1&&(c=Fe(g.cert)),p=d.crypto.Util.hashHex(c,g.alg)}var h=[];h.push(new o({name:g.alg})),h.push(new s({hex:p}));var m=new r({array:h});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cades.OtherHashAlgAndValue,d.asn1.ASN1Object);d.asn1.cades.OtherHashValue=function(t){d.asn1.cades.OtherHashValue.superclass.constructor.call(this);var e=Error,i=d,n=i.lang.String.isHex,r=i.asn1,s=r.DEROctetString,a=i.crypto.Util.hashHex;this.params=null,this.tohex=function(){var o=this.params;if(o.hash==null&&o.cert==null)throw new e("hash or cert not specified");var l=null;if(o.hash!=null)l=o.hash;else if(o.cert!=null){if(typeof o.cert!="string")throw new e("cert not string");var u=o.cert;o.cert.indexOf("-----BEGIN")!=-1&&(u=Fe(o.cert)),l=d.crypto.Util.hashHex(u,"sha1")}return new s({hex:l}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cades.OtherHashValue,d.asn1.ASN1Object);d.asn1.cades.SignatureTimeStamp=function(t){var e=Error,i=d,n=i.lang.String.isHex,r=i.asn1,s=r.ASN1Object,a=r.x509,o=r.cades;o.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var l=this.params;if(l.tst!=null)if(n(l.tst)){var u=new s;return u.hTLV=l.tst,[u]}else{if(l.tst instanceof s)return[l.tst];throw new e("params.tst has wrong value")}else if(l.res!=null){var g=l.res;if(g instanceof s&&(g=g.tohex()),typeof g!="string"||!n(g))throw new e("params.res has wrong value");var p=j.getTLVbyList(g,0,[1]),u=new s;return u.hTLV=l.tst,[u]}},t!=null&&this.setByParam(t)};B(d.asn1.cades.SignatureTimeStamp,d.asn1.cms.Attribute);d.asn1.cades.CompleteCertificateRefs=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.cades,a=s.OtherCertID,o=i.lang.String.isHex;s.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var l=this.params,u=[],g=0;g<l.array.length;g++){var p=l.array[g];if(typeof p=="string")if(p.indexOf("-----BEGIN")!=-1)p={cert:p};else if(o(p))p={hash:p};else throw new e("unsupported value: "+p);l.alg!=null&&p.alg==null&&(p.alg=l.alg),l.hasis!=null&&p.hasis==null&&(p.hasis=l.hasis);var c=new a(p);u.push(c)}var h=new r({array:u});return[h]},t!=null&&this.setByParam(t)};B(d.asn1.cades.CompleteCertificateRefs,d.asn1.cms.Attribute);d.asn1.cades.OtherCertID=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.cms,s=r.IssuerSerial,a=i.cades,o=a.OtherHashValue,l=a.OtherHashAlgAndValue;a.OtherCertID.superclass.constructor.call(this),this.params=t,this.tohex=function(){var u=this.params;typeof u=="string"&&(u.indexOf("-----BEGIN")!=-1?u={cert:u}:_isHex(u)&&(u={hash:u}));var g=[],p=null;if(u.alg!=null?p=new l(u):p=new o(u),g.push(p),u.cert!=null&&u.hasis==!0||u.issuer!=null&&u.serial!=null){var c=new s(u);g.push(c)}var h=new n({array:g});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cades.OtherCertID,d.asn1.ASN1Object);d.asn1.cades.OtherHash=function(t){var e=Error,i=d,n=i.asn1,r=n.cms,s=n.cades,a=s.OtherHashAlgAndValue,o=s.OtherHashValue,l=i.crypto.Util.hashHex,u=i.lang.String.isHex;s.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var g=this.params;typeof g=="string"&&(g.indexOf("-----BEGIN")!=-1?g={cert:g}:u(g)&&(g={hash:g}));var p=null;return g.alg!=null?p=new a(g):p=new o(g),p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.cades.OtherHash,d.asn1.ASN1Object);d.asn1.cades.CAdESUtil=new function(){};d.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=new d.asn1.cms.CMSParser,i=e.getCMSSignedData(t);return i};d.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,i){var n=j,r=n.getChildIdx,s=n.getTLV,a=n.getV,o=d,l=o.asn1,u=l.ASN1Object,g=l.cms,p=g.AttributeList,c=g.SignerInfo,h={},m=r(t,e);if(m.length!=6)throw"not supported items for SignerInfo (!=6)";var f=m.shift();h.version=s(t,f);var b=m.shift();h.si=s(t,b);var v=m.shift();h.digalg=s(t,v);var w=m.shift();h.sattrs=s(t,w);var y=m.shift();h.sigalg=s(t,y);var S=m.shift();h.sig=s(t,S),h.sigval=a(t,S);var E=null;return h.obj=new c,E=new u,E.hTLV=h.version,h.obj.dCMSVersion=E,E=new u,E.hTLV=h.si,h.obj.dSignerIdentifier=E,E=new u,E.hTLV=h.digalg,h.obj.dDigestAlgorithm=E,E=new u,E.hTLV=h.sattrs,h.obj.dSignedAttrs=E,E=new u,E.hTLV=h.sigalg,h.obj.dSigAlg=E,E=new u,E.hTLV=h.sig,h.obj.dSig=E,h.obj.dUnsignedAttrs=new p,h};(typeof d.asn1.csr>"u"||!d.asn1.csr)&&(d.asn1.csr={});d.asn1.csr.CertificationRequest=function(t){var e=d,i=e.asn1,n=i.DERBitString,r=i.DERSequence,s=i.csr,a=i.x509,o=s.CertificationRequestInfo;s.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(l){this.params=l},this.sign=function(){var l=new o(this.params).tohex(),u=new d.crypto.Signature({alg:this.params.sigalg});u.init(this.params.sbjprvkey),u.updateHex(l);var g=u.sign();this.params.sighex=g},this.getPEM=function(){return De(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var l=this.params,u=new d.asn1.csr.CertificationRequestInfo(this.params),g=new d.asn1.x509.AlgorithmIdentifier({name:l.sigalg});if(l.sighex==null&&l.sbjprvkey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var p=new n({hex:"00"+l.sighex}),c=new r({array:[u,g,p]});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.csr.CertificationRequest,d.asn1.ASN1Object);d.asn1.csr.CertificationRequestInfo=function(t){var e=d,i=e.asn1,n=i.DERBitString,r=i.DERSequence,s=i.DERInteger,a=i.DERUTF8String,o=i.DERTaggedObject,l=i.ASN1Util.newObject,u=i.csr,g=i.x509,p=g.X500Name,c=g.Extensions,h=g.SubjectPublicKeyInfo;u.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(m){m!=null&&(this.params=m)},this.tohex=function(){var m=this.params,f=[];if(f.push(new s({int:0})),f.push(new p(m.subject)),f.push(new h(te.getKey(m.sbjpubkey))),m.extreq!=null){var b=new c(m.extreq),v=l({tag:{tag:"a0",explict:!0,obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[b]}]}}});f.push(v)}else f.push(new o({tag:"a0",explicit:!1,obj:new a({str:""})}));var w=new r({array:f});return w.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(d.asn1.csr.CertificationRequestInfo,d.asn1.ASN1Object);d.asn1.csr.CSRUtil=new function(){};d.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=te,i=d.asn1.csr,n=new i.CertificationRequest(t),r=n.getPEM();return r};d.asn1.csr.CSRUtil.getParam=function(t){var e=j,i=e.getV,n=e.getIdxbyList,r=e.getTLVbyList,s=e.getTLVbyListEx,a=e.getVbyListEx,o=function(v){var w=n(v,0,[0,3,0,0],"06");return i(v,w)!="2a864886f70d01090e"?null:r(v,0,[0,3,0,1,0],"30")},l={};if(t.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var u=Fe(t,"CERTIFICATE REQUEST");try{var g=s(u,0,[0,1]);if(g=="3000")l.subject={};else{var m=new J;l.subject=m.getX500Name(g)}}catch{}var p=s(u,0,[0,2]),c=te.getKey(p,null,"pkcs8pub");l.sbjpubkey=te.getPEM(c,"PKCS8PUB");var h=o(u),m=new J;h!=null&&(l.extreq=m.getExtParamArray(h));try{var f=s(u,0,[1],"30"),m=new J;l.sigalg=m.getAlgorithmIdentifierName(f)}catch{}try{var b=a(u,0,[2]);l.sighex=b}catch{}return l};(typeof d>"u"||!d)&&(d={});(typeof d.asn1>"u"||!d.asn1)&&(d.asn1={});(typeof d.asn1.ocsp>"u"||!d.asn1.ocsp)&&(d.asn1.ocsp={});d.asn1.ocsp.DEFAULT_HASH="sha1";d.asn1.ocsp.OCSPResponse=function(t){d.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var e=d.asn1.DEREnumerated,i=d.asn1.ASN1Util.newObject,n=d.asn1.ocsp.ResponseBytes,r=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var s=this.params.resstatus;return typeof s=="number"?s:typeof s!="string"?-1:r.indexOf(s)},this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params,a=this._getStatusCode();if(a==-1)throw new Error("responseStatus not supported: "+s.resstatus);if(a!=0)return i({seq:[{enum:{int:a}}]}).tohex();var o=new n(s);return i({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:o}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.ocsp.OCSPResponse,d.asn1.ASN1Object);d.asn1.ocsp.ResponseBytes=function(t){d.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var e=d.asn1,i=e.DERSequence,n=e.DERObjectIdentifier,r=e.DEROctetString,s=e.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(a.restype!="ocspBasic")throw new Error("not supported responseType: "+a.restype);var o=new s(a),l=[];l.push(new n({name:"ocspBasic"})),l.push(new r({hex:o.tohex()}));var u=new i({array:l});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.ocsp.ResponseBytes,d.asn1.ASN1Object);d.asn1.ocsp.BasicOCSPResponse=function(t){d.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var e=Error,i=d.asn1,n=i.ASN1Object,r=i.DERSequence,s=i.DERGeneralizedTime,a=i.DERTaggedObject,o=i.DERBitString,l=i.x509.Extensions,u=i.x509.AlgorithmIdentifier,g=i.ocsp,p=g.ResponderID;_SingleResponseList=g.SingleResponseList,_ResponseData=g.ResponseData,this.params=null,this.setByParam=function(c){this.params=c},this.sign=function(){var c=this.params,h=c.tbsresp.tohex(),m=new d.crypto.Signature({alg:c.sigalg});m.init(c.reskey),m.updateHex(h),c.sighex=m.sign()},this.tohex=function(){var c=this.params;c.tbsresp==null&&(c.tbsresp=new _ResponseData(c)),c.sighex==null&&c.reskey!=null&&this.sign();var h=[];if(h.push(c.tbsresp),h.push(new u({name:c.sigalg})),h.push(new o({hex:"00"+c.sighex})),c.certs!=null&&c.certs.length!=null){for(var m=[],f=0;f<c.certs.length;f++){var b=c.certs[f],v=null;if(j.isASN1HEX(b))v=b;else if(b.match(/-----BEGIN/))v=Fe(b);else throw new e("certs["+f+"] not hex or PEM");m.push(new n({tlv:v}))}var w=new r({array:m});h.push(new a({tag:"a0",explicit:!0,obj:w}))}var y=new r({array:h});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.ocsp.BasicOCSPResponse,d.asn1.ASN1Object);d.asn1.ocsp.ResponseData=function(t){d.asn1.ocsp.ResponseData.superclass.constructor.call(this);var e=Error,i=d.asn1,n=i.DERSequence,r=i.DERGeneralizedTime,s=i.DERTaggedObject,a=i.x509.Extensions,o=i.ocsp,l=o.ResponderID;_SingleResponseList=o.SingleResponseList,this.params=null,this.tohex=function(){var u=this.params;u.respid!=null&&new e("respid not specified"),u.prodat!=null&&new e("prodat not specified"),u.array!=null&&new e("array not specified");var g=[];if(g.push(new l(u.respid)),g.push(new r(u.prodat)),g.push(new _SingleResponseList(u.array)),u.ext!=null){var p=new a(u.ext);g.push(new s({tag:"a1",explicit:!0,obj:p}))}var c=new n({array:g});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(u){this.params=u},t!==void 0&&this.setByParam(t)};B(d.asn1.ocsp.ResponseData,d.asn1.ASN1Object);d.asn1.ocsp.ResponderID=function(t){d.asn1.ocsp.ResponderID.superclass.constructor.call(this);var e=d,i=e.asn1,n=i.ASN1Util.newObject,r=i.x509.X500Name,s=e.lang.String.isHex,a=Error;this.params=null,this.tohex=function(){var o=this.params;if(o.key!=null){var l=null;if(typeof o.key=="string"){if(s(o.key)&&(l=o.key),o.key.match(/-----BEGIN CERTIFICATE/)){var u=new J(o.key),g=u.getExtSubjectKeyIdentifier();g!=null&&(l=g.kid.hex)}}else if(o.key instanceof J){var g=o.key.getExtSubjectKeyIdentifier();g!=null&&(l=g.kid.hex)}if(l==null)throw new a("wrong key member value");var p=n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:l}}}});return p.tohex()}else if(o.name!=null){var c=null;if(typeof o.name=="string"&&o.name.match(/-----BEGIN CERTIFICATE/)){var u=new J(o.name);c=u.getSubject()}else o.name instanceof J?c=o.name.getSubject():typeof o.name=="object"&&(o.name.array!=null||o.name.str!=null)&&(c=o.name);if(c==null)throw new a("wrong name member value");var p=n({tag:{tag:"a1",explicit:!0,obj:new r(c)}});return p.tohex()}throw new a("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(o){this.params=o},t!==void 0&&this.setByParam(t)};B(d.asn1.ocsp.ResponderID,d.asn1.ASN1Object);d.asn1.ocsp.SingleResponseList=function(t){d.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var e=d.asn1,i=e.DERSequence,n=e.ocsp.SingleResponse;this.params=null,this.tohex=function(){var r=this.params;if(typeof r!="object"||r.length==null)throw new Error("params not specified properly");for(var s=[],a=0;a<r.length;a++)s.push(new n(r[a]));var o=new i({array:s});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(r){this.params=r},t!==void 0&&this.setByParam(t)};B(d.asn1.ocsp.SingleResponseList,d.asn1.ASN1Object);d.asn1.ocsp.SingleResponse=function(t){var e=Error,i=d,n=i.asn1,r=n.DERSequence,s=n.DERGeneralizedTime,a=n.DERTaggedObject,o=n.ocsp,l=o.CertID,u=o.CertStatus,g=n.x509,p=g.Extensions;o.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,h=[];if(c.certid==null)throw new e("certid unspecified");if(c.status==null)throw new e("status unspecified");if(c.thisupdate==null)throw new e("thisupdate unspecified");if(h.push(new l(c.certid)),h.push(new u(c.status)),h.push(new s(c.thisupdate)),c.nextupdate!=null){var m=new s(c.nextupdate);h.push(new a({tag:"a0",explicit:!0,obj:m}))}if(c.ext!=null){var f=new p(c.ext);h.push(new a({tag:"a1",explicit:!0,obj:f}))}var b=new r({array:h});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(c){this.params=c},t!==void 0&&this.setByParam(t)};B(d.asn1.ocsp.SingleResponse,d.asn1.ASN1Object);d.asn1.ocsp.CertID=function(t){var e=d,i=e.asn1,n=i.DEROctetString,r=i.DERInteger,s=i.DERSequence,a=i.x509,o=a.AlgorithmIdentifier,l=i.ocsp,u=l.DEFAULT_HASH,g=e.crypto,p=g.Util.hashHex,c=J,h=j,m=h.getVbyList;l.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(f,b,v,w){w==null&&(w=this.DEFAULT_HASH),this.params={alg:w,issname:f,isskey:b,sbjsn:v}},this.setByCert=function(f,b,v){v==null&&(v=this.DEFAULT_HASH),this.params={alg:v,issuerCert:f,subjectCert:b}},this.getParamByCerts=function(f,b,v){v==null&&(v=this.DEFAULT_HASH);var w=new c(f),y=new c(b),S=p(w.getSubjectHex(),v),E=w.getPublicKeyHex(),C=p(m(E,0,[1],"03",!0),v),x=y.getSerialNumberHex(),_={alg:v,issname:S,isskey:C,sbjsn:x};return _},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var f=this.params,b,v,w,y;if(f.alg==null?y=this.DEFAULT_HASH:y=f.alg,f.issuerCert!=null&&f.subjectCert!=null){var S=this.getParamByCerts(f.issuerCert,f.subjectCert,y);b=S.issname,v=S.isskey,w=S.sbjsn}else if(f.issname!=null&&f.isskey!=null&&f.sbjsn!=null)b=f.issname,v=f.isskey,w=f.sbjsn;else throw new Error("required param members not defined");var E=new o({name:y}),C=new n({hex:b}),x=new n({hex:v}),_=new r({hex:w}),A=new s({array:[E,C,x,_]});return this.hTLV=A.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(d.asn1.ocsp.CertID,d.asn1.ASN1Object);d.asn1.ocsp.CertStatus=function(t){d.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(e.status=="good")return"8000";if(e.status=="unknown")return"8200";if(e.status=="revoked"){var i=[{gentime:{str:e.time}}];e.reason!=null&&i.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:e.reason}}}});var n={tag:"a1",explicit:!1,obj:{seq:i}};return d.asn1.ASN1Util.newObject({tag:n}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},t!==void 0&&this.setByParam(t)};B(d.asn1.ocsp.CertStatus,d.asn1.ASN1Object);d.asn1.ocsp.Request=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var a=[];if(this.dReqCert===null)throw"reqCert not set";a.push(this.dReqCert);var o=new n({array:a});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof t<"u"){var s=new r.CertID(t);this.dReqCert=s}};B(d.asn1.ocsp.Request,d.asn1.ASN1Object);d.asn1.ocsp.TBSRequest=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(s){for(var a=[],o=0;o<s.length;o++){var l=new r.Request(s[0]);a.push(l)}this.dRequestList=a},this.tohex=function(){var s=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var a=new n({array:this.dRequestList});if(s.push(a),this.dRequestExt!==null)throw"requestExtensions not supported";var o=new n({array:s});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0&&this.setRequestListByParam(t.reqList)};B(d.asn1.ocsp.TBSRequest,d.asn1.ASN1Object);d.asn1.ocsp.OCSPRequest=function(t){var e=d,i=e.asn1,n=i.DERSequence,r=i.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var a=[];if(this.dTbsRequest!==null)a.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var o=new n({array:a});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0){var s=new r.TBSRequest(t);this.dTbsRequest=s}};B(d.asn1.ocsp.OCSPRequest,d.asn1.ASN1Object);d.asn1.ocsp.OCSPUtil={};d.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,i){var n=d,r=n.asn1,s=r.ocsp;i===void 0&&(i=s.DEFAULT_HASH);var a={alg:i,issuerCert:t,subjectCert:e},o=new s.OCSPRequest({reqList:[a]});return o.tohex()};d.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=j,i=e.getVbyList,n=e.getVbyListEx,r=e.getIdxbyList,s=e.getIdxbyListEx,a=e.getV,o={};try{var l=n(t,0,[0],"0a");o.responseStatus=parseInt(l,16)}catch{}if(o.responseStatus!==0)return o;try{var u=r(t,0,[1,0,1,0,0,2,0,1]);t.substr(u,2)==="80"?o.certStatus="good":t.substr(u,2)==="a1"?(o.certStatus="revoked",o.revocationTime=de(i(t,u,[0]))):t.substr(u,2)==="82"&&(o.certStatus="unknown")}catch{}try{var g=r(t,0,[1,0,1,0,0,2,0,2]);o.thisUpdate=de(a(t,g))}catch{}try{var p=r(t,0,[1,0,1,0,0,2,0,3]);t.substr(p,2)==="a0"&&(o.nextUpdate=de(i(t,p,[0])))}catch{}return o};d.asn1.ocsp.OCSPParser=function(){var t=Error,e=J,i=new e,n=j,r=n.getV,s=n.getTLV,a=n.getIdxbyList,o=n.getVbyList,l=n.getTLVbyList,u=n.getVbyListEx,g=n.getTLVbyListEx,p=n.getChildIdx;this.getOCSPRequest=function(c){var h=p(c,0);if(h.length!=1&&h.length!=2)throw new t("wrong number elements: "+h.length);var m=this.getTBSRequest(s(c,h[0]));return m},this.getTBSRequest=function(c){var h={},m=g(c,0,[0],"30");h.array=this.getRequestList(m);var f=g(c,0,["[2]",0],"30");return f!=null&&(h.ext=i.getExtParamArray(f)),h},this.getRequestList=function(c){for(var h=[],m=p(c,0),f=0;f<m.length;f++){var c=s(c,m[f]);h.push(this.getRequest(c))}return h},this.getRequest=function(c){var h=p(c,0);if(h.length!=1&&h.length!=2)throw new t("wrong number elements: "+h.length);var m=this.getCertID(s(c,h[0]));if(h.length==2){var f=a(c,0,[1,0]);m.ext=i.getExtParamArray(s(c,f))}return m},this.getCertID=function(c){var h=p(c,0);if(h.length!=4)throw new t("wrong number elements: "+h.length);var m=new e,f={};return f.alg=m.getAlgorithmIdentifierName(s(c,h[0])),f.issname=r(c,h[1]),f.isskey=r(c,h[2]),f.sbjsn=r(c,h[3]),f},this.getOCSPResponse=function(c){var h=p(c,0),m,f=r(c,h[0]),b=parseInt(f);if(h.length==1)return{resstatus:b};var v=l(c,0,[1,0]);return m=this.getResponseBytes(v),m.resstatus=b,m},this.getResponseBytes=function(c){var h=p(c,0),m,f=l(c,0,[1,0]);m=this.getBasicOCSPResponse(f);var b=r(c,h[0]);return m.restype=d.asn1.x509.OID.oid2name(Ei(b)),m},this.getBasicOCSPResponse=function(c){var h=p(c,0),m;m=this.getResponseData(s(c,h[0]));var f=new J;m.alg=f.getAlgorithmIdentifierName(s(c,h[1]));var b=r(c,h[2]);m.sighex=b.substr(2);var v=u(c,0,["[0]"]);if(v!=null){for(var w=p(v,0),y=[],S=0;S<w.length;S++){var E=s(v,w[S]);y.push(E)}m.certs=y}return m},this.getResponseData=function(c){var h=p(c,0),m=h.length,f={},b=0;c.substr(h[0],2)=="a0"&&b++,f.respid=this.getResponderID(s(c,h[b++]));var v=r(c,h[b++]);if(f.prodat=de(v),f.array=this.getSingleResponseList(s(c,h[b++])),c.substr(h[m-1],2)=="a1"){var w=l(c,h[m-1],[0]),y=new J;f.ext=y.getExtParamArray(w)}return f},this.getResponderID=function(c){var h={};if(c.substr(0,2)=="a2"){var m=o(c,0,[0]);h.key=m}if(c.substr(0,2)=="a1"){var f=l(c,0,[0]),b=new J;h.name=b.getX500Name(f)}return h},this.getSingleResponseList=function(c){for(var h=p(c,0),m=[],f=0;f<h.length;f++){var b=this.getSingleResponse(s(c,h[f]));m.push(b)}return m},this.getSingleResponse=function(c){var h=p(c,0),m={},f=this.getCertID(s(c,h[0]));m.certid=f;var b=this.getCertStatus(s(c,h[1]));if(m.status=b,c.substr(h[2],2)=="18"){var v=r(c,h[2]);m.thisupdate=de(v)}for(var w=3;w<h.length;w++){if(c.substr(h[w],2)=="a0"){var y=o(c,h[w],[0],"18");m.nextupdate=de(y)}if(c.substr(h[w],2)=="a1"){var S=new J,E=l(c,0,[w,0]);m.ext=S.getExtParamArray(E)}}return m},this.getCertStatus=function(c){var h={};if(c=="8000")return{status:"good"};if(c=="8200")return{status:"unknown"};if(c.substr(0,2)=="a1"){h.status="revoked";var m=o(c,0,[0]),f=de(m);h.time=f}return h}};var d;(typeof d>"u"||!d)&&(d={});(typeof d.lang>"u"||!d.lang)&&(d.lang={});d.lang.String=function(){};function cs(t){for(var e=new Array,i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}function hs(t){for(var e="",i=0;i<t.length;i++)e=e+String.fromCharCode(t[i]);return e}function yi(t){for(var e="",i=0;i<t.length;i++){var n=t[i].toString(16);n.length==1&&(n="0"+n),e=e+n}return e}function Ke(t){return yi(cs(t))}function Rd(t){return pt(Ke(t))}function Od(t){return zt(pt(Ke(t)))}function Dd(t){return hs(ss(Xt(t)))}function zt(t){return t=t.replace(/\=/g,""),t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t}function Xt(t){return t.length%4==2?t=t+"==":t.length%4==3&&(t=t+"="),t=t.replace(/-/g,"+"),t=t.replace(/_/g,"/"),t}function Te(t){return t.length%2==1&&(t="0"+t),zt(pt(t))}function ye(t){return Ht(Xt(t))}var $t,ot;typeof Buffer=="function"?($t=function(t){return zt(Buffer.from(t,"utf8").toString("base64"))},ot=function(t){return Buffer.from(Xt(t),"base64").toString("utf8")}):($t=function(t){return Te(xi(_i(t)))},ot=function(t){return decodeURIComponent(Si(ye(t)))});function kd(t){return pt(xi(_i(t)))}function Nd(t){return decodeURIComponent(Si(Ht(t)))}function wi(t){return xi(_i(t)).toLowerCase()}function de(t){try{return decodeURIComponent(Si(t))}catch{return null}}function Bd(t){return de(Md(t))}function Md(t){for(var e=t.match(/.{1,2}/g),i=[],n=0;n<e.length;n++){var r=parseInt(e[n],16);161<=r&&r<=191?(i.push("c2"),i.push(e[n])):192<=r&&r<=255?(i.push("c3"),i.push((r-64).toString(16))):i.push(e[n])}return i.join("")}function ze(t){for(var e="",i=0;i<t.length-1;i+=2)e+=String.fromCharCode(parseInt(t.substr(i,2),16));return e}function et(t){for(var e="",i=0;i<t.length;i++)e+=("0"+t.charCodeAt(i).toString(16)).slice(-2);return e}function fs(t){return pt(t)}function ps(t){var e=fs(t),i=e.replace(/(.{64})/g,`$1\r
`);return i=i.replace(/\r\n$/,""),i}function gs(t){var e=t.replace(/[^0-9A-Za-z\/+=]*/g,""),i=Ht(e);return i}function De(t,e){var i=ps(t);return"-----BEGIN "+e+`-----\r
`+i+`\r
-----END `+e+`-----\r
`}function Fe(t,e){if(t.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+e;return e!==void 0?(t=t.replace(new RegExp("^[^]*-----BEGIN "+e+"-----"),""),t=t.replace(new RegExp("-----END "+e+"-----[^]*$"),"")):(t=t.replace(/^[^]*-----BEGIN [^-]+-----/,""),t=t.replace(/-----END [^-]+-----[^]*$/,"")),gs(t)}function jd(t){if(t.length%2!=0)throw"input is not even length";if(t.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),i=new DataView(e),n=0;n<t.length/2;n++)i.setUint8(n,parseInt(t.substr(n*2,2),16));return e}function Ld(t){for(var e="",i=new DataView(t),n=0;n<t.byteLength;n++)e+=("00"+i.getUint8(n).toString(16)).slice(-2);return e}function un(t){var e,i,n,r,s,a,o,l,u,g,p,c;if(c=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),c)return u=c[1],e=parseInt(u),u.length===2&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),i=parseInt(c[2])-1,n=parseInt(c[3]),r=parseInt(c[4]),s=parseInt(c[5]),a=parseInt(c[6]),o=0,g=c[7],g!==""&&(p=(g.substr(1)+"00").substr(0,3),o=parseInt(p)),Date.UTC(e,i,n,r,s,a,o);throw new Error("unsupported zulu format: "+t)}function ms(t){return Math.round(un(t)/1e3)}function zd(t){return new Date(un(t))}function Hd(t,e,i){var n,r=t.getUTCFullYear();if(e){if(r<1950||2049<r)throw"not proper year for UTCTime: "+r;n=(""+r).slice(-2)}else n=("000"+r).slice(-4);if(n+=("0"+(t.getUTCMonth()+1)).slice(-2),n+=("0"+t.getUTCDate()).slice(-2),n+=("0"+t.getUTCHours()).slice(-2),n+=("0"+t.getUTCMinutes()).slice(-2),n+=("0"+t.getUTCSeconds()).slice(-2),i){var s=t.getUTCMilliseconds();s!==0&&(s=("00"+s).slice(-3),s=s.replace(/0+$/g,""),n+="."+s)}return n+="Z",n}function xi(t){return t.replace(/%/g,"")}function Si(t){return t.replace(/(..)/g,"%$1")}function tn(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;t=t.toLowerCase();var i=t.split(":").length-1;if(i<2)throw e;var n=":".repeat(7-i+2);t=t.replace("::",n);var r=t.split(":");if(r.length!=8)throw e;for(var s=0;s<8;s++)r[s]=("0000"+r[s]).slice(-4);return r.join("")}function nn(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+t);t=t.toLowerCase();var e=t.match(/.{1,4}/g);e=e.map(function(r){return r.replace(/^0+/,"")}),e=e.map(function(r){return r==""?"0":r}),t=":"+e.join(":")+":";var i=t.match(/:(0:){2,}/g);if(i==null)return t.slice(1,-1);var n=i.sort().slice(-1)[0];return t=t.replace(n.substr(0,n.length-1),":"),t.substr(0,2)!="::"&&(t=t.substr(1)),t.substr(-2,2)!="::"&&(t=t.substr(0,t.length-1)),t}function pi(t){var e=new Error("malformed hex value");if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(t.length==8){var i;try{return i=parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16),i}catch{throw e}}else if(t.length==16)try{return pi(t.substr(0,8))+"/"+ns(t.substr(8))}catch{throw e}else{if(t.length==32)return nn(t);if(t.length==64){try{return nn(t.substr(0,32))+"/"+ns(t.substr(32))}catch{throw e}return}else return t}}function ns(t){var e=new Error("malformed mask"),i;try{i=new O(t,16).toString(2)}catch{throw e}if(!i.match(/^1*0*$/))throw e;return i.replace(/0+$/,"").length}function dn(t){var e=new Error("malformed IP address");if(t=t.toLowerCase(t),!t.match(/^[0-9a-f.:/]+$/))throw e;if(t.match(/^[0-9.]+$/)){var i=t.split(".");if(i.length!==4)throw e;var n="";try{for(var r=0;r<4;r++){var s=parseInt(i[r]);n+=("0"+s.toString(16)).slice(-2)}return n}catch{throw e}}else if(t.match(/^[0-9.]+\/[0-9]+$/)){var a=t.split("/");return dn(a[0])+rs(parseInt(a[1]),32)}else{if(t.match(/^[0-9a-f:]+$/)&&t.indexOf(":")!==-1)return tn(t);if(t.match(/^[0-9a-f:]+\/[0-9]+$/)&&t.indexOf(":")!==-1){var a=t.split("/");return tn(a[0])+rs(parseInt(a[1]),128)}else throw e}}function rs(t,e){if(e==32&&t==0)return"00000000";if(e==128&&t==0)return"00000000000000000000000000000000";var i=Array(t+1).join("1")+Array(e-t+1).join("0");return new O(i,2).toString(16)}function cn(t){function e(r){var s=parseInt(r.substr(0,2),16),a=parseInt(r.substr(2),16);if(s==0&a<128)return String.fromCharCode(a);if(s<8){var o=192|(s&7)<<3|(a&192)>>6,l=128|a&63;return de(o.toString(16)+l.toString(16))}var o=224|(s&240)>>4,l=128|(s&15)<<2|(a&192)>>6,u=128|a&63;return de(o.toString(16)+l.toString(16)+u.toString(16))}var i=t.match(/.{4}/g),n=i.map(e);return n.join("")}function _i(t){for(var e=encodeURIComponent(t),i="",n=0;n<e.length;n++)e[n]=="%"?(i=i+e.substr(n,3),n=n+2):i=i+"%"+Ke(e[n]);return i}function Vd(t){return t=t.replace(/\r\n/mg,`
`),t}function qd(t){return t=t.replace(/\r\n/mg,`
`),t=t.replace(/\n/mg,`\r
`),t}d.lang.String.isInteger=function(t){return t.match(/^[0-9]+$/)?!0:!!t.match(/^-[0-9]+$/)};d.lang.String.isHex=function(t){return vs(t)};function vs(t){return!!(t.length%2==0&&(t.match(/^[0-9a-f]+$/)||t.match(/^[0-9A-F]+$/)))}d.lang.String.isBase64=function(t){return t=t.replace(/\s+/g,""),!!(t.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&t.length%4==0)};d.lang.String.isBase64URL=function(t){return t.match(/[+/=]/)?!1:(t=Xt(t),d.lang.String.isBase64(t))};function hn(t){return!!t.match(/^[0-9A-Za-z-_.]+$/)}d.lang.String.isIntegerArray=function(t){return t=t.replace(/\s+/g,""),!!t.match(/^\[[0-9,]+\]$/)};d.lang.String.isPrintable=function(t){return t.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};d.lang.String.isIA5=function(t){return t.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};d.lang.String.isMail=function(t){return t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function rn(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function Ud(t){t=t.replace(/^\s*\[\s*/,""),t=t.replace(/\s*\]\s*$/,""),t=t.replace(/\s*/g,"");try{var e=t.split(/,/).map(function(i,n,r){var s=parseInt(i);if(s<0||255<s)throw"integer not in range 0-255";var a=("00"+s.toString(16)).slice(-2);return a}).join("");return e}catch(i){throw"malformed integer array string: "+i}}var Kd=function(t,e){var i=t.length;t.length>e.length&&(i=e.length);for(var n=0;n<i;n++)if(t.charCodeAt(n)!=e.charCodeAt(n))return n;return t.length!=e.length?i:-1};function bs(t){var e=function(o){var l=o.toString(16);return l.length==1&&(l="0"+l),l},i=function(o){var l="",u=parseInt(o,10),g=u.toString(2),p=7-g.length%7;p==7&&(p=0);for(var c="",h=0;h<p;h++)c+="0";g=c+g;for(var h=0;h<g.length-1;h+=7){var m=g.substr(h,7);h!=g.length-7&&(m="1"+m),l+=e(parseInt(m,2))}return l};try{if(!t.match(/^[0-9.]+$/))return null;var n="",r=t.split("."),s=parseInt(r[0],10)*40+parseInt(r[1],10);n+=e(s),r.splice(0,2);for(var a=0;a<r.length;a++)n+=i(r[a]);return n}catch{return null}}function Ei(t){if(!vs(t))return null;try{var e=[],i=t.substr(0,2),n=parseInt(i,16);e[0]=new String(Math.floor(n/40)),e[1]=new String(n%40);for(var r=t.substr(2),s=[],a=0;a<r.length/2;a++)s.push(parseInt(r.substr(a*2,2),16));for(var o=[],l="",a=0;a<s.length;a++)s[a]&128?l=l+gi((s[a]&127).toString(2),7):(l=l+gi((s[a]&127).toString(2),7),o.push(new String(parseInt(l,2))),l="");var u=e.join(".");return o.length>0&&(u=u+"."+o.join(".")),u}catch{return null}}var gi=function(t,e,i){return i==null&&(i="0"),t.length>=e?t:new Array(e-t.length+1).join(i)+t};function ys(t){if(t.length%2!=0||(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null))return-1;try{var e=t.substr(0,2);if(e=="00")return parseInt(t.substr(2),16);var i=parseInt(e,16);if(i>7)return-1;var n=t.substr(2),r=parseInt(n,16).toString(2);r=="0"&&(r="00000000"),r=r.slice(0,0-i);var s=parseInt(r,2);return s==NaN?-1:s}catch{return-1}}function ws(t){if(typeof t!="number"||t<0)return null;var e=Number(t).toString(2),i=8-e.length%8;i==8&&(i=0),e=e+gi("",i,"0");var n=parseInt(e,2).toString(16);n.length%2==1&&(n="0"+n);var r="0"+i;return r+n}function xs(t){if(typeof t!="string"||t.length%2!=0||!t.match(/^[0-9a-f]+$/))return null;try{var e=parseInt(t.substr(0,2),16);if(e<0||7<e)return null;for(var i=t.substr(2),n="",r=0;r<i.length;r+=2){var s=i.substr(r,2),a=parseInt(s,16).toString(2);a=("0000000"+a).slice(-8),n+=a}return n.substr(0,n.length-e)}catch{return null}}function Gd(t){if(typeof t!="string"||t.match(/^[01]+$/)==null)return null;try{var e=parseInt(t,2);return ws(e)}catch{return null}}function mi(t,e){for(var i=0,n=0;n<t.length;n++)i|=1<<e[t[n]];for(var r=i.toString(2),s="",n=r.length-1;n>=0;n--)s+=r[n];return s}function B(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)}(typeof d>"u"||!d)&&(d={});(typeof d.crypto>"u"||!d.crypto)&&(d.crypto={});d.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:q.algo.MD5,sha1:q.algo.SHA1,sha224:q.algo.SHA224,sha256:q.algo.SHA256,sha384:q.algo.SHA384,sha512:q.algo.SHA512,ripemd160:q.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(typeof this.DIGESTINFOHEAD[e]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,i){var n=this.getDigestInfoHex(t,e),r=i/4;if(n.length+22>r)throw"key is too short for SigAlg: keylen="+i+","+e;for(var s="0001",a="00"+n,o="",l=r-s.length-a.length,u=0;u<l;u+=2)o+="ff";var g=s+o+a;return g},this.hashString=function(t,e){var i=new d.crypto.MessageDigest({alg:e});return i.digestString(t)},this.hashHex=function(t,e){var i=new d.crypto.MessageDigest({alg:e});return i.digestHex(t)},this.sha1=function(t){return this.hashString(t,"sha1")},this.sha256=function(t){return this.hashString(t,"sha256")},this.sha256Hex=function(t){return this.hashHex(t,"sha256")},this.sha512=function(t){return this.hashString(t,"sha512")},this.sha512Hex=function(t){return this.hashHex(t,"sha512")},this.isKey=function(t){return t instanceof K||t instanceof d.crypto.DSA||t instanceof d.crypto.ECDSA}};d.crypto.Util.md5=function(t){var e=new d.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return e.digestString(t)};d.crypto.Util.ripemd160=function(t){var e=new d.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return e.digestString(t)};d.crypto.Util.SECURERANDOMGEN=new Et;d.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return d.crypto.Util.SECURERANDOMGEN.nextBytes(e),yi(e)};d.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new O(d.crypto.Util.getRandomHexOfNbytes(t),16)};d.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,i=(t-e)/8,n=new Array(i+1);return d.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<e&255^255)&n[0],yi(n)};d.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new O(d.crypto.Util.getRandomHexOfNbits(t),16)};d.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var i=d.crypto.Util.getRandomBigIntegerOfNbits(e);if(t.compareTo(i)!=-1)return i}};d.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var i=t.compareTo(e);if(i==1)throw"biMin is greater than biMax";if(i==0)return t;var n=e.subtract(t),r=d.crypto.Util.getRandomBigIntegerZeroToMax(n);return r.add(t)};d.crypto.MessageDigest=function(t){var e=null,i=null,n=null;this.setAlgAndProvider=function(r,s){if(r=d.crypto.MessageDigest.getCanonicalAlgName(r),r!==null&&s===void 0&&(s=d.crypto.Util.DEFAULTPROVIDER[r]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)!=-1&&s=="cryptojs"){try{this.md=d.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r].create()}catch(a){throw"setAlgAndProvider hash alg set fail alg="+r+"/"+a}this.updateString=function(a){this.md.update(a)},this.updateHex=function(a){var o=q.enc.Hex.parse(a);this.md.update(o)},this.digest=function(){var a=this.md.finalize();return a.toString(q.enc.Hex)},this.digestString=function(a){return this.updateString(a),this.digest()},this.digestHex=function(a){return this.updateHex(a),this.digest()}}if(":sha256:".indexOf(r)!=-1&&s=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(a){throw"setAlgAndProvider hash alg set fail alg="+r+"/"+a}this.updateString=function(a){this.md.update(a)},this.updateHex=function(a){var o=sjcl.codec.hex.toBits(a);this.md.update(o)},this.digest=function(){var a=this.md.finalize();return sjcl.codec.hex.fromBits(a)},this.digestString=function(a){return this.updateString(a),this.digest()},this.digestHex=function(a){return this.updateHex(a),this.digest()}}},this.updateString=function(r){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(r){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(r){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(r){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},t!==void 0&&t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=d.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};d.crypto.MessageDigest.getCanonicalAlgName=function(t){return typeof t=="string"&&(t=t.toLowerCase(),t=t.replace(/-/,"")),t};d.crypto.MessageDigest.getHashLength=function(t){var e=d.crypto.MessageDigest,i=e.getCanonicalAlgName(t);if(e.HASHLENGTH[i]===void 0)throw"not supported algorithm: "+t;return e.HASHLENGTH[i]};d.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};d.crypto.Mac=function(t){var e=null,i=null,n=null,r=null,s=null;this.setAlgAndProvider=function(a,o){if(a=a.toLowerCase(),a==null&&(a="hmacsha1"),a=a.toLowerCase(),a.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+a;o===void 0&&(o=d.crypto.Util.DEFAULTPROVIDER[a]),this.algProv=a+"/"+o;var l=a.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(l)!=-1&&o=="cryptojs"){try{var u=d.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[l];this.mac=q.algo.HMAC.create(u,this.pass)}catch(g){throw"setAlgAndProvider hash alg set fail hashAlg="+l+"/"+g}this.updateString=function(g){this.mac.update(g)},this.updateHex=function(g){var p=q.enc.Hex.parse(g);this.mac.update(p)},this.doFinal=function(){var g=this.mac.finalize();return g.toString(q.enc.Hex)},this.doFinalString=function(g){return this.updateString(g),this.doFinal()},this.doFinalHex=function(g){return this.updateHex(g),this.doFinal()}}},this.updateString=function(a){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(a){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(a){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(a){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(a){if(typeof a=="string"){var o=a;(a.length%2==1||!a.match(/^[0-9A-Fa-f]+$/))&&(o=et(a)),this.pass=q.enc.Hex.parse(o);return}if(typeof a!="object")throw"KJUR.crypto.Mac unsupported password type: "+a;var o=null;if(a.hex!==void 0){if(a.hex.length%2!=0||!a.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+a.hex;o=a.hex}if(a.utf8!==void 0&&(o=wi(a.utf8)),a.rstr!==void 0&&(o=et(a.rstr)),a.b64!==void 0&&(o=Ht(a.b64)),a.b64u!==void 0&&(o=ye(a.b64u)),o==null)throw"KJUR.crypto.Mac unsupported password type: "+a;this.pass=q.enc.Hex.parse(o)},t!==void 0&&(t.pass!==void 0&&this.setPassword(t.pass),t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=d.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};d.crypto.Signature=function(t){var e=null,i=null,n=null,r=null,s=null,a=null,o=null,l=null,u=null,g=null,p=-1,c=null,h=null,m=null,f=null,b=null;if(this._setAlgNames=function(){var v=this.algName.match(/^(.+)with(.+)$/);v&&(this.mdAlgName=v[1].toLowerCase(),this.pubkeyAlgName=v[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(v,w){for(var y="",S=w/4-v.length,E=0;E<S;E++)y=y+"0";return y+v},this.setAlgAndProvider=function(v,w){if(this._setAlgNames(),w!="cryptojs/jsrsa")throw new Error("provider not supported: "+w);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new d.crypto.MessageDigest({alg:this.mdAlgName})}catch(y){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+y)}this.init=function(y,S){var E=null;try{S===void 0?E=te.getKey(y):E=te.getKey(y,S)}catch(C){throw"init failed:"+C}if(E.isPrivate===!0)this.prvKey=E,this.state="SIGN";else if(E.isPublic===!0)this.pubKey=E,this.state="VERIFY";else throw"init failed.:"+E},this.updateString=function(y){this.md.updateString(y)},this.updateHex=function(y){this.md.updateHex(y)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&d.crypto.ECDSA!==void 0&&(this.prvKey=new d.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof K&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof K&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof d.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof d.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(y){return this.updateString(y),this.sign()},this.signHex=function(y){return this.updateHex(y),this.sign()},this.verify=function(y){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&d.crypto.ECDSA!==void 0&&(this.pubKey=new d.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof K&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,y,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof K&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,y);if(d.crypto.ECDSA!==void 0&&this.pubKey instanceof d.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,y);if(d.crypto.DSA!==void 0&&this.pubKey instanceof d.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,y);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(v,w){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(v){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(v){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(v){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(v){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(v){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,t!==void 0&&(t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0?this.provName=d.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),t.psssaltlen!==void 0&&(this.pssSaltLen=t.psssaltlen),t.prvkeypem!==void 0)){if(t.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var e=te.getKey(t.prvkeypem);this.init(e)}catch(v){throw"fatal error to load pem private key: "+v}}};d.crypto.Cipher=function(t){};d.crypto.Cipher.encrypt=function(t,e,i){if(e instanceof K&&e.isPublic){var n=d.crypto.Cipher.getAlgByKeyAndName(e,i);if(n==="RSA")return e.encrypt(t);if(n==="RSAOAEP")return e.encryptOAEP(t,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(r!==null)return e.encryptOAEP(t,"sha"+r[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+i}else throw"Cipher.encrypt: unsupported key or algorithm"};d.crypto.Cipher.decrypt=function(t,e,i){if(e instanceof K&&e.isPrivate){var n=d.crypto.Cipher.getAlgByKeyAndName(e,i);if(n==="RSA")return e.decrypt(t);if(n==="RSAOAEP")return e.decryptOAEP(t,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(r!==null)return e.decryptOAEP(t,"sha"+r[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+i}else throw"Cipher.decrypt: unsupported key or algorithm"};d.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof K){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e)!=-1)return e;if(e==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e};d.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof d>"u"||!d)&&(d={});(typeof d.crypto>"u"||!d.crypto)&&(d.crypto={});d.crypto.ECDSA=function(t){var e="secp256r1",i=null,n=null,r=null,s=Error,a=O,o=se,l=d.crypto.ECDSA,u=d.crypto.ECParameterDB,g=l.getName,p=j,c=p.getVbyListEx,h=p.isASN1HEX,m=new Et,f=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function b(v,w,y,S){for(var E=Math.max(w.bitLength(),S.bitLength()),C=v.add2D(y),x=v.curve.getInfinity(),_=E-1;_>=0;--_)x=x.twice2D(),x.z=a.ONE,w.testBit(_)?S.testBit(_)?x=x.add2D(C):x=x.add2D(v):S.testBit(_)&&(x=x.add2D(y));return x}this.getBigRandom=function(v){return new a(v.bitLength(),m).mod(v.subtract(a.ONE)).add(a.ONE)},this.setNamedCurve=function(v){this.ecparams=u.getByName(v),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=v},this.setPrivateKeyHex=function(v){this.isPrivate=!0,this.prvKeyHex=v},this.setPublicKeyHex=function(v){this.isPublic=!0,this.pubKeyHex=v},this.getPublicKeyXYHex=function(){var v=this.pubKeyHex;if(v.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var w=this.ecparams.keycharlen;if(v.length!==2+w*2)throw"malformed public key hex length";var y={};return y.x=v.substr(2,w),y.y=v.substr(2+w),y},this.getShortNISTPCurveName=function(){var v=this.curveName;return v==="secp256r1"||v==="NIST P-256"||v==="P-256"||v==="prime256v1"?"P-256":v==="secp384r1"||v==="NIST P-384"||v==="P-384"?"P-384":v==="secp521r1"||v==="NIST P-521"||v==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var v=this.ecparams.n,w=this.getBigRandom(v),y=this.ecparams.keycharlen,S=("0000000000"+w.toString(16)).slice(-y);this.setPrivateKeyHex(S);var E=this.generatePublicKeyHex();return{ecprvhex:S,ecpubhex:E}},this.generatePublicKeyHex=function(){var v=new a(this.prvKeyHex,16),w=this.ecparams.G.multiply(v),y=w.getX().toBigInteger(),S=w.getY().toBigInteger(),E=this.ecparams.keycharlen,C=("0000000000"+y.toString(16)).slice(-E),x=("0000000000"+S.toString(16)).slice(-E),_="04"+C+x;return this.setPublicKeyHex(_),_},this.signWithMessageHash=function(v){return this.signHex(v,this.prvKeyHex)},this.signHex=function(v,w){var y=new a(w,16),S=this.ecparams.n,E=new a(v.substring(0,this.ecparams.keycharlen),16);do var C=this.getBigRandom(S),x=this.ecparams.G,_=x.multiply(C),A=_.getX().toBigInteger().mod(S);while(A.compareTo(a.ZERO)<=0);var F=C.modInverse(S).multiply(E.add(y.multiply(A))).mod(S);return l.biRSSigToASN1Sig(A,F)},this.sign=function(v,w){var y=w,S=this.ecparams.n,E=a.fromByteArrayUnsigned(v);do var C=this.getBigRandom(S),x=this.ecparams.G,_=x.multiply(C),A=_.getX().toBigInteger().mod(S);while(A.compareTo(O.ZERO)<=0);var F=C.modInverse(S).multiply(E.add(y.multiply(A))).mod(S);return this.serializeSig(A,F)},this.verifyWithMessageHash=function(v,w){return this.verifyHex(v,w,this.pubKeyHex)},this.verifyHex=function(v,w,y){try{var S,E,C=l.parseSigHex(w);S=C.r,E=C.s;var x=o.decodeFromHex(this.ecparams.curve,y),_=new a(v.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(_,S,E,x)}catch{return!1}},this.verify=function(v,w,y){var S,E;if(Bitcoin.Util.isArray(w)){var C=this.parseSig(w);S=C.r,E=C.s}else if(typeof w=="object"&&w.r&&w.s)S=w.r,E=w.s;else throw"Invalid value for signature";var x;if(y instanceof se)x=y;else if(Bitcoin.Util.isArray(y))x=o.decodeFrom(this.ecparams.curve,y);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var _=a.fromByteArrayUnsigned(v);return this.verifyRaw(_,S,E,x)},this.verifyRaw=function(v,w,y,S){var E=this.ecparams.n,C=this.ecparams.G;if(w.compareTo(a.ONE)<0||w.compareTo(E)>=0||y.compareTo(a.ONE)<0||y.compareTo(E)>=0)return!1;var x=y.modInverse(E),_=v.multiply(x).mod(E),A=w.multiply(x).mod(E),F=C.multiply(_).add(S.multiply(A)),T=F.getX().toBigInteger().mod(E);return T.equals(w)},this.serializeSig=function(v,w){var y=v.toByteArraySigned(),S=w.toByteArraySigned(),E=[];return E.push(2),E.push(y.length),E=E.concat(y),E.push(2),E.push(S.length),E=E.concat(S),E.unshift(E.length),E.unshift(48),E},this.parseSig=function(v){var w;if(v[0]!=48)throw new Error("Signature not a valid DERSequence");if(w=2,v[w]!=2)throw new Error("First element in signature must be a DERInteger");var y=v.slice(w+2,w+2+v[w+1]);if(w+=2+v[w+1],v[w]!=2)throw new Error("Second element in signature must be a DERInteger");var S=v.slice(w+2,w+2+v[w+1]);w+=2+v[w+1];var E=a.fromByteArrayUnsigned(y),C=a.fromByteArrayUnsigned(S);return{r:E,s:C}},this.parseSigCompact=function(v){if(v.length!==65)throw"Signature has the wrong length";var w=v[0]-27;if(w<0||w>7)throw"Invalid signature type";var y=this.ecparams.n,S=a.fromByteArrayUnsigned(v.slice(1,33)).mod(y),E=a.fromByteArrayUnsigned(v.slice(33,65)).mod(y);return{r:S,s:E,i:w}},this.readPKCS5PrvKeyHex=function(v){if(h(v)===!1)throw new Error("not ASN.1 hex string");var w,y,S;try{w=c(v,0,["[0]",0],"06"),y=c(v,0,[1],"04");try{S=c(v,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=g(w),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(S),this.setPrivateKeyHex(y),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(v){if(h(v)===!1)throw new s("not ASN.1 hex string");var w,y,S,E;try{w=c(v,0,[1,0],"06"),y=c(v,0,[1,1],"06"),S=c(v,0,[2,0,1],"04");try{E=c(v,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new s("malformed PKCS#8 plain ECC private key")}if(this.curveName=g(y),this.curveName===void 0)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(E),this.setPrivateKeyHex(S),this.isPublic=!1},this.readPKCS8PubKeyHex=function(v){if(h(v)===!1)throw new s("not ASN.1 hex string");var w,y,S;try{w=c(v,0,[0,0],"06"),y=c(v,0,[0,1],"06"),S=c(v,0,[1],"03")}catch{throw new s("malformed PKCS#8 ECC public key")}if(this.curveName=g(y),this.curveName===null)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(S)},this.readCertPubKeyHex=function(v,w){if(h(v)===!1)throw new s("not ASN.1 hex string");var y,S;try{y=c(v,0,[0,5,0,1],"06"),S=c(v,0,[0,5,1],"03")}catch{throw new s("malformed X.509 certificate ECC public key")}if(this.curveName=g(y),this.curveName===null)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(S)},t!==void 0&&t.curve!==void 0&&(this.curveName=t.curve),this.curveName===void 0&&(this.curveName=e),this.setNamedCurve(this.curveName),t!==void 0&&(t.prv!==void 0&&this.setPrivateKeyHex(t.prv),t.pub!==void 0&&this.setPublicKeyHex(t.pub))};d.crypto.ECDSA.parseSigHex=function(t){var e=d.crypto.ECDSA.parseSigHexInHexRS(t),i=new O(e.r,16),n=new O(e.s,16);return{r:i,s:n}};d.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=j,i=e.getChildIdx,n=e.getV;if(e.checkStrictDER(t,0),t.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var r=i(t,0);if(r.length!=2)throw new Error("signature shall have two elements");var s=r[0],a=r[1];if(t.substr(s,2)!="02")throw new Error("1st item not ASN.1 integer");if(t.substr(a,2)!="02")throw new Error("2nd item not ASN.1 integer");var o=n(t,s),l=n(t,a);return{r:o,s:l}};d.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=d.crypto.ECDSA.parseSigHexInHexRS(t),i=e.r,n=e.s;if(i.length>=130&&i.length<=134){if(i.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");i.substr(0,2)=="00"&&(i=i.substr(2)),n.substr(0,2)=="00"&&(n=n.substr(2));var r=Math.max(i.length,n.length);return i=("000000"+i).slice(-r),n=("000000"+n).slice(-r),i+n}if(i.substr(0,2)=="00"&&i.length%32==2&&(i=i.substr(2)),n.substr(0,2)=="00"&&n.length%32==2&&(n=n.substr(2)),i.length%32==30&&(i="00"+i),n.length%32==30&&(n="00"+n),i.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return i+n};d.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var e=t.substr(0,t.length/2),i=t.substr(t.length/2);return d.crypto.ECDSA.hexRSSigToASN1Sig(e,i)};d.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var i=new O(t,16),n=new O(e,16);return d.crypto.ECDSA.biRSSigToASN1Sig(i,n)};d.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var i=d.asn1,n=new i.DERInteger({bigint:t}),r=new i.DERInteger({bigint:e}),s=new i.DERSequence({array:[n,r]});return s.tohex()};d.crypto.ECDSA.getName=function(t){return t==="2b8104001f"?"secp192k1":t==="2a8648ce3d030107"?"secp256r1":t==="2b8104000a"?"secp256k1":t==="2b81040021"?"secp224r1":t==="2b81040022"?"secp384r1":t==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)!==-1?"secp256r1":"|secp256k1|".indexOf(t)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(t)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(t)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(t)!==-1?"secp521r1":null};(typeof d>"u"||!d)&&(d={});(typeof d.crypto>"u"||!d.crypto)&&(d.crypto={});d.crypto.ECParameterDB=new function(){var t={},e={};function i(n){return new O(n,16)}this.getByName=function(n){var r=n;if(typeof e[r]<"u"&&(r=e[n]),typeof t[r]<"u")return t[r];throw"unregistered EC curve name: "+r},this.regist=function(n,r,s,a,o,l,u,g,p,c,h,m){t[n]={};var f=i(s),b=i(a),v=i(o),w=i(l),y=i(u),S=new gt(f,b,v),E=S.decodePointHex("04"+g+p);t[n].name=n,t[n].keylen=r,t[n].keycharlen=Math.ceil(r/8)*2,t[n].curve=S,t[n].G=E,t[n].n=w,t[n].h=y,t[n].oid=h,t[n].info=m;for(var C=0;C<c.length;C++)e[c[C]]=n}};d.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");d.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");d.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");d.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);d.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);d.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);d.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);d.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);d.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);d.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof d>"u"||!d)&&(d={});(typeof d.crypto>"u"||!d.crypto)&&(d.crypto={});d.crypto.DSA=function(){var t=j,e=t.getVbyList,i=t.getVbyListEx,n=t.isASN1HEX,r=O;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(s,a,o,l,u){this.isPrivate=!0,this.p=s,this.q=a,this.g=o,this.y=l,this.x=u},this.setPrivateHex=function(s,a,o,l,u){var g,p,c,h,m;g=new O(s,16),p=new O(a,16),c=new O(o,16),typeof l=="string"&&l.length>1?h=new O(l,16):h=null,m=new O(u,16),this.setPrivate(g,p,c,h,m)},this.setPublic=function(s,a,o,l){this.isPublic=!0,this.p=s,this.q=a,this.g=o,this.y=l,this.x=null},this.setPublicHex=function(s,a,o,l){var u,g,p,c;u=new O(s,16),g=new O(a,16),p=new O(o,16),c=new O(l,16),this.setPublic(u,g,p,c)},this.signWithMessageHash=function(s){var a=this.p,o=this.q,l=this.g,u=this.y,g=this.x,p=d.crypto.Util.getRandomBigIntegerMinToMax(O.ONE.add(O.ONE),o.subtract(O.ONE)),c=s.substr(0,o.bitLength()/4),h=new O(c,16),m=l.modPow(p,a).mod(o),f=p.modInverse(o).multiply(h.add(g.multiply(m))).mod(o),b=d.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:m}},{int:{bigint:f}}]});return b},this.verifyWithMessageHash=function(s,a){var o=this.p,l=this.q,u=this.g,g=this.y,p=this.parseASN1Signature(a),c=p[0],h=p[1],m=s.substr(0,l.bitLength()/4),f=new O(m,16);if(O.ZERO.compareTo(c)>0||c.compareTo(l)>0||O.ZERO.compareTo(h)>=0||h.compareTo(l)>0)throw"invalid DSA signature";var b=h.modInverse(l),v=f.multiply(b).mod(l),w=c.multiply(b).mod(l),y=u.modPow(v,o).multiply(g.modPow(w,o)).mod(o).mod(l);return y.compareTo(c)==0},this.parseASN1Signature=function(s){try{var a=new r(i(s,0,[0],"02"),16),o=new r(i(s,0,[1],"02"),16);return[a,o]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(s){var a,o,l,u,g;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{a=i(s,0,[1],"02"),o=i(s,0,[2],"02"),l=i(s,0,[3],"02"),u=i(s,0,[4],"02"),g=i(s,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(a,o,l,u,g)},this.readPKCS8PrvKeyHex=function(s){var a,o,l,u;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{a=i(s,0,[1,1,0],"02"),o=i(s,0,[1,1,1],"02"),l=i(s,0,[1,1,2],"02"),u=i(s,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(a,o,l,null,u)},this.readPKCS8PubKeyHex=function(s){var a,o,l,u;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{a=i(s,0,[0,1,0],"02"),o=i(s,0,[0,1,1],"02"),l=i(s,0,[0,1,2],"02"),u=i(s,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(a,o,l,u)},this.readCertPubKeyHex=function(s,a){var o,l,u,g;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{o=i(s,0,[0,5,0,1,0],"02"),l=i(s,0,[0,5,0,1,1],"02"),u=i(s,0,[0,5,0,1,2],"02"),g=i(s,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(o,l,u,g)}};var te=function(){var t=function(f,b,v){return n(q.AES,f,b,v)},e=function(f,b,v){return n(q.TripleDES,f,b,v)},i=function(f,b,v){return n(q.DES,f,b,v)},n=function(f,b,v,w){var y=q.enc.Hex.parse(b),S=q.enc.Hex.parse(v),E=q.enc.Hex.parse(w),C={};C.key=S,C.iv=E,C.ciphertext=y;var x=f.decrypt(C,S,{iv:E});return q.enc.Hex.stringify(x)},r=function(f,b,v){return o(q.AES,f,b,v)},s=function(f,b,v){return o(q.TripleDES,f,b,v)},a=function(f,b,v){return o(q.DES,f,b,v)},o=function(f,b,v,w){var y=q.enc.Hex.parse(b),S=q.enc.Hex.parse(v),E=q.enc.Hex.parse(w),C=f.encrypt(y,S,{iv:E}),x=q.enc.Hex.parse(C.toString()),_=q.enc.Base64.stringify(x);return _},l={"AES-256-CBC":{proc:t,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:e,eproc:s,keylen:24,ivlen:8},"DES-CBC":{proc:i,eproc:a,keylen:8,ivlen:8}},u=function(f){return l[f].proc},g=function(f){var b=q.lib.WordArray.random(f),v=q.enc.Hex.stringify(b);return v},p=function(f){var b={},v=f.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));v&&(b.cipher=v[1],b.ivsalt=v[2]);var w=f.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));w&&(b.type=w[1]);var y=-1,S=0;f.indexOf(`\r
\r
`)!=-1&&(y=f.indexOf(`\r
\r
`),S=2),f.indexOf(`

`)!=-1&&(y=f.indexOf(`

`),S=1);var E=f.indexOf("-----END");if(y!=-1&&E!=-1){var C=f.substring(y+S*2,E-S);C=C.replace(/\s+/g,""),b.data=C}return b},c=function(f,b,v){for(var w=v.substring(0,16),y=q.enc.Hex.parse(w),S=q.enc.Utf8.parse(b),E=l[f].keylen+l[f].ivlen,C="",x=null;;){var _=q.algo.MD5.create();if(x!=null&&_.update(x),_.update(S),_.update(y),x=_.finalize(),C=C+q.enc.Hex.stringify(x),C.length>=E*2)break}var A={};return A.keyhex=C.substr(0,l[f].keylen*2),A.ivhex=C.substr(l[f].keylen*2,l[f].ivlen*2),A},h=function(f,b,v,w){var y=q.enc.Base64.parse(f),S=q.enc.Hex.stringify(y),E=l[b].proc,C=E(S,v,w);return C},m=function(f,b,v,w){var y=l[b].eproc,S=y(f,v,w);return S};return{version:"1.0.0",parsePKCS5PEM:function(f){return p(f)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(f,b,v){return c(f,b,v)},decryptKeyB64:function(f,b,v,w){return h(f,b,v,w)},getDecryptedKeyHex:function(f,b){var v=p(f),w=v.type,y=v.cipher,S=v.ivsalt,E=v.data,C=c(y,b,S),x=C.keyhex,_=h(E,y,x,S);return _},getEncryptedPKCS5PEMFromPrvKeyHex:function(f,b,v,w,y){var F="";if((typeof w>"u"||w==null)&&(w="AES-256-CBC"),typeof l[w]>"u")throw new Error("KEYUTIL unsupported algorithm: "+w);if(typeof y>"u"||y==null){var S=l[w].ivlen,E=g(S);y=E.toUpperCase()}var C=c(w,v,y),x=C.keyhex,_=m(b,w,x,y),A=_.replace(/(.{64})/g,`$1\r
`),F="-----BEGIN "+f+` PRIVATE KEY-----\r
`;return F+=`Proc-Type: 4,ENCRYPTED\r
`,F+="DEK-Info: "+w+","+y+`\r
`,F+=`\r
`,F+=A,F+=`\r
-----END `+f+` PRIVATE KEY-----\r
`,F},parseHexOfEncryptedPKCS8:function(f){var b=j,v=b.getChildIdx,w=b.getV,y={},S=v(f,0);if(S.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+S.length);y.ciphertext=w(f,S[1]);var E=v(f,S[0]);if(E.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+E.length);if(w(f,E[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var C=v(f,E[1]);if(E.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+C.length);var x=v(f,C[1]);if(x.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+x.length);if(w(f,x[0])!="2a864886f70d0307")throw"this only supports TripleDES";y.encryptionSchemeAlg="TripleDES",y.encryptionSchemeIV=w(f,x[1]);var _=v(f,C[0]);if(_.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+_.length);if(w(f,_[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var A=v(f,_[1]);if(A.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+A.length);y.pbkdf2Salt=w(f,A[0]);var F=w(f,A[1]);try{y.pbkdf2Iter=parseInt(F,16)}catch{throw new Error("malformed format pbkdf2Iter: "+F)}return y},getPBKDF2KeyHexFromParam:function(f,b){var v=q.enc.Hex.parse(f.pbkdf2Salt),w=f.pbkdf2Iter,y=q.PBKDF2(b,v,{keySize:192/32,iterations:w}),S=q.enc.Hex.stringify(y);return S},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(f,b){var v=Fe(f,"ENCRYPTED PRIVATE KEY"),w=this.parseHexOfEncryptedPKCS8(v),y=te.getPBKDF2KeyHexFromParam(w,b),S={};S.ciphertext=q.enc.Hex.parse(w.ciphertext);var E=q.enc.Hex.parse(y),C=q.enc.Hex.parse(w.encryptionSchemeIV),x=q.TripleDES.decrypt(S,E,{iv:C}),_=q.enc.Hex.stringify(x);return _},getKeyFromEncryptedPKCS8PEM:function(f,b){var v=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(f,b),w=this.getKeyFromPlainPrivatePKCS8Hex(v);return w},parsePlainPrivatePKCS8Hex:function(f){var b=j,v=b.getChildIdx,w=b.getV,y={};if(y.algparam=null,f.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var S=v(f,0);if(S.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(f.substr(S[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var E=v(f,S[1]);if(E.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(f.substr(E[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(y.algoid=w(f,E[0]),f.substr(E[1],2)=="06"&&(y.algparam=w(f,E[1])),f.substr(S[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return y.keyidx=b.getVidx(f,S[2]),y},getKeyFromPlainPrivatePKCS8PEM:function(f){var b=Fe(f,"PRIVATE KEY"),v=this.getKeyFromPlainPrivatePKCS8Hex(b);return v},getKeyFromPlainPrivatePKCS8Hex:function(f){var b=this.parsePlainPrivatePKCS8Hex(f),v;if(b.algoid=="2a864886f70d010101")v=new K;else if(b.algoid=="2a8648ce380401")v=new d.crypto.DSA;else if(b.algoid=="2a8648ce3d0201")v=new d.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return v.readPKCS8PrvKeyHex(f),v},_getKeyFromPublicPKCS8Hex:function(f){var b,v=j.getVbyList(f,0,[0,0],"06");if(v==="2a864886f70d010101")b=new K;else if(v==="2a8648ce380401")b=new d.crypto.DSA;else if(v==="2a8648ce3d0201")b=new d.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return b.readPKCS8PubKeyHex(f),b},parsePublicRawRSAKeyHex:function(f){var b=j,v=b.getChildIdx,w=b.getV,y={};if(f.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var S=v(f,0);if(S.length!=2)throw new Error("malformed RSA key(code:002)");if(f.substr(S[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(y.n=w(f,S[0]),f.substr(S[1],2)!="02")throw new Error("malformed RSA key(code:004)");return y.e=w(f,S[1]),y},parsePublicPKCS8Hex:function(f){var b=j,v=b.getChildIdx,w=b.getV,y={};y.algparam=null;var S=v(f,0);if(S.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+S.length);var E=S[0];if(f.substr(E,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var C=v(f,E);if(C.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(f.substr(C[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(y.algoid=w(f,C[0]),f.substr(C[1],2)=="06"?y.algparam=w(f,C[1]):f.substr(C[1],2)=="30"&&(y.algparam={},y.algparam.p=b.getVbyList(f,C[1],[0],"02"),y.algparam.q=b.getVbyList(f,C[1],[1],"02"),y.algparam.g=b.getVbyList(f,C[1],[2],"02")),f.substr(S[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return y.key=w(f,S[1]).substr(2),y}}}();te.getKey=function(t,e,i){var n=j,r=n.getChildIdx,s=n.getV,a=n.getVbyList,o=d.crypto,l=o.ECDSA,u=o.DSA,g=K,p=Fe,c=te;if(typeof g<"u"&&t instanceof g||typeof l<"u"&&t instanceof l||typeof u<"u"&&t instanceof u)return t;if(t.curve!==void 0&&t.xy!==void 0&&t.d===void 0)return new l({pub:t.xy,curve:t.curve});if(t.curve!==void 0&&t.d!==void 0)return new l({prv:t.d,curve:t.curve});if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var h=new g;return h.setPublic(t.n,t.e),h}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.co!==void 0&&t.qi===void 0){var h=new g;return h.setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),h}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p===void 0){var h=new g;return h.setPrivate(t.n,t.e,t.d),h}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x===void 0){var h=new u;return h.setPublic(t.p,t.q,t.g,t.y),h}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x!==void 0){var h=new u;return h.setPrivate(t.p,t.q,t.g,t.y,t.x),h}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var h=new g;return h.setPublic(ye(t.n),ye(t.e)),h}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.qi!==void 0){var h=new g;return h.setPrivateEx(ye(t.n),ye(t.e),ye(t.d),ye(t.p),ye(t.q),ye(t.dp),ye(t.dq),ye(t.qi)),h}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0){var h=new g;return h.setPrivate(ye(t.n),ye(t.e),ye(t.d)),h}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d===void 0){var m=new l({curve:t.crv}),f=m.ecparams.keycharlen,b=("0000000000"+ye(t.x)).slice(-f),v=("0000000000"+ye(t.y)).slice(-f),w="04"+b+v;return m.setPublicKeyHex(w),m}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d!==void 0){var m=new l({curve:t.crv}),f=m.ecparams.keycharlen,b=("0000000000"+ye(t.x)).slice(-f),v=("0000000000"+ye(t.y)).slice(-f),w="04"+b+v,y=("0000000000"+ye(t.d)).slice(-f);return m.setPublicKeyHex(w),m.setPrivateKeyHex(y),m}if(i==="pkcs5prv"){var S=t,n=j,E,h;if(E=r(S,0),E.length===9)h=new g,h.readPKCS5PrvKeyHex(S);else if(E.length===6)h=new u,h.readPKCS5PrvKeyHex(S);else if(E.length>2&&S.substr(E[1],2)==="04")h=new l,h.readPKCS5PrvKeyHex(S);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return h}if(i==="pkcs8prv"){var h=c.getKeyFromPlainPrivatePKCS8Hex(t);return h}if(i==="pkcs8pub")return c._getKeyFromPublicPKCS8Hex(t);if(i==="x509pub")return J.getPublicKeyFromCertHex(t);if(t.indexOf("-END CERTIFICATE-",0)!=-1||t.indexOf("-END X509 CERTIFICATE-",0)!=-1||t.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return J.getPublicKeyFromCertPEM(t);if(t.indexOf("-END PUBLIC KEY-")!=-1){var C=Fe(t,"PUBLIC KEY");return c._getKeyFromPublicPKCS8Hex(C)}if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var x=p(t,"RSA PRIVATE KEY");return c.getKey(x,null,"pkcs5prv")}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var _=p(t,"DSA PRIVATE KEY"),A=a(_,0,[1],"02"),F=a(_,0,[2],"02"),T=a(_,0,[3],"02"),R=a(_,0,[4],"02"),M=a(_,0,[5],"02"),h=new u;return h.setPrivate(new O(A,16),new O(F,16),new O(T,16),new O(R,16),new O(M,16)),h}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var x=p(t,"EC PRIVATE KEY");return c.getKey(x,null,"pkcs5prv")}if(t.indexOf("-END PRIVATE KEY-")!=-1)return c.getKeyFromPlainPrivatePKCS8PEM(t);if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var P=c.getDecryptedKeyHex(t,e),N=new K;return N.readPKCS5PrvKeyHex(P),N}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var _=c.getDecryptedKeyHex(t,e),h=a(_,0,[1],"04"),D=a(_,0,[2,0],"06"),k=a(_,0,[3,0],"03").substr(2),W="";if(d.crypto.OID.oidhex2name[D]!==void 0)W=d.crypto.OID.oidhex2name[D];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+D);var m=new l({curve:W});return m.setPublicKeyHex(k),m.setPrivateKeyHex(h),m.isPublic=!1,m}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var _=c.getDecryptedKeyHex(t,e),A=a(_,0,[1],"02"),F=a(_,0,[2],"02"),T=a(_,0,[3],"02"),R=a(_,0,[4],"02"),M=a(_,0,[5],"02"),h=new u;return h.setPrivate(new O(A,16),new O(F,16),new O(T,16),new O(R,16),new O(M,16)),h}if(t.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return c.getKeyFromEncryptedPKCS8PEM(t,e);throw new Error("not supported argument")};te.generateKeypair=function(t,e){if(t=="RSA"){var i=e,n=new K;n.generate(i,"10001"),n.isPrivate=!0,n.isPublic=!0;var r=new K,s=n.n.toString(16),a=n.e.toString(16);r.setPublic(s,a),r.isPrivate=!1,r.isPublic=!0;var o={};return o.prvKeyObj=n,o.pubKeyObj=r,o}else if(t=="EC"){var l=e,u=new d.crypto.ECDSA({curve:l}),g=u.generateKeyPairHex(),n=new d.crypto.ECDSA({curve:l});n.setPublicKeyHex(g.ecpubhex),n.setPrivateKeyHex(g.ecprvhex),n.isPrivate=!0,n.isPublic=!1;var r=new d.crypto.ECDSA({curve:l});r.setPublicKeyHex(g.ecpubhex),r.isPrivate=!1,r.isPublic=!0;var o={};return o.prvKeyObj=n,o.pubKeyObj=r,o}else throw new Error("unknown algorithm: "+t)};te.getPEM=function(t,e,i,n,r,s){var a=d,o=a.asn1,l=o.DERObjectIdentifier,u=o.DERInteger,g=o.ASN1Util.newObject,p=o.x509,c=p.SubjectPublicKeyInfo,h=a.crypto,m=h.DSA,f=h.ECDSA,b=K;function v(D){var k=g({seq:[{int:0},{int:{bigint:D.n}},{int:D.e},{int:{bigint:D.d}},{int:{bigint:D.p}},{int:{bigint:D.q}},{int:{bigint:D.dmp1}},{int:{bigint:D.dmq1}},{int:{bigint:D.coeff}}]});return k}function w(D){var k=g({seq:[{int:1},{octstr:{hex:D.prvKeyHex}},{tag:["a0",!0,{oid:{name:D.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+D.pubKeyHex}}]}]});return k}function y(D){var k=g({seq:[{int:0},{int:{bigint:D.p}},{int:{bigint:D.q}},{int:{bigint:D.g}},{int:{bigint:D.y}},{int:{bigint:D.x}}]});return k}if((b!==void 0&&t instanceof b||m!==void 0&&t instanceof m||f!==void 0&&t instanceof f)&&t.isPublic==!0&&(e===void 0||e=="PKCS8PUB")){var S=new c(t),E=S.tohex();return De(E,"PUBLIC KEY")}if(e=="PKCS1PRV"&&b!==void 0&&t instanceof b&&(i===void 0||i==null)&&t.isPrivate==!0){var S=v(t),E=S.tohex();return De(E,"RSA PRIVATE KEY")}if(e=="PKCS1PRV"&&f!==void 0&&t instanceof f&&(i===void 0||i==null)&&t.isPrivate==!0){var C=new l({name:t.curveName}),x=C.tohex(),_=w(t),A=_.tohex(),F="";return F+=De(x,"EC PARAMETERS"),F+=De(A,"EC PRIVATE KEY"),F}if(e=="PKCS1PRV"&&m!==void 0&&t instanceof m&&(i===void 0||i==null)&&t.isPrivate==!0){var S=y(t),E=S.tohex();return De(E,"DSA PRIVATE KEY")}if(e=="PKCS5PRV"&&b!==void 0&&t instanceof b&&i!==void 0&&i!=null&&t.isPrivate==!0){var S=v(t),E=S.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",E,i,n,s)}if(e=="PKCS5PRV"&&f!==void 0&&t instanceof f&&i!==void 0&&i!=null&&t.isPrivate==!0){var S=w(t),E=S.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",E,i,n,s)}if(e=="PKCS5PRV"&&m!==void 0&&t instanceof m&&i!==void 0&&i!=null&&t.isPrivate==!0){var S=y(t),E=S.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",E,i,n,s)}var T=function(D,k){var W=R(D,k),U=new g({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:W.pbkdf2Salt}},{int:W.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:W.encryptionSchemeIV}}]}]}]},{octstr:{hex:W.ciphertext}}]});return U.tohex()},R=function(D,k){var W=100,U=q.lib.WordArray.random(8),$="DES-EDE3-CBC",Y=q.lib.WordArray.random(8),Q=q.PBKDF2(k,U,{keySize:192/32,iterations:W}),_e=q.enc.Hex.parse(D),he=q.TripleDES.encrypt(_e,Q,{iv:Y})+"",Ie={};return Ie.ciphertext=he,Ie.pbkdf2Salt=q.enc.Hex.stringify(U),Ie.pbkdf2Iter=W,Ie.encryptionSchemeAlg=$,Ie.encryptionSchemeIV=q.enc.Hex.stringify(Y),Ie};if(e=="PKCS8PRV"&&b!=null&&t instanceof b&&t.isPrivate==!0){var M=v(t),P=M.tohex(),S=g({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:P}}]}),E=S.tohex();if(i===void 0||i==null)return De(E,"PRIVATE KEY");var A=T(E,i);return De(A,"ENCRYPTED PRIVATE KEY")}if(e=="PKCS8PRV"&&f!==void 0&&t instanceof f&&t.isPrivate==!0){var N={seq:[{int:1},{octstr:{hex:t.prvKeyHex}}]};typeof t.pubKeyHex=="string"&&N.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]});var M=new g(N),P=M.tohex(),S=g({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:P}}]}),E=S.tohex();if(i===void 0||i==null)return De(E,"PRIVATE KEY");var A=T(E,i);return De(A,"ENCRYPTED PRIVATE KEY")}if(e=="PKCS8PRV"&&m!==void 0&&t instanceof m&&t.isPrivate==!0){var M=new u({bigint:t.x}),P=M.tohex(),S=g({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:P}}]}),E=S.tohex();if(i===void 0||i==null)return De(E,"PRIVATE KEY");var A=T(E,i);return De(A,"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")};te.getKeyFromCSRPEM=function(t){var e=Fe(t,"CERTIFICATE REQUEST"),i=te.getKeyFromCSRHex(e);return i};te.getKeyFromCSRHex=function(t){var e=te.parseCSRHex(t),i=te.getKey(e.p8pubkeyhex,null,"pkcs8pub");return i};te.parseCSRHex=function(t){var e=j,i=e.getChildIdx,n=e.getTLV,r={},s=t;if(s.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var a=i(s,0);if(a.length<1)throw new Error("malformed CSR(code:002)");if(s.substr(a[0],2)!="30")throw new Error("malformed CSR(code:003)");var o=i(s,a[0]);if(o.length<3)throw new Error("malformed CSR(code:004)");return r.p8pubkeyhex=n(s,o[2]),r};te.getKeyID=function(t){var e=te,i=j;typeof t=="string"&&t.indexOf("BEGIN ")!=-1&&(t=e.getKey(t));var n=Fe(e.getPEM(t)),r=i.getIdxbyList(n,0,[1]),s=i.getV(n,r).substring(2);return d.crypto.Util.hashHex(s,"sha1")};te.getJWK=function(t,e,i,n,r){var s,a={},o,l=d.crypto.Util.hashHex;if(typeof t=="string")s=te.getKey(t),t.indexOf("CERTIFICATE")!=-1&&(o=Fe(t));else if(typeof t=="object")t instanceof J?(s=t.getPublicKey(),o=t.hex):s=t;else throw new Error("unsupported keyinfo type");if(s instanceof K&&s.isPrivate)a.kty="RSA",a.n=Te(s.n.toString(16)),a.e=Te(s.e.toString(16)),a.d=Te(s.d.toString(16)),a.p=Te(s.p.toString(16)),a.q=Te(s.q.toString(16)),a.dp=Te(s.dmp1.toString(16)),a.dq=Te(s.dmq1.toString(16)),a.qi=Te(s.coeff.toString(16));else if(s instanceof K&&s.isPublic)a.kty="RSA",a.n=Te(s.n.toString(16)),a.e=Te(s.e.toString(16));else if(s instanceof d.crypto.ECDSA&&s.isPrivate){var u=s.getShortNISTPCurveName();if(u!=="P-256"&&u!=="P-384"&&u!=="P-521")throw new Error("unsupported curve name for JWT: "+u);var g=s.getPublicKeyXYHex();a.kty="EC",a.crv=u,a.x=Te(g.x),a.y=Te(g.y),a.d=Te(s.prvKeyHex)}else if(s instanceof d.crypto.ECDSA&&s.isPublic){var u=s.getShortNISTPCurveName();if(u!=="P-256"&&u!=="P-384"&&u!=="P-521")throw new Error("unsupported curve name for JWT: "+u);var g=s.getPublicKeyXYHex();a.kty="EC",a.crv=u,a.x=Te(g.x),a.y=Te(g.y)}if(a.kty==null)throw new Error("unsupported keyinfo");return!s.isPrivate&&e!=!0&&(a.kid=d.jws.JWS.getJWKthumbprint(a)),o!=null&&i!=!0&&(a.x5c=[pt(o)]),o!=null&&n!=!0&&(a.x5t=zt(pt(l(o,"sha1")))),o!=null&&r!=!0&&(a["x5t#S256"]=zt(pt(l(o,"sha256")))),a};te.getJWKFromKey=function(t){return te.getJWK(t,!0,!0,!0,!0)};K.getPosArrayOfChildrenFromHex=function(t){return j.getChildIdx(t,0)};K.getHexValueArrayOfChildrenFromHex=function(t){var e=j,i=e.getV,c=K.getPosArrayOfChildrenFromHex(t),n=i(t,c[0]),r=i(t,c[1]),s=i(t,c[2]),a=i(t,c[3]),o=i(t,c[4]),l=i(t,c[5]),u=i(t,c[6]),g=i(t,c[7]),p=i(t,c[8]),c=new Array;return c.push(n,r,s,a,o,l,u,g,p),c};K.prototype.readPrivateKeyFromPEMString=function(t){var e=Fe(t),i=K.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8])};K.prototype.readPKCS5PrvKeyHex=function(t){var e=K.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};K.prototype.readPKCS8PrvKeyHex=function(t){var e,i,n,r,s,a,o,l,u=j,g=u.getVbyListEx;if(u.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");try{e=g(t,0,[2,0,1],"02"),i=g(t,0,[2,0,2],"02"),n=g(t,0,[2,0,3],"02"),r=g(t,0,[2,0,4],"02"),s=g(t,0,[2,0,5],"02"),a=g(t,0,[2,0,6],"02"),o=g(t,0,[2,0,7],"02"),l=g(t,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(e,i,n,r,s,a,o,l)};K.prototype.readPKCS5PubKeyHex=function(t){var e=j,i=e.getV;if(e.isASN1HEX(t)===!1)throw new Error("keyHex is not ASN.1 hex string");var n=e.getChildIdx(t,0);if(n.length!==2||t.substr(n[0],2)!=="02"||t.substr(n[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var r=i(t,n[0]),s=i(t,n[1]);this.setPublic(r,s)};K.prototype.readPKCS8PubKeyHex=function(t){var e=j;if(e.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");if(e.getTLVbyListEx(t,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var i=e.getTLVbyListEx(t,0,[1,0]);this.readPKCS5PubKeyHex(i)};K.prototype.readCertPubKeyHex=function(t,e){var i,n;i=new J,i.readCertHex(t),n=i.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var Fh=new RegExp("[^0-9a-f]","gi");function Ss(t,e){for(var i="",n=e/4-t.length,r=0;r<n;r++)i=i+"0";return i+t}K.prototype.sign=function(t,e){var i=function(r){return d.crypto.Util.hashString(r,e)},n=i(t);return this.signWithMessageHash(n,e)};K.prototype.signWithMessageHash=function(t,e){var i=d.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),n=Le(i,16),r=this.doPrivate(n),s=r.toString(16);return Ss(s,this.n.bitLength())};function _s(t,e,i){for(var n="",r=0;n.length<e;)n+=ze(i(et(t+String.fromCharCode.apply(String,[(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])))),r+=1;return n}K.prototype.signPSS=function(t,e,i){var n=function(s){return d.crypto.Util.hashHex(s,e)},r=n(et(t));return i===void 0&&(i=-1),this.signWithMessageHashPSS(r,e,i)};K.prototype.signWithMessageHashPSS=function(t,e,i){var n=ze(t),r=n.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),o,l=function(b){return d.crypto.Util.hashHex(b,e)};if(i===-1||i===void 0)i=r;else if(i===-2)i=a-r-2;else if(i<-2)throw new Error("invalid salt length");if(a<r+i+2)throw new Error("data too long");var u="";i>0&&(u=new Array(i),new Et().nextBytes(u),u=String.fromCharCode.apply(String,u));var g=ze(l(et("\0\0\0\0\0\0\0\0"+n+u))),p=[];for(o=0;o<a-i-r-2;o+=1)p[o]=0;var c=String.fromCharCode.apply(String,p)+""+u,h=_s(g,c.length,l),m=[];for(o=0;o<c.length;o+=1)m[o]=c.charCodeAt(o)^h.charCodeAt(o);var f=65280>>8*a-s&255;for(m[0]&=~f,o=0;o<r;o++)m.push(g.charCodeAt(o));return m.push(188),Ss(this.doPrivate(new O(m)).toString(16),this.n.bitLength())};function Es(t){for(var e in d.crypto.Util.DIGESTINFOHEAD){var i=d.crypto.Util.DIGESTINFOHEAD[e],n=i.length;if(t.substring(0,n)==i){var r=[e,t.substring(n)];return r}}return[]}K.prototype.verify=function(t,e){if(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null)return!1;var i=Le(e,16),n=this.n.bitLength();if(i.bitLength()>n)return!1;var r=this.doPublic(i),s=r.toString(16);if(s.length+3!=n/4)return!1;var a=s.replace(/^1f+00/,""),o=Es(a);if(o.length==0)return!1;var l=o[0],u=o[1],g=function(c){return d.crypto.Util.hashString(c,l)},p=g(t);return u==p};K.prototype.verifyWithMessageHash=function(t,e){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var i=Le(e,16);if(i.bitLength()>this.n.bitLength())return 0;var n=this.doPublic(i),r=n.toString(16).replace(/^1f+00/,""),s=Es(r);if(s.length==0)return!1;var a=s[0],o=s[1];return o==t};K.prototype.verifyPSS=function(t,e,i,n){var r=function(a){return d.crypto.Util.hashHex(a,i)},s=r(et(t));return n===void 0&&(n=-1),this.verifyWithMessageHashPSS(s,e,i,n)};K.prototype.verifyWithMessageHashPSS=function(t,e,i,n){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=new O(e,16),s=function(w){return d.crypto.Util.hashHex(w,i)},a=ze(t),o=a.length,l=this.n.bitLength()-1,u=Math.ceil(l/8),g;if(n===-1||n===void 0)n=o;else if(n===-2)n=u-o-2;else if(n<-2)throw new Error("invalid salt length");if(u<o+n+2)throw new Error("data too long");var p=this.doPublic(r).toByteArray();for(g=0;g<p.length;g+=1)p[g]&=255;for(;p.length<u;)p.unshift(0);if(p[u-1]!==188)throw new Error("encoded message does not end in 0xbc");p=String.fromCharCode.apply(String,p);var c=p.substr(0,u-o-1),h=p.substr(c.length,o),m=65280>>8*u-l&255;if(c.charCodeAt(0)&m)throw new Error("bits beyond keysize not zero");var f=_s(h,c.length,s),b=[];for(g=0;g<c.length;g+=1)b[g]=c.charCodeAt(g)^f.charCodeAt(g);b[0]&=~m;var v=u-o-n-2;for(g=0;g<v;g+=1)if(b[g]!==0)throw new Error("leftmost octets not zero");if(b[v]!==1)throw new Error("0x01 marker not found");return h===ze(s(et("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,b.slice(-n)))))};K.SALT_LEN_HLEN=-1;K.SALT_LEN_MAX=-2;K.SALT_LEN_RECOVER=-2;function J(t){var e=j,i=e.getChildIdx,n=e.getV,r=e.dump,s=e.parse,a=e.getTLV,o=e.getVbyList,l=e.getVbyListEx,u=e.getTLVbyList,g=e.getTLVbyListEx,p=e.getIdxbyList,c=e.getIdxbyListEx,h=e.getVidx,m=e.getInt,f=e.oidname,b=e.hextooidstr,v=J,w=Fe,y;try{y=d.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var x=u(this.hex,0,[0,0]);if(x.substr(0,2)=="a0"){var _=u(x,0,[0]),A=m(_,0);if(A<0||2<A)throw new Error("malformed version field");return this.version=A+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return l(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var x=g(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(x)},this.getAlgorithmIdentifierName=function(x){for(var _ in y)if(x===y[_])return _;return f(l(x,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var x=this.getIssuer();return x.str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return u(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var x=this.getSubject();return x.str},this.getNotBefore=function(){var x=o(this.hex,0,[0,4+this.foffset,0]);return x=x.replace(/(..)/g,"%$1"),x=decodeURIComponent(x),x},this.getNotAfter=function(){var x=o(this.hex,0,[0,4+this.foffset,1]);return x=x.replace(/(..)/g,"%$1"),x=decodeURIComponent(x),x},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return u(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var x=this.getSPKI();return x==null?null:o(x,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return p(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var x=this.getPublicKeyIdx();return p(this.hex,x,[1,0],"30")},this.getPublicKey=function(){return te.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var x=u(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(x)},this.getSignatureValueHex=function(){return o(this.hex,0,[2],"03",!0)},this.verifySignature=function(x){var _=this.getSignatureAlgorithmField(),A=this.getSignatureValueHex(),F=u(this.hex,0,[0],"30"),T=new d.crypto.Signature({alg:_});return T.init(x),T.updateHex(F),T.verify(A)},this.parseExt=function(x){var _,A,F;if(x===void 0){if(F=this.hex,this.version!==3)return-1;_=p(F,0,[0,7,0],"30"),A=i(F,_)}else{F=Fe(x);var T=p(F,0,[0,3,0,0],"06");if(n(F,T)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}_=p(F,0,[0,3,0,1,0],"30"),A=i(F,_),this.hex=F}this.aExtInfo=new Array;for(var R=0;R<A.length;R++){var M={};M.critical=!1;var P=i(F,A[R]),N=0;P.length===3&&(M.critical=!0,N=1),M.oid=e.hextooidstr(o(F,A[R],[0],"06"));var D=p(F,A[R],[1+N]);M.vidx=h(F,D),this.aExtInfo.push(M)}},this.getExtInfo=function(x){var _=this.aExtInfo,A=x;if(x.match(/^[0-9.]+$/)||(A=d.asn1.x509.OID.name2oid(x)),A!==""){for(var F=0;F<_.length;F++)if(_[F].oid===A)return _[F]}},this.getExtBasicConstraints=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("basicConstraints");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"basicConstraints"};if(_&&(F.critical=!0),x==="3000")return F;if(x==="30030101ff")return F.cA=!0,F;if(x.substr(0,12)==="30060101ff02"){var T=n(x,10),R=parseInt(T,16);return F.cA=!0,F.pathLen=R,F}throw new Error("hExtV parse error: "+x)},this.getExtNameConstraints=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("nameConstraints");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"nameConstraints"};_&&(F.critical=!0);for(var T=i(x,0),R=0;R<T.length;R++){for(var M=[],P=i(x,T[R]),N=0;N<P.length;N++){var D=a(x,P[N]),k=this.getGeneralSubtree(D);M.push(k)}var W=x.substr(T[R],2);W=="a0"?F.permit=M:W=="a1"&&(F.exclude=M)}return F},this.getGeneralSubtree=function(x){var _=i(x,0),A=_.length;if(A<1||2<A)throw new Error("wrong num elements");for(var F=this.getGeneralName(a(x,_[0])),T=1;T<A;T++){var R=x.substr(_[T],2),M=n(x,_[T]),P=parseInt(M,16);R=="80"&&(F.min=P),R=="81"&&(F.max=P)}return F},this.getExtKeyUsage=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("keyUsage");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"keyUsage"};return _&&(F.critical=!0),F.names=this.getExtKeyUsageString(x).split(","),F},this.getExtKeyUsageBin=function(x){if(x===void 0){var _=this.getExtInfo("keyUsage");if(_===void 0)return"";x=a(this.hex,_.vidx)}if(x.length!=8&&x.length!=10)throw new Error("malformed key usage value: "+x);var A="000000000000000"+parseInt(x.substr(6),16).toString(2);return x.length==8&&(A=A.slice(-8)),x.length==10&&(A=A.slice(-16)),A=A.replace(/0+$/,""),A==""&&(A="0"),A},this.getExtKeyUsageString=function(x){for(var _=this.getExtKeyUsageBin(x),A=new Array,F=0;F<_.length;F++)_.substr(F,1)=="1"&&A.push(J.KEYUSAGE_NAME[F]);return A.join(",")},this.getExtSubjectKeyIdentifier=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("subjectKeyIdentifier");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"subjectKeyIdentifier"};_&&(F.critical=!0);var T=n(x,0);return F.kid={hex:T},F},this.getExtAuthorityKeyIdentifier=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("authorityKeyIdentifier");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"authorityKeyIdentifier"};_&&(F.critical=!0);for(var T=i(x,0),R=0;R<T.length;R++){var M=x.substr(T[R],2);if(M==="80"&&(F.kid={hex:n(x,T[R])}),M==="a1"){var P=a(x,T[R]),N=this.getGeneralNames(P);F.issuer=N[0].dn}M==="82"&&(F.sn={hex:n(x,T[R])})}return F},this.getExtExtKeyUsage=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("extKeyUsage");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"extKeyUsage",array:[]};_&&(F.critical=!0);for(var T=i(x,0),R=0;R<T.length;R++)F.array.push(f(n(x,T[R])));return F},this.getExtExtKeyUsageName=function(){var x=this.getExtInfo("extKeyUsage");if(x===void 0)return x;var _=new Array,A=a(this.hex,x.vidx);if(A==="")return _;for(var F=i(A,0),T=0;T<F.length;T++)_.push(f(n(A,F[T])));return _},this.getExtSubjectAltName=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("subjectAltName");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"subjectAltName",array:[]};return _&&(F.critical=!0),F.array=this.getGeneralNames(x),F},this.getExtIssuerAltName=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("issuerAltName");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"issuerAltName",array:[]};return _&&(F.critical=!0),F.array=this.getGeneralNames(x),F},this.getGeneralNames=function(x){for(var _=i(x,0),A=[],F=0;F<_.length;F++){var T=this.getGeneralName(a(x,_[F]));T!==void 0&&A.push(T)}return A},this.getGeneralName=function(x){var _=x.substr(0,2),A=n(x,0),F=ze(A);if(_=="81")return{rfc822:F};if(_=="82")return{dns:F};if(_=="86")return{uri:F};if(_=="87")return{ip:pi(A)};if(_=="a4")return{dn:this.getX500Name(A)};if(_=="a0")return{other:this.getOtherName(x)}},this.getExtSubjectAltName2=function(){var x,_,A,F=this.getExtInfo("subjectAltName");if(F===void 0)return F;for(var T=new Array,R=a(this.hex,F.vidx),M=i(R,0),P=0;P<M.length;P++)A=R.substr(M[P],2),x=n(R,M[P]),A==="81"&&(_=de(x),T.push(["MAIL",_])),A==="82"&&(_=de(x),T.push(["DNS",_])),A==="84"&&(_=J.hex2dn(x,0),T.push(["DN",_])),A==="86"&&(_=de(x),T.push(["URI",_])),A==="87"&&(_=pi(x),T.push(["IP",_]));return T},this.getExtCRLDistributionPoints=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("cRLDistributionPoints");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"cRLDistributionPoints",array:[]};_&&(F.critical=!0);for(var T=i(x,0),R=0;R<T.length;R++){var M=a(x,T[R]);F.array.push(this.getDistributionPoint(M))}return F},this.getDistributionPoint=function(x){for(var _={},A=i(x,0),F=0;F<A.length;F++){var T=x.substr(A[F],2),R=a(x,A[F]);T=="a0"&&(_.dpname=this.getDistributionPointName(R))}return _},this.getDistributionPointName=function(x){for(var _={},A=i(x,0),F=0;F<A.length;F++){var T=x.substr(A[F],2),R=a(x,A[F]);T=="a0"&&(_.full=this.getGeneralNames(R))}return _},this.getExtCRLDistributionPointsURI=function(){var x=this.getExtCRLDistributionPoints();if(x==null)return x;for(var _=x.array,A=[],F=0;F<_.length;F++)try{_[F].dpname.full[0].uri!=null&&A.push(_[F].dpname.full[0].uri)}catch{}return A},this.getExtAIAInfo=function(){var x=this.getExtInfo("authorityInfoAccess");if(x===void 0)return x;for(var _={ocsp:[],caissuer:[]},A=i(this.hex,x.vidx),F=0;F<A.length;F++){var T=o(this.hex,A[F],[0],"06"),R=o(this.hex,A[F],[1],"86");T==="2b06010505073001"&&_.ocsp.push(de(R)),T==="2b06010505073002"&&_.caissuer.push(de(R))}return _},this.getExtAuthorityInfoAccess=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("authorityInfoAccess");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"authorityInfoAccess",array:[]};_&&(F.critical=!0);for(var T=i(x,0),R=0;R<T.length;R++){var M=l(x,T[R],[0],"06"),P=o(x,T[R],[1],"86"),N=de(P);if(M=="2b06010505073001")F.array.push({ocsp:N});else if(M=="2b06010505073002")F.array.push({caissuer:N});else throw new Error("unknown method: "+M)}return F},this.getExtCertificatePolicies=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("certificatePolicies");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"certificatePolicies",array:[]};_&&(F.critical=!0);for(var T=i(x,0),R=0;R<T.length;R++){var M=a(x,T[R]),P=this.getPolicyInformation(M);F.array.push(P)}return F},this.getPolicyInformation=function(x){var _={},A=o(x,0,[0],"06");_.policyoid=f(A);var F=c(x,0,[1],"30");if(F!=-1){_.array=[];for(var T=i(x,F),R=0;R<T.length;R++){var M=a(x,T[R]),P=this.getPolicyQualifierInfo(M);_.array.push(P)}}return _},this.getOtherName=function(x){var _={},A=i(x,0),F=o(x,A[0],[],"06"),T=o(x,A[1],[]);return _.oid=d.asn1.ASN1Util.oidHexToInt(F),_.obj=s(T),_},this.getPolicyQualifierInfo=function(x){var _={},A=o(x,0,[0],"06");if(A==="2b06010505070201"){var F=l(x,0,[1],"16");_.cps=ze(F)}else if(A==="2b06010505070202"){var T=u(x,0,[1],"30");_.unotice=this.getUserNotice(T)}return _},this.getUserNotice=function(x){for(var _={},A=i(x,0),F=0;F<A.length;F++){var T=a(x,A[F]);T.substr(0,2)!="30"&&(_.exptext=this.getDisplayText(T))}return _},this.getDisplayText=function(x){var _={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},A={};return A.type=_[x.substr(0,2)],A.str=ze(n(x,0)),A},this.getExtCRLNumber=function(x,_){var A={extname:"cRLNumber"};if(_&&(A.critical=!0),x.substr(0,2)=="02")return A.num={hex:n(x,0)},A;throw new Error("hExtV parse error: "+x)},this.getExtCRLReason=function(x,_){var A={extname:"cRLReason"};if(_&&(A.critical=!0),x.substr(0,2)=="0a")return A.code=parseInt(n(x,0),16),A;throw new Error("hExtV parse error: "+x)},this.getExtOcspNonce=function(x,_){var A={extname:"ocspNonce"};_&&(A.critical=!0);var F=n(x,0);return A.hex=F,A},this.getExtOcspNoCheck=function(x,_){var A={extname:"ocspNoCheck"};return _&&(A.critical=!0),A},this.getExtAdobeTimeStamp=function(x,_){if(x===void 0&&_===void 0){var A=this.getExtInfo("adobeTimeStamp");if(A===void 0)return;x=a(this.hex,A.vidx),_=A.critical}var F={extname:"adobeTimeStamp"};_&&(F.critical=!0);var T=i(x,0);if(T.length>1){var R=a(x,T[1]),M=this.getGeneralName(R);M.uri!=null&&(F.uri=M.uri)}if(T.length>2){var P=a(x,T[2]);P=="0101ff"&&(F.reqauth=!0),P=="010100"&&(F.reqauth=!1)}return F};var S=function(x){var _={};try{var A=x.seq[0].oid,F=d.asn1.x509.OID.name2oid(A);_.type=d.asn1.x509.OID.oid2atype(F);var T=x.seq[1];if(T.utf8str!=null)_.ds="utf8",_.value=T.utf8str.str;else if(T.numstr!=null)_.ds="num",_.value=T.numstr.str;else if(T.telstr!=null)_.ds="tel",_.value=T.telstr.str;else if(T.prnstr!=null)_.ds="prn",_.value=T.prnstr.str;else if(T.ia5str!=null)_.ds="ia5",_.value=T.ia5str.str;else if(T.visstr!=null)_.ds="vis",_.value=T.visstr.str;else if(T.bmpstr!=null)_.ds="bmp",_.value=T.bmpstr.str;else throw"error";return _}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},E=function(x){try{return x.set.map(function(_){return S(_)})}catch(_){throw new Error("improper ASN.1 parsed RDN: "+_)}},C=function(x){try{return x.seq.map(function(_){return E(_)})}catch(_){throw new Error("improper ASN.1 parsed X500Name: "+_)}};this.getX500NameRule=function(x){for(var _=!0,A=!0,F=!1,T="",R="",M=null,P=[],N=0;N<x.length;N++)for(var D=x[N],k=0;k<D.length;k++)P.push(D[k]);for(var N=0;N<P.length;N++){var W=P[N],U=W.ds,$=W.value,Y=W.type;if(T+=":"+U,U!="prn"&&U!="utf8"&&U!="ia5")return"mixed";if(U=="ia5"){if(Y!="CN")return"mixed";if(d.lang.String.isMail($))continue;return"mixed"}if(Y=="C"){if(U=="prn")continue;return"mixed"}if(R+=":"+U,M==null)M=U;else if(M!==U)return"mixed"}return M??"prn"},this.getAttrTypeAndValue=function(x){var _=s(x);return S(_)},this.getRDN=function(x){var _=s(x);return E(_)},this.getX500NameArray=function(x){var _=s(x);return C(_)},this.getX500Name=function(x){var _=this.getX500NameArray(x),A=this.dnarraytostr(_);return{array:_,str:A}},this.readCertPEM=function(x){this.readCertHex(w(x))},this.readCertHex=function(x){this.hex=x,this.getVersion();try{p(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(x){var _={};return _.version=this.getVersion(),_.serial={hex:this.getSerialNumberHex()},_.sigalg=this.getSignatureAlgorithmField(),_.issuer=this.getIssuer(),_.notbefore=this.getNotBefore(),_.notafter=this.getNotAfter(),_.subject=this.getSubject(),_.sbjpubkey=De(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(_.ext=this.getExtParamArray()),_.sighex=this.getSignatureValueHex(),typeof x=="object"&&(x.tbshex==!0&&(_.tbshex=u(this.hex,0,[0])),x.nodnarray==!0&&(delete _.issuer.array,delete _.subject.array)),_},this.getExtParamArray=function(x){if(x==null){var _=c(this.hex,0,[0,"[3]"]);_!=-1&&(x=g(this.hex,0,[0,"[3]",0],"30"))}for(var A=[],F=i(x,0),T=0;T<F.length;T++){var R=a(x,F[T]),M=this.getExtParam(R);M!=null&&A.push(M)}return A},this.getExtParam=function(x){var _={},A=i(x,0),F=A.length;if(F!=2&&F!=3)throw new Error("wrong number elements in Extension: "+F+" "+x);var T=b(o(x,0,[0],"06")),R=!1;F==3&&u(x,0,[1])=="0101ff"&&(R=!0);var M=u(x,0,[F-1,0]),P=void 0;if(T=="2.5.29.14"?P=this.getExtSubjectKeyIdentifier(M,R):T=="2.5.29.15"?P=this.getExtKeyUsage(M,R):T=="2.5.29.17"?P=this.getExtSubjectAltName(M,R):T=="2.5.29.18"?P=this.getExtIssuerAltName(M,R):T=="2.5.29.19"?P=this.getExtBasicConstraints(M,R):T=="2.5.29.30"?P=this.getExtNameConstraints(M,R):T=="2.5.29.31"?P=this.getExtCRLDistributionPoints(M,R):T=="2.5.29.32"?P=this.getExtCertificatePolicies(M,R):T=="2.5.29.35"?P=this.getExtAuthorityKeyIdentifier(M,R):T=="2.5.29.37"?P=this.getExtExtKeyUsage(M,R):T=="1.3.6.1.5.5.7.1.1"?P=this.getExtAuthorityInfoAccess(M,R):T=="2.5.29.20"?P=this.getExtCRLNumber(M,R):T=="2.5.29.21"?P=this.getExtCRLReason(M,R):T=="1.3.6.1.5.5.7.48.1.2"?P=this.getExtOcspNonce(M,R):T=="1.3.6.1.5.5.7.48.1.5"?P=this.getExtOcspNoCheck(M,R):T=="1.2.840.113583.1.1.9.1"&&(P=this.getExtAdobeTimeStamp(M,R)),P!=null)return P;var N={extname:T,extn:M};return R&&(N.critical=!0),N},this.findExt=function(x,_){for(var A=0;A<x.length;A++)if(x[A].extname==_)return x[A];return null},this.updateExtCDPFullURI=function(x,_){var A=this.findExt(x,"cRLDistributionPoints");if(A!=null&&A.array!=null){for(var F=A.array,T=0;T<F.length;T++)if(F[T].dpname!=null&&F[T].dpname.full!=null)for(var R=F[T].dpname.full,M=0;M<R.length;M++){var P=R[T];P.uri!=null&&(P.uri=_)}}},this.updateExtAIAOCSP=function(x,_){var A=this.findExt(x,"authorityInfoAccess");if(A!=null&&A.array!=null)for(var F=A.array,T=0;T<F.length;T++)F[T].ocsp!=null&&(F[T].ocsp=_)},this.updateExtAIACAIssuer=function(x,_){var A=this.findExt(x,"authorityInfoAccess");if(A!=null&&A.array!=null)for(var F=A.array,T=0;T<F.length;T++)F[T].caissuer!=null&&(F[T].caissuer=_)},this.dnarraytostr=function(x){function _(F){return F.map(function(T){return A(T).replace(/\+/,"\\+")}).join("+")}function A(F){return F.type+"="+F.value}return"/"+x.map(function(F){return _(F).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var x=function(Ie){var me=JSON.stringify(Ie.array).replace(/[\[\]\{\}\"]/g,"");return me},_=function(Ie){for(var me="",Ee=Ie.array,ve=0;ve<Ee.length;ve++){var Ce=Ee[ve];if(me+="    policy oid: "+Ce.policyoid+`
`,Ce.array!==void 0)for(var nt=0;nt<Ce.array.length;nt++){var It=Ce.array[nt];It.cps!==void 0&&(me+="    cps: "+It.cps+`
`)}}return me},A=function(Ie){for(var me="",Ee=Ie.array,ve=0;ve<Ee.length;ve++){var Ce=Ee[ve];try{Ce.dpname.full[0].uri!==void 0&&(me+="    "+Ce.dpname.full[0].uri+`
`)}catch{}try{Ce.dname.full[0].dn.hex!==void 0&&(me+="    "+J.hex2dn(Ce.dpname.full[0].dn.hex)+`
`)}catch{}}return me},F=function(Ie){for(var me="",Ee=Ie.array,ve=0;ve<Ee.length;ve++){var Ce=Ee[ve];Ce.caissuer!==void 0&&(me+="    caissuer: "+Ce.caissuer+`
`),Ce.ocsp!==void 0&&(me+="    ocsp: "+Ce.ocsp+`
`)}return me},T=J,R,M,P;if(R=`Basic Fields
`,R+="  serial number: "+this.getSerialNumberHex()+`
`,R+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,R+="  issuer: "+this.getIssuerString()+`
`,R+="  notBefore: "+this.getNotBefore()+`
`,R+="  notAfter: "+this.getNotAfter()+`
`,R+="  subject: "+this.getSubjectString()+`
`,R+=`  subject public key info: 
`,M=this.getPublicKey(),R+="    key algorithm: "+M.type+`
`,M.type==="RSA"&&(R+="    n="+rn(M.n.toString(16)).substr(0,16)+`...
`,R+="    e="+rn(M.e.toString(16))+`
`),P=this.aExtInfo,P!=null){R+=`X509v3 Extensions:
`;for(var N=0;N<P.length;N++){var D=P[N],k=d.asn1.x509.OID.oid2name(D.oid);k===""&&(k=D.oid);var W="";if(D.critical===!0&&(W="CRITICAL"),R+="  "+k+" "+W+`:
`,k==="basicConstraints"){var U=this.getExtBasicConstraints();U.cA===void 0?R+=`    {}
`:(R+="    cA=true",U.pathLen!==void 0&&(R+=", pathLen="+U.pathLen),R+=`
`)}else if(k==="keyUsage")R+="    "+this.getExtKeyUsageString()+`
`;else if(k==="subjectKeyIdentifier")R+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(k==="authorityKeyIdentifier"){var $=this.getExtAuthorityKeyIdentifier();$.kid!==void 0&&(R+="    kid="+$.kid.hex+`
`)}else if(k==="extKeyUsage"){var Y=this.getExtExtKeyUsage().array;R+="    "+Y.join(", ")+`
`}else if(k==="subjectAltName"){var Q=x(this.getExtSubjectAltName());R+="    "+Q+`
`}else if(k==="cRLDistributionPoints"){var _e=this.getExtCRLDistributionPoints();R+=A(_e)}else if(k==="authorityInfoAccess"){var he=this.getExtAuthorityInfoAccess();R+=F(he)}else k==="certificatePolicies"&&(R+=_(this.getExtCertificatePolicies()))}}return R+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,R+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,R},typeof t=="string"&&(t.indexOf("-----BEGIN")!=-1?this.readCertPEM(t):d.lang.String.isHex(t)&&this.readCertHex(t))}J.hex2dn=function(t,e){e===void 0&&(e=0);var i=new J,n=j.getTLV(t,e),r=i.getX500Name(t);return r.str};J.hex2rdn=function(t,e){if(e===void 0&&(e=0),t.substr(e,2)!=="31")throw new Error("malformed RDN");for(var i=new Array,n=j.getChildIdx(t,e),r=0;r<n.length;r++)i.push(J.hex2attrTypeValue(t,n[r]));return i=i.map(function(s){return s.replace("+","\\+")}),i.join("+")};J.hex2attrTypeValue=function(t,e){var i=j,n=i.getV;if(e===void 0&&(e=0),t.substr(e,2)!=="30")throw new Error("malformed attribute type and value");var r=i.getChildIdx(t,e);r.length!==2||t.substr(r[0],2);var s=n(t,r[0]),a=d.asn1.ASN1Util.oidHexToInt(s),o=d.asn1.x509.OID.oid2atype(a),l=n(t,r[1]),u=ze(l);return o+"="+u};J.getPublicKeyFromCertHex=function(t){var e=new J;return e.readCertHex(t),e.getPublicKey()};J.getPublicKeyFromCertPEM=function(t){var e=new J;return e.readCertPEM(t),e.getPublicKey()};J.getPublicKeyInfoPropOfCertPEM=function(t){var e=j,i=e.getVbyList,n={},r,s,a;return n.algparam=null,r=new J,r.readCertPEM(t),s=r.getPublicKeyHex(),n.keyhex=i(s,0,[1],"03").substr(2),n.algoid=i(s,0,[0,0],"06"),n.algoid==="2a8648ce3d0201"&&(n.algparam=i(s,0,[0,1],"06")),n};J.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Wd=function(t){var e=d,i=e.lang.String.isHex,n=j,r=n.getV,s=n.getTLV,a=n.getVbyList,o=n.getTLVbyList,l=n.getTLVbyListEx,u=n.getIdxbyList,g=n.getIdxbyListEx,p=n.getChildIdx,c=new J;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var h=u(this.hex,0,[0,0]),m=this.hex.substr(h,2);if(m=="02")this.posSigAlg=1;else if(m=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+m);var f=u(this.hex,0,[0,this.posSigAlg+3]),b=this.hex.substr(f,2);if(b=="17"||b=="18"){var v,w;v=u(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,v!=-1&&(w=this.hex.substr(v,2),w=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(b=="30")this.posRevCert=this.posSigAlg+3;else if(b=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+b)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(a(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var h=o(this.hex,0,[0,this.posSigAlg],"30");return c.getAlgorithmIdentifierName(h)},this.getIssuer=function(){return c.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return o(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var h=a(this.hex,0,[0,this.posSigAlg+2]);return result=ze(h)},this.getNextUpdate=function(){var h=u(this.hex,0,[0,this.posSigAlg+3]),m=this.hex.substr(h,2);return m!="17"&&m!="18"?null:ze(r(this.hex,h))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var h=[],m=u(this.hex,0,[0,this.posRevCert]),f=p(this.hex,m),b=0;b<f.length;b++){var v=s(this.hex,f[b]);h.push(this.getRevCert(v))}return h},this.getRevCert=function(h){var m={},f=p(h,0);return m.sn={hex:a(h,0,[0],"02")},m.date=ze(a(h,0,[1])),f.length==3&&(m.ext=c.getExtParamArray(o(h,0,[2]))),m},this.findRevCert=function(h){var m=new J(h),f=m.getSerialNumberHex();return this.findRevCertBySN(f)},this.findRevCertBySN=function(h){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var m=this.parsed.revcert,f=0;f<m.length;f++)if(h==m[f].sn.hex)return m[f];return null},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(h){var m=this.getSignatureAlgorithmField(),f=this.getSignatureValueHex(),b=o(this.hex,0,[0],"30"),v=new d.crypto.Signature({alg:m});return v.init(h),v.updateHex(b),v.verify(f)},this.getParam=function(h){var m={},f=this.getVersion();f!=null&&(m.version=f),m.sigalg=this.getSignatureAlgorithmField(),m.issuer=this.getIssuer(),m.thisupdate=this.getThisUpdate();var b=this.getNextUpdate();b!=null&&(m.nextupdate=b);var v=this.getRevCertArray();v!=null&&(m.revcert=v);var w=g(this.hex,0,[0,"[0]"]);if(w!=-1){var y=l(this.hex,0,[0,"[0]",0]);m.ext=c.getExtParamArray(y)}return m.sighex=this.getSignatureValueHex(),this.parsed=m,typeof h=="object"&&(h.tbshex==!0&&(m.tbshex=o(this.hex,0,[0])),h.nodnarray==!0&&delete m.issuer.array),m},typeof t=="string"&&(i(t)?this.hex=t:t.match(/-----BEGIN X509 CRL/)&&(this.hex=Fe(t)),this._setPos())};(typeof d>"u"||!d)&&(d={});(typeof d.jws>"u"||!d.jws)&&(d.jws={});d.jws.JWS=function(){var t=d,e=t.jws.JWS,i=e.isSafeJSONString;this.parseJWS=function(n,r){if(!(this.parsedJWS!==void 0&&(r||this.parsedJWS.sigvalH!==void 0))){var s=n.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(s==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var a=s[1],o=s[2],l=s[3],u=a+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=a,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=l,this.parsedJWS.si=u,!r){var g=ye(l),p=Le(g,16);this.parsedJWS.sigvalH=g,this.parsedJWS.sigvalBI=p}var c=ot(a),h=ot(o);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=h,!i(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}};d.jws.JWS.sign=function(t,e,i,n,r){var s=d,a=s.jws,o=a.JWS,l=o.readSafeJSONString,u=o.isSafeJSONString,g=s.crypto,p=g.ECDSA,c=g.Mac,h=g.Signature,m=JSON,f,b,v;if(typeof e!="string"&&typeof e!="object")throw"spHeader must be JSON string or object: "+e;if(typeof e=="object"&&(b=e,f=m.stringify(b)),typeof e=="string"){if(f=e,!u(f))throw"JWS Head is not safe JSON string: "+f;b=l(f)}if(v=i,typeof i=="object"&&(v=m.stringify(i)),(t==""||t==null)&&b.alg!==void 0&&(t=b.alg),t!=""&&t!=null&&b.alg===void 0&&(b.alg=t,f=m.stringify(b)),t!==b.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+b.alg;var w=null;if(o.jwsalg2sigalg[t]===void 0)throw"unsupported alg name: "+t;w=o.jwsalg2sigalg[t];var y=$t(f),S=$t(v),E=y+"."+S,C="";if(w.substr(0,4)=="Hmac"){if(n===void 0)throw"mac key shall be specified for HS* alg";var x=new c({alg:w,prov:"cryptojs",pass:n});x.updateString(E),C=x.doFinal()}else if(w.indexOf("withECDSA")!=-1){var _=new h({alg:w});_.init(n,r),_.updateString(E);var A=_.sign();C=d.crypto.ECDSA.asn1SigToConcatSig(A)}else if(w!="none"){var _=new h({alg:w});_.init(n,r),_.updateString(E),C=_.sign()}var F=Te(C);return E+"."+F};d.jws.JWS.verify=function(t,e,i){var n=d,r=n.jws,s=r.JWS,a=s.readSafeJSONString,o=n.crypto,l=o.ECDSA,u=o.Mac,g=o.Signature,p;if(typeof K!==void 0&&(p=K),!hn(t))return!1;var c=t.split(".");if(c.length!==3)return!1;var h=c[0],m=c[1],f=h+"."+m,b=ye(c[2]),v=a(ot(c[0])),w=null,y=null;if(v.alg===void 0)throw"algorithm not specified in header";if(w=v.alg,y=w.substr(0,2),i!=null&&Object.prototype.toString.call(i)==="[object Array]"&&i.length>0){var S=":"+i.join(":")+":";if(S.indexOf(":"+w+":")==-1)throw"algorithm '"+w+"' not accepted in the list"}if(w!="none"&&e===null)throw"key shall be specified to verify.";if(typeof e=="string"&&e.indexOf("-----BEGIN ")!=-1&&(e=te.getKey(e)),(y=="RS"||y=="PS")&&!(e instanceof p))throw"key shall be a RSAKey obj for RS* and PS* algs";if(y=="ES"&&!(e instanceof l))throw"key shall be a ECDSA obj for ES* algs";w=="none";var E=null;if(s.jwsalg2sigalg[v.alg]===void 0)throw"unsupported alg name: "+w;if(E=s.jwsalg2sigalg[w],E=="none")throw"not supported";if(E.substr(0,4)=="Hmac"){var C=null;if(e===void 0)throw"hexadecimal key shall be specified for HMAC";var x=new u({alg:E,pass:e});return x.updateString(f),C=x.doFinal(),b==C}else if(E.indexOf("withECDSA")!=-1){var _=null;try{_=l.concatSigToASN1Sig(b)}catch{return!1}var A=new g({alg:E});return A.init(e),A.updateString(f),A.verify(_)}else{var A=new g({alg:E});return A.init(e),A.updateString(f),A.verify(b)}};d.jws.JWS.parse=function(t){var e=t.split("."),i={},n,r,s;if(e.length!=2&&e.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return n=e[0],r=e[1],e.length==3&&(s=e[2]),i.headerObj=d.jws.JWS.readSafeJSONString(ot(n)),i.payloadObj=d.jws.JWS.readSafeJSONString(ot(r)),i.headerPP=JSON.stringify(i.headerObj,null,"  "),i.payloadObj==null?i.payloadPP=ot(r):i.payloadPP=JSON.stringify(i.payloadObj,null,"  "),s!==void 0&&(i.sigHex=ye(s)),i};d.jws.JWS.verifyJWT=function(t,e,i){var n=d,r=n.jws,s=r.JWS,a=s.readSafeJSONString,o=s.inArray,l=s.includedArray;if(!hn(t))return!1;var u=t.split(".");if(u.length!=3)return!1;var g=u[0],p=u[1],c=g+"."+p,h=ye(u[2]),m=a(ot(g)),f=a(ot(p));if(m.alg===void 0)return!1;if(i.alg===void 0)throw"acceptField.alg shall be specified";if(!o(m.alg,i.alg)||f.iss!==void 0&&typeof i.iss=="object"&&!o(f.iss,i.iss)||f.sub!==void 0&&typeof i.sub=="object"&&!o(f.sub,i.sub))return!1;if(f.aud!==void 0&&typeof i.aud=="object"){if(typeof f.aud=="string"){if(!o(f.aud,i.aud))return!1}else if(typeof f.aud=="object"&&!l(f.aud,i.aud))return!1}var b=r.IntDate.getNow();return i.verifyAt!==void 0&&typeof i.verifyAt=="number"&&(b=i.verifyAt),(i.gracePeriod===void 0||typeof i.gracePeriod!="number")&&(i.gracePeriod=0),!(f.exp!==void 0&&typeof f.exp=="number"&&f.exp+i.gracePeriod<b||f.nbf!==void 0&&typeof f.nbf=="number"&&b<f.nbf-i.gracePeriod||f.iat!==void 0&&typeof f.iat=="number"&&b<f.iat-i.gracePeriod||f.jti!==void 0&&i.jti!==void 0&&f.jti!==i.jti||!s.verify(t,e,i.alg))};d.jws.JWS.includedArray=function(t,e){var i=d.jws.JWS.inArray;if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var n=0;n<t.length;n++)if(!i(t[n],e))return!1;return!0};d.jws.JWS.inArray=function(t,e){if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1};d.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};d.jws.JWS.isSafeJSONString=function(t,e,i){var n=null;try{return n=ds(t),typeof n!="object"||n.constructor===Array?0:(e&&(e[i]=n),1)}catch{return 0}};d.jws.JWS.readSafeJSONString=function(t){var e=null;try{return e=ds(t),typeof e!="object"||e.constructor===Array?null:e}catch{return null}};d.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(e==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]};d.jws.JWS.getJWKthumbprint=function(t){if(t.kty!=="RSA"&&t.kty!=="EC"&&t.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var e="{";if(t.kty==="RSA"){if(typeof t.n!="string"||typeof t.e!="string")throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if(t.kty==="EC"){if(typeof t.crv!="string"||typeof t.x!="string"||typeof t.y!="string")throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if(t.kty==="oct"){if(typeof t.k!="string")throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var i=et(e),n=d.crypto.Util.hashHex(i,"sha256"),r=Te(n);return r};d.jws.IntDate={};d.jws.IntDate.get=function(t){var e=d.jws.IntDate,i=e.getNow,n=e.getZulu;if(t=="now")return i();if(t=="now + 1hour")return i()+60*60;if(t=="now + 1day")return i()+60*60*24;if(t=="now + 1month")return i()+60*60*24*30;if(t=="now + 1year")return i()+60*60*24*365;if(t.match(/Z$/))return n(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t};d.jws.IntDate.getZulu=function(t){return ms(t)};d.jws.IntDate.getNow=function(){var t=~~(new Date/1e3);return t};d.jws.IntDate.intDate2UTCString=function(t){var e=new Date(t*1e3);return e.toUTCString()};d.jws.IntDate.intDate2Zulu=function(t){var e=new Date(t*1e3),i=("0000"+e.getUTCFullYear()).slice(-4),n=("00"+(e.getUTCMonth()+1)).slice(-2),r=("00"+e.getUTCDate()).slice(-2),s=("00"+e.getUTCHours()).slice(-2),a=("00"+e.getUTCMinutes()).slice(-2),o=("00"+e.getUTCSeconds()).slice(-2);return i+n+r+s+a+o+"Z"};(typeof d>"u"||!d)&&(d={});(typeof d.jws>"u"||!d.jws)&&(d.jws={});d.jws.JWSJS=function(){var t=d,e=t.jws,i=e.JWS,n=i.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(r){this.init();var s=r.split(".");if(s.length!=3)throw"malformed input JWS";this.aHeader.push(s[0]),this.sPayload=s[1],this.aSignature.push(s[2])},this.addSignature=function(r,s,a,o){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var l=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var u=d.jws.JWS.sign(r,s,this.sPayload,a,o),g=u.split("."),p=g[0],c=g[2];this.aHeader.push(g[0]),this.aSignature.push(g[2])}catch(h){throw this.aHeader.length>l&&this.aHeader.pop(),this.aSignature.length>l&&this.aSignature.pop(),"addSignature failed: "+h}},this.verifyAll=function(r){if(this.aHeader.length!==r.length||this.aSignature.length!==r.length)return!1;for(var s=0;s<r.length;s++){var a=r[s];if(a.length!==2)return!1;var o=this.verifyNth(s,a[0],a[1]);if(o===!1)return!1}return!0},this.verifyNth=function(r,s,a){if(this.aHeader.length<=r||this.aSignature.length<=r)return!1;var o=this.aHeader[r],l=this.aSignature[r],u=o+"."+this.sPayload+"."+l,g=!1;try{g=i.verify(u,s,a)}catch{return!1}return g},this.readJWSJS=function(r){if(typeof r=="string"){var s=n(r);if(s==null)throw"argument is not safe JSON object string";this.aHeader=s.headers,this.sPayload=s.payload,this.aSignature=s.signatures}else try{if(r.headers.length>0)this.aHeader=r.headers;else throw"malformed header";if(typeof r.payload=="string")this.sPayload=r.payload;else throw"malformed signatures";if(r.signatures.length>0)this.aSignature=r.signatures;else throw"malformed signatures"}catch(a){throw"malformed JWS-JS JSON object: "+a}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};z.SecureRandom=Et;z.rng_seed_time=ln;z.BigInteger=O;z.RSAKey=K;z.ECDSA=d.crypto.ECDSA;z.DSA=d.crypto.DSA;z.Signature=d.crypto.Signature;z.MessageDigest=d.crypto.MessageDigest;z.Mac=d.crypto.Mac;z.Cipher=d.crypto.Cipher;z.KEYUTIL=te;z.ASN1HEX=j;z.X509=J;z.X509CRL=Wd;z.CryptoJS=q;z.b64tohex=Ht;z.b64toBA=ss;z.ECFieldElementFp=Pe;z.ECPointFp=se;z.ECCurveFp=gt;z.stoBA=cs;z.BAtos=hs;z.BAtohex=yi;z.stohex=Ke;z.stob64=Rd;z.stob64u=Od;z.b64utos=Dd;z.b64tob64u=zt;z.b64utob64=Xt;z.hex2b64=pt;z.hextob64u=Te;z.b64utohex=ye;z.utf8tob64u=$t;z.b64utoutf8=ot;z.utf8tob64=kd;z.b64toutf8=Nd;z.utf8tohex=wi;z.hextoutf8=de;z.hextorstr=ze;z.rstrtohex=et;z.hextob64=fs;z.hextob64nl=ps;z.b64nltohex=gs;z.hextopem=De;z.pemtohex=Fe;z.hextoArrayBuffer=jd;z.ArrayBuffertohex=Ld;z.zulutomsec=un;z.zulutosec=ms;z.zulutodate=zd;z.datetozulu=Hd;z.uricmptohex=xi;z.hextouricmp=Si;z.ipv6tohex=tn;z.hextoipv6=nn;z.hextoip=pi;z.iptohex=dn;z.ucs2hextoutf8=cn;z.encodeURIComponentAll=_i;z.newline_toUnix=Vd;z.newline_toDos=qd;z.hextoposhex=rn;z.intarystrtohex=Ud;z.strdiffidx=Kd;z.oidtohex=bs;z.hextooid=Ei;z.strpad=gi;z.bitstrtoint=ys;z.inttobitstr=ws;z.bitstrtobinstr=xs;z.binstrtobitstr=Gd;z.isBase64URLDot=hn;z.namearraytobinstr=mi;z.extendClass=B;z.KJUR=d;z.crypto=d.crypto;z.asn1=d.asn1;z.jws=d.jws;z.lang=d.lang});var Fs=V((Ph,Is)=>{var $d=As(),Jd=$d.jws.JWS;Is.exports=class{constructor(){this.accessToken=null,this.serviceAccountKey={private_key:`-----BEGIN PRIVATE KEY-----
MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCziXpsfM5psnbj
Iwe7VwKixx9wRGPPl6FfGQyP+Oa45XCu/iPsMHNxGn0zAlhZAViguAkM6SxTdYyx
NHsltAZPtug4A7qE3ZBZew+ZbMYZZjQ/koU6tSX+YRmTpqr+bFWc+nX90/9XezfR
t1XX7DPpN8almWQOXnHB0ZeiDJ1kWbD3ZfAamAnE6Ry9ESPo/Pe5FnjMs2LYHSy/
f75VmIuCuxjz/WVmeBTNbgmetugvymdvavLrxSZ6hdB6Ewd0dMW0Zh3qjLArb/XR
DAICntfO33+/r/q751jtiBzh04o2zQQmGDJh7DbFKUDvnevkkI+/6zkSc+ff/QR7
uXcVjJaLAgMBAAECggEAAL50Ydgh+2gk6bBTVE4etj9lRc/3Tw8NptkWcGG4Fncy
pQ3ZZtRwkXPX7vibX6+d4ot3irSVON4rsF1wBcWLobilT7KuiwoeSXCi9qA46DZS
oxqEL6yFWaQSyzOyCEVLgqsovbk9mOsP8AJkVaxLCjQ4iTkiyJPjU1wjsgCjqlN/
CWNyZ+2f5fgrlAh7a5Bg/LtHzWnp/wjQ2U1Kp1mUgLZ7EfV2JG22kE3zQggKynIW
ohKOckJpMINbObp4idD8Op0/gbIobreoSimAKWxto/AHOykqiyhsUsx81S7I8mXq
EXn5a+MLfEh8o9hAr5UY/4mm7AH1LgX45Oaz9jkkyQKBgQDqnQVFFaT50KJZxCkO
iUlwBqbvA5FSuT8n12/5drYZ7zFpa+EglZ4GzfU5aGCp67bXoKbpjR05tTAYAL6p
E1PFlqnfLXtv/KQlZ5uPY+Oanahg+TMHX1b1gHwi2uTFj6yD3hYl5nlTOd12t6N1
+aTO1K1KAg/wRhuqg8ipHfQJFQKBgQDD5y+1cGJTRBGXSJJpoZuUHeqGCLF/8R+T
rRSGL1Q9lqaS+N0D4DSOuNOWMENsRA48TDr/ChXthAvEHChZzKMuAsGnBdV4/qK7
+mceqPLLulkqlRhdTrmL4snMjSaqwlNehAdloJS+M6eR4pEOPuMgVjoiSd8lAFo5
f6jjLebJHwKBgDTiok55W4/ohMBBZJPfRIuZJEYagsan9WGQwa/1H4VnErdV1xCW
SWH1SULgkXGcLcIbd6SL57ubaTTv7gqEzcxrcu1Y/ks3IvU/jqRa+vJeeZcqdWND
DYIXrWPZ/dm+0j+Db3CprE2jbJWXPaSZWpo4/LsDDf62fwQH4tKkat8lAoGActL1
3sYxi5aRLPgHgUyNESL7zHYZ++DL3lYLep8RJExB9FFT0iq/A4yH0DcXvcSiB2uz
BLvXoHDOKLNMX14XoydQdGJx/kpZ/g5GFO136jueedwL/Nzg2oIiP/fX2yytiu+e
Gk4mANnr9RE0boIjxFdmGaTs2xY6zArsZcQIyocCgYAM055vrwU40SCvIFgemstr
9ilUiNSrKW+Y/vujGRtQp9/D1QwU2n6iNsLo/gs85GzH1STsagRbsLny504oTpfs
Ovc4lNek5JiL9/JFR07pH7/F9+STOgJgcn7oUnlfd/t86Th59Gx7H0v+RkhIXbtH
FMMKkjRL/CjPolat6n41rw==
-----END PRIVATE KEY-----
`,client_email:"ocm-logger@ocm-logs.iam.gserviceaccount.com"},this.jwt="",this.googleAuthURL="https://oauth2.googleapis.com/token",this.SCOPES=["https://www.googleapis.com/auth/logging.write"],this.EXPIRES_MARGIN=1800}run(){return new Promise((e,i)=>{let n=Math.floor(Date.now()/1e3);this.getJwt(this.serviceAccountKey,n);let r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:this.jwt})};fetch(this.googleAuthURL,r).then(s=>s.json()).then(s=>{this.accessToken=s.access_token,e(this.accessToken)}).catch(s=>{i(s)})})}getJwt({client_email:e,private_key:i},n){let r={typ:"JWT",alg:"RS256"},s=n+3600,a={aud:this.googleAuthURL,iss:e,scope:this.SCOPES.join(" "),iat:n,exp:s};this.jwt=Jd.sign(r.alg,r,a,i)}}});var Ts=V((Oh,Cs)=>{var Xd=Fs(),Yd=new Xd;Cs.exports=class{jwt;build;hostname;url;constructor(e,i,n){this.build=e,this.hostname=i,this.url=n,this.jwt=null}stringifyError(e){return this.hasJsonStructure(e)?JSON.stringify(e):e}hasJsonStructure(e){try{JSON.parse(e)}catch{return!1}return!0}error(e){this.send("ERROR",e)}warning(e){this.send("WARNING",e)}notice(e){this.send("NOTICE",e)}info(e){this.send("INFO",e)}debug(e){this.send("DEBUG",e)}async send(e,i){this.jwt||(this.jwt=await Yd.run());let n={method:"POST",headers:{Authorization:`Bearer ${this.jwt}`,Accept:"application/json; charset=UTF-8","Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({logName:"projects/ocm-logs/logs/ocm-js",resource:{type:"global",labels:{project_id:"ocm-logs",product:"ocm.js"}},entries:[{jsonPayload:{hostname:this.hostname,url:this.url,build:this.build.split(".")[1],userAgent:window.navigator.userAgent,service:i.service,browserWidth:window.innerWidth,browserHeight:window.innerHeight,msg:i.msg,error:this.stringifyError(i.error),consent:window?.OCM?.hasPurposeOneConsent,adBlocked:window?.OCM?.adBlocked},severity:e}]})};return await fetch("https://logging.googleapis.com/v2/entries:write",n)}getCircularReplacer(){let e=new WeakSet;return(i,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}}}});var Rs=V((kh,Ps)=>{var Qd=Un(),Zd=Kn(),ec=Zr(),tc="https://geo.ocm.workers.dev",ic="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",tt="[OCM][Utils] ",nc=Ts();Ps.exports=class{config;browser;start;window;doc_head;doc_body;screen_width;screen_height;is_mobile;hostname;url;willLog;willSampleWarnings;willSampleErrors;log_blacklist=[];constructor(e){this.config=e,this.browser=Qd,this.start=new Date,this.serviceStates=this.getServiceStates(),this.window=this.config.hasOwnProperty("use_window_top")?this.config.use_window_top?window.top:window:window.top,this.doc_head=this.window.document.head||this.window.document.getElementsByTagName("head")[0],this.doc_body=this.window.document.body||this.window.document.getElementsByTagName("body")[0],this.screen_width=this.screenWidth(),this.screen_height=this.screenHeight(),this.is_mobile=Zd(),this.hostname=this.window.location.hostname,this.url=this.window.location.href,this.calculateLoggingSamples(),this.config?.log&&(this.log=new nc(this.config.build,this.hostname,this.url)),this.log_blacklist=["Request timeout after","consentManagement.gpp config not defined","FPD request size has exceeded maximum request size","missing parameters for real time module","module criteo is loading external JavaScript","Rubicon: Filtered FPD key:","User sync not allowed","Continuing without bids","No valid bid requests returned for auction","fetch encountered an error","xhr timeout after","TCF2 denied device access for","has been rendered before","criteoIdSystem: unable to sync user id","xhr error","Number of user syncs exceeded for","Bid does not meet price floor","Brightcom server returned empty/non-json response"],this.ocmGoneMadPreview()}async isAdBlocked(){this.config.debug&&console.log("[OCM] Checking for Adblock..."),await fetch(ic,{method:"HEAD",mode:"no-cors"}).then(n=>{this.config.debug&&console.log(tt+" adsbygoogle HEAD call response",n),(n.status===0||n.status===200)&&(this.window.OCM.adBlocked=!1),n.redirected&&(this.window.OCM.adBlocked=!0)}).catch(n=>{this.window.OCM.adBlocked=!0})}isMobile(){return this.is_mobile}getBrowser(){return this.browser}hasJsonStructure(e){try{JSON.parse(e)}catch{return!1}return!0}ocmChromeExt(e){this.config.debug&&console.info("[OCM] Provide data to our Chrome extension");let i={type:"OCM_CONFIG",data:e};this.window.postMessage(i,"*")}geolocation(){return this.config.debug&&console.info("[OCM] Geolocating..."),new Promise(e=>{if(this.window.OCM.geo){e();return}ec.get(tc).then(i=>{this.window.OCM.geo=i.data,e()}).catch(i=>{console.error(tt,i)})})}contentLoaded(){return this.config.debug&&console.info("[OCM] Checking for DOMContentLoaded..."),new Promise(e=>{let i=()=>{/^(?:loaded|interactive|complete)$/.test(document.readyState)&&(this.doc_body=this.doc_body||this.window.document.body||this.window.document.getElementsByTagName("body")[0],this.doc_body&&document.removeEventListener("readystatechange",i),e())};document.addEventListener("readystatechange",i),i()})}isSlotInViewport(e){let i,n=this.window.document.getElementById(e),r=!1,s=0;if(!n||typeof n>"u")return!1;if(n.style.display==="none"?(n.style.display="block",i=n.getBoundingClientRect(),n.style.display="none"):i=n.getBoundingClientRect(),r=i.height>=600,i.top>=0&&i.left>=0&&i.bottom<=(this.window.innerHeight||this.window.document.documentElement.clientHeight)&&i.right<=(this.window.innerWidth||this.window.document.documentElement.clientWidth))return!0;if(i.top<0&&i.left>=0){if(s=(i.height-Math.abs(i.top))/i.height*100,r){if(s>=67)return!0}else if(s>=51)return!0}if(i.bottom>=(this.window.innerHeight||this.window.document.documentElement.clientHeight)&&i.left>=0){if(s=(i.height-(i.bottom-(this.window.innerHeight||this.window.documentElement.clientHeight)))/i.height*100,r){if(s>=67)return!0}else if(s>=51)return!0}return!1}gptApiReady(){return this.config.debug&&console.info("[OCM] Checking for googletag.apiReady..."),new Promise((e,i)=>{let n=r=>{if(this.window.googletag&&googletag.apiReady)e();else{if(!r)return i("OCM gptApiReady: Max tries reached");setTimeout(n.bind(null,r-1),50)}};n(40)})}gptPubAdsReady(){return this.config.debug&&console.info(tt+"Checking for googletag.pubadsReady..."),new Promise((e,i)=>{let n=r=>{if(this.window.googletag&&this.window.googletag.pubadsReady)e();else{if(!r)return i("OCM gptPubAdsReady: Max tries reached");setTimeout(n.bind(null,r-1),200)}};n(50)})}throttle(e,i){let n=Date.now();return function(){n+i-Date.now()<0&&(e(),n=Date.now())}}getServiceStates(){if(this.serviceStates&&this.serviceStates.length)return this.serviceStates;this.config.debug&&console.info("[OCM] Resolving service states...");let e={};return Object.keys(this.config.services).forEach(i=>{e[i]=this.config.services[i].active}),e}allowPageType(e){return this.config.debug&&console.log(tt+"checking for page type validity",e,this.window.OCM.pageType),!!(e.includes(this.window.OCM.pageType)||e.includes("ROS"))}screenWidth(){return this.config.debug&&console.info("[OCM] Resolving screen width..."),this.window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}screenHeight(){return this.config.debug&&console.info("[OCM] Resolving screen height..."),this.window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}loadStyle(e){this.config.debug&&console.info("[OCM] Loading style...",e.substring(0,100));let i=document.createElement("style");i.appendChild(document.createTextNode(e)),this.doc_head.appendChild(i)}loadImage(e,i){this.config.debug&&console.info("[OCM] Loading image...",e);let n=document.createElement("img");n.src=e,i==="body"?this.doc_body.insertBefore(n,this.doc_body.firstChild):this.doc_head.appendChild(n)}loadScript(e,i,n,r,s){this.config.debug&&console.info("[OCM] Loading script...",e);let a=document.createElement("script");a.type=i,a.src=e,n===1&&(a.async="true"),r!==""&&(a.class=r),s==="body"?this.doc_body.insertBefore(a,this.doc_body.firstChild):this.doc_head.appendChild(a)}determineInjectionTarget(e,i=0,n=0,r=0,s=0){this.config.debug&&console.info(tt+"determineInjectionTarget",e,i,n,r,s);let a=null;if(e===""||!e)return a;let o;return typeof e=="string"?o=this.window.document.querySelectorAll(e):typeof e=="object"&&(o=e.length===void 0?[e]:e),r===0?o.length&&o.length>=n&&(i?i===-1?a=o[o.length-1]:a=o[i]:a=o[0]):a=this.getParagraphAt(r,s,o),a}injectTag(e,i,n){this.config.debug&&console.info(tt+"Injecting tag",e,i,n);let r=null;switch(n){case"insertInsideStart":r=e.insertAdjacentElement("afterbegin",i);break;case"insertInside":r=e.appendChild(i);break;case"insertAfter":r=e.parentNode.insertBefore(i,e.nextElementSibling);break;case"insertBefore":r=e.parentNode.insertBefore(i,e);break;default:break}return r}calculateBidderTimeout(){let e=this.config.services.header_bidding.timeout;return(this.config.debug||this.config.services.header_bidding.debug)&&console.log("[OCM][Header Bidding] bidderTimeout = "+this.config.services.header_bidding.timeout),this.isMobile()&&(e*=2,(this.config.debug||this.config.services.header_bidding.debug)&&console.log("[OCM][Header Bidding] Mobile device, so bidderTimeout = ",e)),e}getParagraphAt(e,i,n){let r=0,s=0;for(let a of n)r=r+a.innerHTML.split(/\s+/).length;if(r>=i){for(let a of n)if(s=s+a.innerHTML.split(/\s+/).length,s>=e)return a}return null}getParameterByName(e){let i=this.window.location.href;e=e.replace(/[\[\]]/g,"\\$&");let r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(i);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}waitFor(e,i,n=50,r){let s=e.split(".");s.length||typeof r=="function"&&r();let a=setInterval(()=>{n--,n===0&&(clearInterval(a),typeof r=="function"&&r());let o=null;s.forEach(l=>{o?o=o[l]:o=this?.window[l]}),o&&(clearInterval(a),typeof i=="function"&&i())},100)}getUniqueListBy(e,i){return[...new Map(e.map(n=>[n[i],n])).values()]}getUnique(e,i){return e.map(n=>n[i]).map((n,r,s)=>s.indexOf(n)===r&&r).filter(n=>e[n]).map(n=>e[n])}async parseRss(e){return new Promise(async(i,n)=>{let r=s=>{s.length?i(s):n(s)};await fetch(e).then(s=>s.text()).then(s=>new this.window.DOMParser().parseFromString(s,"text/xml")).then(s=>{let a=[],o=s.querySelectorAll("item, entry"),l=!1;s.querySelector("feed")?.getAttribute("xmlns")?.indexOf("Atom")>-1&&(l=!0),Array.from(o).forEach(u=>{this.config.debug&&console.log(tt,"Fetched RSS item",u);let g=u.querySelector("title"),p=u.querySelector("link"),c=u.querySelector("image"),h=u.querySelector("[url][width][height]"),m=u.querySelector("enclosure"),f=u.querySelector("description"),b=u.getElementsByTagName("media:content").length>0?u.getElementsByTagName("media:content").item(0):null,v=u.getElementsByTagName("media:thumbnail").length>0?u.getElementsByTagName("media:thumbnail").item(0):null;if(l){g=u.querySelector("title"),c=u.querySelector('link[type="image/jpeg"], link[type="image/png"], link[type="image/jpg"]')?.getAttribute("href"),p=u.querySelector('link[rel="alternate"]')?.getAttribute("href"),a.push({title:g?g.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",link:p||"",image:c});return}(!g||!p)&&(this.config.debug&&console.log(tt,"Failed to get title or url element",u),r([]));let w="";c?(w=c.innerHTML,c.querySelector("url")&&(w=c.querySelector("url").innerHTML),w.indexOf("<url>")>-1&&(w=w.replace("<url>","").replace("</url>",""))):h&&h.getAttribute("url").length?w=h.getAttribute("url"):m&&m.getAttribute("url").length?w=m.getAttribute("url"):b?w=b.getAttribute("url"):v?w=v.getAttribute("url"):f&&(w=this.extractImageFromDescription(u.innerHTML)),w.length&&a.push({title:g?g.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",link:p?p.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",image:w})}),a=this.getUnique(a,"link"),a=a.filter(u=>u&&u.link&&u.link!==this.window.location.href),a=a.sort(()=>.5-Math.random()).slice(0,10),this.config.debug&&console.log(tt,"RSS items: ",a),r(a)})})}extractImageFromDescription(e){let i=/img[^>]+src=['"]([^">]+)['"]/gm,n=e.matchAll(i);for(let r of n)if(typeof r[1]<"u")return r[1];return""}clipHiddenOverflows(e,i){let n=a=>this.window.getComputedStyle(a).overflow==="hidden",r=e;this.config.debug&&(i||console.log(tt+"** Overflow check commence!",r));let s=i||r;if(n(r)&&r.tagName!=="BODY"){this.config.debug&&console.warn("Overflow found on:",r.tagName,{issue:"OVERFLOW IS HIDDEN",tagName:r.tagName,id:r.id,class:r.className,element:r});let a=r.getAttribute("style");r.setAttribute("style",a+"; overflow:clip !important")}if(r.parentElement)return this.clipHiddenOverflows(r.parentElement,s);this.config.debug&&console.log(tt+"Overflow check complete! original element:",s)}calculateLoggingSamples(){let e=Math.floor(Math.random()*100);this.willSampleWarnings=e<2,this.willSampleErrors=e<10}getRandomString(e=7){return(Math.random()+1).toString(36).substring(e)}ocmGoneMadPreview(){let e=this.getParameterByName("campaign_id"),i=this.getParameterByName("adformat");e&&e!==""&&i&&i!==""&&this.contentLoaded().then(()=>{let n=document.createElement("script");n.id="ocm-gone-mad-sdk",n.src=`https://static.madinad.com/static/ocm-gone-mad.min.js?campaign_id=${e}&adformat=${i}&cb=${new Date().getTime()}`,this.doc_body.append(n)})}lazyLoad(e,i,n){let r=new IntersectionObserver((a,o)=>{a.forEach(l=>{l.isIntersecting&&l.intersectionRatio>=0&&n&&typeof n=="function"&&(n(l),o.unobserve(l.target))})},i),s=this.window.document.querySelector(e);s?r.observe(s):this.config.debug&&console.log(tt+"Could not find defined selector: "+e)}}});var Ai=V((Bh,Os)=>{var mt="[OCM][Sticky] ";Os.exports=class{utils;config;sticky_config;is_mobile;counter;skin_slot;skin_empty;constructor(e,i){this.utils=e,this.config=i,this.sticky_config=i.services.sticky,this.counter=0,this.skin_slot=null,this.skin_empty=null}async run(){(this.config.debug||this.sticky_config.debug)&&console.log(mt+"Running..."),await this.utils.gptPubAdsReady();for(let e of this.sticky_config.ads)if(e.active){if(!this.deviceAllowed(e.conditions)&&e.position!=="fullscreen"){(this.config.debug||this.sticky_config.debug)&&console.log(mt+"Ad ("+e.code+") not meant to run in current device");continue}if(!this.utils.allowPageType(e.conditions.page_types)){(this.config.debug||this.sticky_config.debug)&&console.log(mt+"Ad ("+e.code+") not meant to run in current page type");continue}if(this.isExcluded(e.conditions.exclude_urls)){(this.config.debug||this.sticky_config.debug)&&console.log(mt+"Ad ("+e.code+"). Inside excluded url. Terminating service.");continue}await this.structure(e)}}async determineSkinExists(){return new Promise((e,i)=>{let n=[];(this.config.debug||this.sticky_config.debug)&&console.log(mt+"Checking if skin ad exists"),this.skin_slot&&e(!0),n=this.utils.window.googletag.pubads().getSlots().filter(r=>r.getSlotElementId().toLowerCase().includes("skin")||r.getAdUnitPath().toLowerCase().includes("skin")?(this.skin_slot=r,!0):!1),e(n.length>0)})}async structure(e){switch(this.counter++,(this.config.debug||this.sticky_config.debug)&&console.log(mt+"Structuring sticky with code: ",e.code),e.bg_color||(e.bg_color="rgba(27,27,27,.75)"),this.utils.config.services.lazyload.ad_load_offsets.push({path:e.code,offset:-1}),e.position){case"left":this.leftStyles(e),await this.side(e);break;case"right":this.rightStyles(e),await this.side(e);break;case"top":this.topStyles(e),this.topBottom(e);break;case"bottom":this.bottomStyles(e),this.topBottom(e);break;case"fullscreen":this.fullScreenStyles(e),this.fullScreen(e);break;default:break}}async side(e){(this.config.debug||this.sticky_config.debug)&&console.log(mt+"Trying to render side sticky with code: ",e.code),this.styleForXButton();let i=!0,n,r,s=this.utils.window.document.querySelectorAll("body *")[0],a=document.createElement("div");a.classList.add("ocm-sticky",e.position),e.style&&e.style!==""&&(a.style=e.style),e.classes&&e.classes!==""&&a.setAttribute("class",e.classes);let o=document.createElement("div");o.classList.add("ocm-sticky-container");let l=document.createElement("div");l.classList.add("ocm-sticky-content");let u=document.createElement("div");u.id="ocm_sticky_"+this.counter,u.classList.add("ocm-sticky-ad");let g=document.createElement("script");g.text="googletag.cmd.push(() => { try { ",e.size_mapping&&e.size_mapping.code&&e.size_mapping.name?g.text+=" "+e.size_mapping.code.replace(/g\n/,"")+"  var "+u.id+'_slot = googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+u.id+'").defineSizeMapping('+e.size_mapping.name+").addService(googletag.pubads()); ":g.text+="var "+u.id+'_slot = googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+u.id+'"); ',g.text+="if ("+u.id+"_slot) {  "+u.id+'_slot.addService(googletag.pubads());  googletag.display("'+u.id+'"); ',!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(g.text+=`if (window.OCM.init_ad_server_set) { googletag.pubads().refresh([${u.id}_slot], { changeCorrelator: ${this.config.change_correlator!==void 0?this.config.change_correlator:!0}}); }`),g.text+="}} catch(err) {console.error(err)} });";let p=document.createElement("div");p.classList.add("ocm-close-icon-container");let c=document.createElement("button");c.classList.add("ocm-button-close"),this.utils.is_mobile||(p.addEventListener("mouseenter",()=>{c.classList.add("ocm-button-close-hover")}),p.addEventListener("mouseleave",()=>{c.classList.remove("ocm-button-close-hover")})),p.append(c),l.append(u),o.append(l),u.append(g),a.append(o),s.parentNode.append(a),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",h=>{if((this.config.debug||this.sticky_config.debug)&&console.log(mt+"Slot render ended. Event: ",h," isEmpty: ",h.isEmpty," slotElementId: ",h.slot.getSlotElementId()," divId: ",u.id),!h.isEmpty&&h.slot.getSlotElementId()===u.id){if(n=h.size[0],r=h.size[1],r===1&&n===1)return;a.style.width=String(n)+"px",a.style.height=String(r)+"px",a.style.marginTop="-"+String(r/2)+"px",l.style.width=String(n)+"px",l.style.height=String(r)+"px",e.conditions.retract&&(a.addEventListener("mouseenter",m=>{i||(e.position==="left"?a.style.marginLeft="0px":e.position==="right"&&(a.style.marginRight="0px"),i=!0,m.stopPropagation())}),a.addEventListener("mouseleave",m=>{i&&(setTimeout(()=>{e.position==="left"?a.style.marginLeft="-"+String(Math.round(n*.33))+"px":e.position==="right"&&(a.style.marginRight="-"+String(Math.round(n*.33))+"px"),i=!1},1e3),m.stopPropagation())}))}}),this.utils.window.googletag.pubads().addEventListener("impressionViewable",h=>{(this.config.debug||this.sticky_config.debug)&&console.log(mt+"Event after impression viewable "+h+" event condition "+h.slot.getSlotElementId()===u.id),h.slot.getSlotElementId()===u.id&&(o&&o.childNodes&&Array.from(o.childNodes).find(f=>f.className==="ocm-close-icon-container")||o.append(p),c.addEventListener("click",f=>{e.position==="left"?a.style.marginLeft="-"+String(n)+"px":e.position==="right"&&(a.style.marginRight="-"+String(n)+"px"),setTimeout(()=>{a.remove()},500),f.stopPropagation()}),e.conditions.hide_if_skin&&this.determineSkinExists().then(f=>{f&&this.skin_slot&&this.skin_slot.getResponseInformation()&&setTimeout(()=>{e.position==="left"?a.style.marginLeft="-400px":e.position==="right"&&(a.style.marginRight="-400px"),setTimeout(()=>{a.remove()},500)},2e3)}),e.conditions.retract&&n!==1&&r!==1&&setTimeout(function(){e.position==="left"?a.style.marginLeft="-"+String(Math.round(n*.33))+"px":e.position==="right"&&(a.style.marginRight="-"+String(Math.round(n*.33))+"px"),i=!1},1e3))})}topBottom(e){this.styleForXButton();let i=this.utils.window.document.querySelectorAll("body *")[0],n=document.createElement("div");n.classList.add("ocm-sticky",e.position),e.style&&e.style!==""&&(n.style=e.style),e.classes&&e.classes!==""&&n.setAttribute("class",e.classes);let r=document.createElement("div");r.id="ocm_sticky_"+this.counter;let s=document.createElement("script");s.text="googletag.cmd.push(() => { try { ",e.size_mapping&&e.size_mapping.code&&e.size_mapping.name?s.text+=" "+e.size_mapping.code.replace(/g\n/,"")+"  var "+r.id+'_slot = googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+r.id+'").defineSizeMapping('+e.size_mapping.name+").addService(googletag.pubads()); ":s.text+="var "+r.id+'_slot = googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+r.id+'"); ',s.text+="if ("+r.id+"_slot) {  "+r.id+'_slot.addService(googletag.pubads());  googletag.display("'+r.id+'"); ',!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(s.text+=`if (window.OCM.init_ad_server_set) { googletag.pubads().refresh([${r.id}_slot], { changeCorrelator: ${this.config.change_correlator!==void 0?this.config.change_correlator:!0}}); }`),s.text+="}} catch(err) {console.error(err)} });",e.size_mapping&&e.size_mapping.code&&e.size_mapping.name&&(s.text="googletag.cmd.push(function() {  "+e.size_mapping.code.replace(/g\n/,"")+' googletag.defineSlot("'+e.code+'", '+e.sizes+', "'+r.id+'").defineSizeMapping('+e.size_mapping.name+').addService(googletag.pubads());  googletag.display("'+r.id+'")});');let a=document.createElement("div");a.classList.add("close-icon-container");let o=document.createElement("button");o.classList.add("ocm-button-close"),this.utils.is_mobile||(a.addEventListener("mouseenter",()=>{o.classList.add("ocm-button-close-hover")}),a.addEventListener("mouseleave",()=>{o.classList.remove("ocm-button-close-hover")})),a.append(o),n.append(a),r.append(s),n.append(r),i.parentNode.append(n),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",l=>{if(!l.isEmpty&&l.slot.getSlotElementId()===r.id){n.classList.add("reveal-"+e.position);let u=l.size[0],g=l.size[1];e.conditions.device==="desktop"&&(u+=6,g+=6,["top","bottom"].includes(e.position)||(n.style.width=String(u)+"px",n.style.height=String(g)+"px")),setTimeout(()=>{a.addEventListener("click",()=>{n.classList.remove("reveal-"+e.position)})},2e3)}})}fullScreen(e){this.styleForXButton();let i=this.utils.window.document.querySelectorAll("body *")[0],n=this.utils.window.document.querySelector("body"),r=this.utils.window.document.createElement("div");r.classList.add("ocm-sticky","ocm-fs"),e.style&&e.style!==""&&(r.style=e.style),e.classes&&e.classes!==""&&r.setAttribute("class",e.classes);let s=document.createElement("div");s.classList.add("ocm-sticky-container");let a=document.createElement("div");a.classList.add("ocm-sticky-content");let o=this.utils.window.document.createElement("div");o.id="ocm-sticky-fullscreen",o.classList.add("ocm-sticky-ad");let l=document.createElement("div");l.classList.add("ocm-close-icon-container");let u=document.createElement("button");u.classList.add("ocm-button-close"),this.utils.is_mobile||(l.addEventListener("mouseenter",()=>{u.classList.add("ocm-button-close-hover")}),l.addEventListener("mouseleave",()=>{u.classList.remove("ocm-button-close-hover")})),l.append(u),u.addEventListener("click",g=>{setTimeout(()=>{r.classList.remove("active"),n.classList.remove("no-scroll")},500),g.stopPropagation()}),a.append(o),s.append(a),r.append(l),r.append(s),i.parentNode.append(r),this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{que:[]},this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("adRenderSucceeded",g=>{g.bid.adUnitCode===e.code&&(r.classList.add("active"),n.classList.add("no-scroll"))})})}styleForXButton(){this.utils.loadStyle(`          .ocm-button-close{
               padding: 0 !important;
               border-radius: 4px !important;
               display: block !important;
               position: relative !important;
               width: 30px !important;
               height: 30px !important;
               background: #fff !important;
               color: #4a968e !important;
               border: 1px solid #106e89 !important;
               outline: none !important;
               cursor: pointer !important;
           }

           .ocm-button-close-hover:before{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close-hover:after{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close:before{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

           .ocm-button-close:after{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }`)}leftStyles(e){this.utils.loadStyle(`            .ocm-sticky.left {
                z-index: 2147483641;
                display: block;
                position: fixed;
                ${e?.conditions?.bottom&&e?.conditions?.bottom!==""?"bottom:"+e?.conditions?.bottom+`px;
`:`top:50%;
`}                left:0px;
                -webkit-transition: margin-left 0.5s ease-in-out !important;
                transition: margin-left 0.5s ease-in-out !important;
            }
            .ocm-sticky.left .ocm-sticky-container {
                z-index: 2147483643;
                background-color: #fff;
                border: 0 solid #afaeae;
                box-sizing: content-box;
                color: #000;
                height: 100%;
                overflow: visible;
                position: absolute;
                text-align: left;
                visibility: visible;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-sticky-content {
              overflow: hidden;
              visibility: visible;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-sticky-content .ocm-sticky-ad {
              border: 0;
              height:100%;
              visibility: visible;
              width:100%;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-close-icon-container {
              z-index: 2147483645;
              cursor: pointer;
              display: block;
              height: 31px;
              ${e.x_position==="left"?"left: 3px;":"right: 3px;"}
              position: absolute;
              top: -35px;
              width: 32px;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-close-icon-container .ocm-close-icon .progress {
                opacity: 0;
                stroke-dasharray: 0,120;
                transition: 0.5s cubic-bezier(0.165, 0.775, 0.145, 1.020);
            }`)}rightStyles(e){this.utils.loadStyle(`            .ocm-sticky.right {
                z-index: 2147483641;
                display: block;
                position: fixed;
                ${e?.conditions?.bottom&&e?.conditions?.bottom!==""?"bottom:"+e?.conditions?.bottom+`px;
`:`top:50%;
`}                right:0px;
                -webkit-transition: margin-right 0.5s ease-in-out !important;
                transition: margin-right 0.5s ease-in-out !important;
            }
            .ocm-sticky.right .ocm-sticky-container {
                z-index: 2147483643;
                background-color: #fff;
                border: 0 solid #afaeae;
                box-sizing: content-box;
                color: #000;
                height: 100%;
                overflow: visible;
                position: absolute;
                text-align: left;
                visibility: visible;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-sticky-content {
              overflow: hidden;
              visibility: visible;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-sticky-content .ocm-sticky-ad {
              border: 0;
              height:100%;
              visibility: visible;
              width:100%;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-close-icon-container {
              z-index: 2147483645;
              cursor: pointer;
              display: block;
              height: 32px;
              ${e.x_position==="left"?"left: 3px;":"right: 3px;"}
              position: absolute;
              top: -35px;
              width: 32px;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-close-icon-container .ocm-close-icon .progress {
                opacity: 0;
                stroke-dasharray: 0,120;
                transition: 0.5s cubic-bezier(0.165, 0.775, 0.145, 1.020);
            }`)}topStyles(e){this.utils.loadStyle(`          .ocm-sticky.top {
            position: fixed;
            background-color:`+e.bg_color+`;
            width: 100%;
            padding: 8px 0;
            z-index: 2147483641;
            top: -1000px;
            left: 0;
            right: 0;
            transition: top .5s ease-in-out !important;
            text-align: center;
          }

          .ocm-sticky.reveal-top {
            top: 0;
          }

          .ocm-sticky.reveal-top div[data-oau-code] {
            margin: 0 auto;
          }

          .ocm-sticky.top .close-icon-container {
            position: absolute;
            bottom: -35px;
              ${e.x_position==="left"?"left: 4px;":"right: 4px;"}
            z-index: 10;
          }

          .ocm-sticky.top .close-icon {
            display: inline-block;
            height: 32px;
            width: 32px;
            cursor: pointer;
            stroke: #fff;
          }

          .ocm-sticky.top .progress {
            opacity: 0;
            stroke-dasharray: 0, 120;
          }`)}bottomStyles(e){this.utils.loadStyle(`          .ocm-sticky.bottom {
            position: fixed;
            background-color:`+e.bg_color+`;
            width: 100%;
            padding: 8px 0;
            z-index: 2147483641;
            bottom: -1000px;
            left: 0px;
            right: 0px;
            transition: bottom .5s ease-in-out !important;
            text-align: center;
          }

          .ocm-sticky.reveal-bottom {
            bottom: 0px;
          }
          .ocm-sticky.reveal-bottom div[data-oau-code] {            margin: 0 auto;          }

          .ocm-sticky.bottom .close-icon-container {
            position: absolute;
            top: -35px;
              ${e.x_position==="left"?"left: 4px;":"right: 4px;"}
            z-index: 10;
          }

          .ocm-sticky.bottom .close-icon {
            display: inline-block;
            height: 32px;
            width: 32px;
            cursor: pointer;
            stroke: #fff;
          }

          .ocm-sticky.bottom .progress {
            opacity: 0;
            stroke-dasharray: 0, 120;
          }`)}fullScreenStyles(e){this.utils.loadStyle(`            .ocm-sticky.ocm-fs {
                z-index: 2147483643;
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 255, 255, 0.7);
            }

            .ocm-sticky.ocm-fs.active {
                display: block !important;
            }

            .ocm-sticky.ocm-fs .ocm-sticky-container {
                z-index: 2147483643;
                display: flex;
                width: 100%;
                height: 100%;
                justify-content: center;
                align-items: center;
            }

            .ocm-sticky.ocm-fs .ocm-sticky-container .ocm-sticky-content {
                z-index: 2147483643;
                display: flex;
            }

            .ocm-sticky.ocm-fs .ocm-close-icon-container {
                z-index: 2147483644;
                display: flex;
                flex-direction: row;
                justify-content: flex-end;
                margin: 12px;
                position: absolute;
                top: 0;
                right: 0;
            }

            body.no-scroll {
                overflow: hidden!important;
            }
`)}deviceAllowed(e){return this.utils.is_mobile&&e.device==="mobile"||!this.utils.is_mobile&&e.device==="desktop"&&this.utils.screen_width>=e.min_width*this.utils.window.devicePixelRatio}isExcluded(e){return!!(typeof e!==void 0&&e.length&&e.find(i=>this.utils.window.location.href.includes(i)))}}});var fn=V((jh,Ds)=>{var it="[OCM][MIS] ";Ds.exports=class{utils;config;mis_config;pairs;constructor(e,i){this.utils=e,this.config=i,this.mis_config=i.services.mobile_inread_sticky}run(){this.utils.loadStyle(".ocm-mis-adv{font-size:10px; margin:0 auto 5px 0} .ocm-mis{position:relative;text-align:center} .ocm-mis-expand{height:650px; min-width:300px; max-width:336px; background-color:transparent; margin:0 auto;} .ocm-mis-wrapper{position:sticky; top:"+this.mis_config.top+"px !important}"),this.gptMisEvent(),this.utils.contentLoaded().then(()=>{this.init()})}init(){(this.config.debug||this.mis_config.debug)&&console.log(it+"Looking up configured MIS divs...");for(let e of this.mis_config.pairs){if(!this.utils.allowPageType(e.page_types)){(this.config.debug||this.mis_config.debug)&&console.log(it+"##"+e.selector+"## not allowed in page type");continue}let i=this.utils.window.document.querySelector('[id*="'+e.selector+'"]:not([data-ocm-mis="true"])');if(i){if((this.config.debug||this.mis_config.debug)&&console.log(it+"Div found ("+e.selector+")"),i.querySelector('div[id^="google_ads_iframe_"] > iframe')){(this.config.debug||this.mis_config.debug)&&console.log(it+"Ad already loaded. Don't mess with it. Aborting DOM manipulation.");return}(this.config.debug||this.mis_config.debug)&&console.log(it+"Transforming to mobile inread sticky ("+e.selector+")");let n=document.createElement("div");n.classList.add("ocm-mis");let r=document.createElement("div");r.classList.add("ocm-mis-expand");let s=document.createElement("div");s.classList.add("ocm-mis-wrapper"),i.parentNode.insertBefore(n,i),n.append(r),r.append(s),s.appendChild(i),i.setAttribute("data-ocm-mis","true"),this.utils.clipHiddenOverflows(n),(this.config.debug||this.mis_config.debug)&&console.log(it+"Transformation done ("+e.selector+")")}}}gptMisEvent(){this.utils.window.googletag.cmd.push(()=>{googletag.pubads().addEventListener("slotRenderEnded",e=>{if(!e.isEmpty&&this.utils.is_mobile){(this.config.debug||this.mis_config.debug)&&console.log(it+"Am in mobile device, time to check for position + z-index properties");let i=document.getElementById(e.slot.getSlotElementId());if((this.config.debug||this.mis_config.debug)&&console.log(it+"Found non empty mis slot:",i,i.classList.contains("ocm-mis")),i.classList.contains("ocm-mis")){let n=20,r=()=>{(this.config.debug||this.mis_config.debug)&&console.log(it+"Looking for position style property in #"+i.id),i.style.getPropertyValue("position")&&n>0?((this.config.debug||this.mis_config.debug)&&console.log(it+"Found position style property in #"+i.id),i.style.removeProperty&&((this.config.debug||this.mis_config.debug)&&console.log(it+"Removing position style property in #"+i.id),i.style.removeProperty("position"))):((this.config.debug||this.mis_config.debug)&&console.log(it+"Did not find position style property in #"+i.id+", retrying"),n>0&&(n--,setTimeout(r,100)))};r()}}})})}}});var mn=V((pn,gn)=>{(function(t,e){typeof pn=="object"&&typeof gn<"u"?gn.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,function(){var i=t.Cookies,n=t.Cookies=e();n.noConflict=function(){return t.Cookies=i,n}}())})(pn,function(){"use strict";function t(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)r[o]=a[o]}return r}var e={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function i(r,s){function a(l,u,g){if(!(typeof document>"u")){g=t({},s,g),typeof g.expires=="number"&&(g.expires=new Date(Date.now()+g.expires*864e5)),g.expires&&(g.expires=g.expires.toUTCString()),l=encodeURIComponent(l).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var p="";for(var c in g)g[c]&&(p+="; "+c,g[c]!==!0&&(p+="="+g[c].split(";")[0]));return document.cookie=l+"="+r.write(u,l)+p}}function o(l){if(!(typeof document>"u"||arguments.length&&!l)){for(var u=document.cookie?document.cookie.split("; "):[],g={},p=0;p<u.length;p++){var c=u[p].split("="),h=c.slice(1).join("=");try{var m=decodeURIComponent(c[0]);if(g[m]=r.read(h,m),l===m)break}catch{}}return l?g[l]:g}}return Object.create({set:a,get:o,remove:function(l,u){a(l,"",t({},u,{expires:-1}))},withAttributes:function(l){return i(this.converter,t({},this.attributes,l))},withConverter:function(l){return i(t({},this.converter,l),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(r)}})}var n=i(e,{path:"/"});return n})});var ks=V((Yt,vn)=>{(function(t,e){typeof Yt=="object"&&typeof vn=="object"?vn.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Yt=="object"?Yt.bowser=e():t.bowser=e()})(Yt,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(n,r,s){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:s})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var a in n)i.d(s,a,function(o){return n[o]}.bind(null,a));return s},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="",i(i.s=90)}({17:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n=i(18),r=function(){function s(){}return s.getFirstMatch=function(a,o){var l=o.match(a);return l&&l.length>0&&l[1]||""},s.getSecondMatch=function(a,o){var l=o.match(a);return l&&l.length>1&&l[2]||""},s.matchAndReturnConst=function(a,o,l){if(a.test(o))return l},s.getWindowsVersionName=function(a){switch(a){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(a){var o=a.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(o.push(0),o[0]===10)switch(o[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(a){var o=a.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(o.push(0),!(o[0]===1&&o[1]<5))return o[0]===1&&o[1]<6?"Cupcake":o[0]===1&&o[1]>=6?"Donut":o[0]===2&&o[1]<2?"Eclair":o[0]===2&&o[1]===2?"Froyo":o[0]===2&&o[1]>2?"Gingerbread":o[0]===3?"Honeycomb":o[0]===4&&o[1]<1?"Ice Cream Sandwich":o[0]===4&&o[1]<4?"Jelly Bean":o[0]===4&&o[1]>=4?"KitKat":o[0]===5?"Lollipop":o[0]===6?"Marshmallow":o[0]===7?"Nougat":o[0]===8?"Oreo":o[0]===9?"Pie":void 0},s.getVersionPrecision=function(a){return a.split(".").length},s.compareVersions=function(a,o,l){l===void 0&&(l=!1);var u=s.getVersionPrecision(a),g=s.getVersionPrecision(o),p=Math.max(u,g),c=0,h=s.map([a,o],function(m){var f=p-s.getVersionPrecision(m),b=m+new Array(f+1).join(".0");return s.map(b.split("."),function(v){return new Array(20-v.length).join("0")+v}).reverse()});for(l&&(c=p-Math.min(u,g)),p-=1;p>=c;){if(h[0][p]>h[1][p])return 1;if(h[0][p]===h[1][p]){if(p===c)return 0;p-=1}else if(h[0][p]<h[1][p])return-1}},s.map=function(a,o){var l,u=[];if(Array.prototype.map)return Array.prototype.map.call(a,o);for(l=0;l<a.length;l+=1)u.push(o(a[l]));return u},s.find=function(a,o){var l,u;if(Array.prototype.find)return Array.prototype.find.call(a,o);for(l=0,u=a.length;l<u;l+=1){var g=a[l];if(o(g,l))return g}},s.assign=function(a){for(var o,l,u=a,g=arguments.length,p=new Array(g>1?g-1:0),c=1;c<g;c++)p[c-1]=arguments[c];if(Object.assign)return Object.assign.apply(Object,[a].concat(p));var h=function(){var m=p[o];typeof m=="object"&&m!==null&&Object.keys(m).forEach(function(f){u[f]=m[f]})};for(o=0,l=p.length;o<l;o+=1)h();return a},s.getBrowserAlias=function(a){return n.BROWSER_ALIASES_MAP[a]},s.getBrowserTypeByAlias=function(a){return n.BROWSER_MAP[a]||""},s}();e.default=r,t.exports=e.default},18:function(t,e,i){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(91))&&n.__esModule?n:{default:n},s=i(18);function a(l,u){for(var g=0;g<u.length;g++){var p=u[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}var o=function(){function l(){}var u,g,p;return l.getParser=function(c,h){if(h===void 0&&(h=!1),typeof c!="string")throw new Error("UserAgent should be a string");return new r.default(c,h)},l.parse=function(c){return new r.default(c).getResult()},u=l,p=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(g=null)&&a(u.prototype,g),p&&a(u,p),l}();e.default=o,t.exports=e.default},91:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n=l(i(92)),r=l(i(93)),s=l(i(94)),a=l(i(95)),o=l(i(17));function l(g){return g&&g.__esModule?g:{default:g}}var u=function(){function g(c,h){if(h===void 0&&(h=!1),c==null||c==="")throw new Error("UserAgent parameter can't be empty");this._ua=c,this.parsedResult={},h!==!0&&this.parse()}var p=g.prototype;return p.getUA=function(){return this._ua},p.test=function(c){return c.test(this._ua)},p.parseBrowser=function(){var c=this;this.parsedResult.browser={};var h=o.default.find(n.default,function(m){if(typeof m.test=="function")return m.test(c);if(m.test instanceof Array)return m.test.some(function(f){return c.test(f)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.browser=h.describe(this.getUA())),this.parsedResult.browser},p.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},p.getBrowserName=function(c){return c?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},p.getBrowserVersion=function(){return this.getBrowser().version},p.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},p.parseOS=function(){var c=this;this.parsedResult.os={};var h=o.default.find(r.default,function(m){if(typeof m.test=="function")return m.test(c);if(m.test instanceof Array)return m.test.some(function(f){return c.test(f)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.os=h.describe(this.getUA())),this.parsedResult.os},p.getOSName=function(c){var h=this.getOS().name;return c?String(h).toLowerCase()||"":h||""},p.getOSVersion=function(){return this.getOS().version},p.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},p.getPlatformType=function(c){c===void 0&&(c=!1);var h=this.getPlatform().type;return c?String(h).toLowerCase()||"":h||""},p.parsePlatform=function(){var c=this;this.parsedResult.platform={};var h=o.default.find(s.default,function(m){if(typeof m.test=="function")return m.test(c);if(m.test instanceof Array)return m.test.some(function(f){return c.test(f)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.platform=h.describe(this.getUA())),this.parsedResult.platform},p.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},p.getEngineName=function(c){return c?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},p.parseEngine=function(){var c=this;this.parsedResult.engine={};var h=o.default.find(a.default,function(m){if(typeof m.test=="function")return m.test(c);if(m.test instanceof Array)return m.test.some(function(f){return c.test(f)});throw new Error("Browser's test function is not valid")});return h&&(this.parsedResult.engine=h.describe(this.getUA())),this.parsedResult.engine},p.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},p.getResult=function(){return o.default.assign({},this.parsedResult)},p.satisfies=function(c){var h=this,m={},f=0,b={},v=0;if(Object.keys(c).forEach(function(A){var F=c[A];typeof F=="string"?(b[A]=F,v+=1):typeof F=="object"&&(m[A]=F,f+=1)}),f>0){var w=Object.keys(m),y=o.default.find(w,function(A){return h.isOS(A)});if(y){var S=this.satisfies(m[y]);if(S!==void 0)return S}var E=o.default.find(w,function(A){return h.isPlatform(A)});if(E){var C=this.satisfies(m[E]);if(C!==void 0)return C}}if(v>0){var x=Object.keys(b),_=o.default.find(x,function(A){return h.isBrowser(A,!0)});if(_!==void 0)return this.compareVersion(b[_])}},p.isBrowser=function(c,h){h===void 0&&(h=!1);var m=this.getBrowserName().toLowerCase(),f=c.toLowerCase(),b=o.default.getBrowserTypeByAlias(f);return h&&b&&(f=b.toLowerCase()),f===m},p.compareVersion=function(c){var h=[0],m=c,f=!1,b=this.getBrowserVersion();if(typeof b=="string")return c[0]===">"||c[0]==="<"?(m=c.substr(1),c[1]==="="?(f=!0,m=c.substr(2)):h=[],c[0]===">"?h.push(1):h.push(-1)):c[0]==="="?m=c.substr(1):c[0]==="~"&&(f=!0,m=c.substr(1)),h.indexOf(o.default.compareVersions(b,m,f))>-1},p.isOS=function(c){return this.getOSName(!0)===String(c).toLowerCase()},p.isPlatform=function(c){return this.getPlatformType(!0)===String(c).toLowerCase()},p.isEngine=function(c){return this.getEngineName(!0)===String(c).toLowerCase()},p.is=function(c,h){return h===void 0&&(h=!1),this.isBrowser(c,h)||this.isOS(c)||this.isPlatform(c)},p.some=function(c){var h=this;return c===void 0&&(c=[]),c.some(function(m){return h.is(m)})},g}();e.default=u,t.exports=e.default},92:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(o){var l={name:"Googlebot"},u=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/opera/i],describe:function(o){var l={name:"Opera"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/opr\/|opios/i],describe:function(o){var l={name:"Opera"},u=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/SamsungBrowser/i],describe:function(o){var l={name:"Samsung Internet for Android"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/Whale/i],describe:function(o){var l={name:"NAVER Whale Browser"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/MZBrowser/i],describe:function(o){var l={name:"MZ Browser"},u=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/focus/i],describe:function(o){var l={name:"Focus"},u=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/swing/i],describe:function(o){var l={name:"Swing"},u=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/coast/i],describe:function(o){var l={name:"Opera Coast"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(o){var l={name:"Opera Touch"},u=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/yabrowser/i],describe:function(o){var l={name:"Yandex Browser"},u=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/ucbrowser/i],describe:function(o){var l={name:"UC Browser"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/Maxthon|mxios/i],describe:function(o){var l={name:"Maxthon"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/epiphany/i],describe:function(o){var l={name:"Epiphany"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/puffin/i],describe:function(o){var l={name:"Puffin"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/sleipnir/i],describe:function(o){var l={name:"Sleipnir"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/k-meleon/i],describe:function(o){var l={name:"K-Meleon"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/micromessenger/i],describe:function(o){var l={name:"WeChat"},u=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/qqbrowser/i],describe:function(o){var l={name:/qqbrowserlite/i.test(o)?"QQ Browser Lite":"QQ Browser"},u=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/msie|trident/i],describe:function(o){var l={name:"Internet Explorer"},u=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/\sedg\//i],describe:function(o){var l={name:"Microsoft Edge"},u=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/edg([ea]|ios)/i],describe:function(o){var l={name:"Microsoft Edge"},u=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/vivaldi/i],describe:function(o){var l={name:"Vivaldi"},u=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/seamonkey/i],describe:function(o){var l={name:"SeaMonkey"},u=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/sailfish/i],describe:function(o){var l={name:"Sailfish"},u=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,o);return u&&(l.version=u),l}},{test:[/silk/i],describe:function(o){var l={name:"Amazon Silk"},u=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/phantom/i],describe:function(o){var l={name:"PhantomJS"},u=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/slimerjs/i],describe:function(o){var l={name:"SlimerJS"},u=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(o){var l={name:"BlackBerry"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/(web|hpw)[o0]s/i],describe:function(o){var l={name:"WebOS Browser"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/bada/i],describe:function(o){var l={name:"Bada"},u=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/tizen/i],describe:function(o){var l={name:"Tizen"},u=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/qupzilla/i],describe:function(o){var l={name:"QupZilla"},u=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/firefox|iceweasel|fxios/i],describe:function(o){var l={name:"Firefox"},u=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/electron/i],describe:function(o){var l={name:"Electron"},u=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/MiuiBrowser/i],describe:function(o){var l={name:"Miui"},u=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/chromium/i],describe:function(o){var l={name:"Chromium"},u=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/chrome|crios|crmo/i],describe:function(o){var l={name:"Chrome"},u=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/GSA/i],describe:function(o){var l={name:"Google Search"},u=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:function(o){var l=!o.test(/like android/i),u=o.test(/android/i);return l&&u},describe:function(o){var l={name:"Android Browser"},u=r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/playstation 4/i],describe:function(o){var l={name:"PlayStation 4"},u=r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/safari|applewebkit/i],describe:function(o){var l={name:"Safari"},u=r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/.*/i],describe:function(o){var l=o.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(l,o),version:r.default.getSecondMatch(l,o)}}}];e.default=a,t.exports=e.default},93:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),a=[{test:[/Roku\/DVP/],describe:function(o){var l=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,o);return{name:s.OS_MAP.Roku,version:l}}},{test:[/windows phone/i],describe:function(o){var l=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,o);return{name:s.OS_MAP.WindowsPhone,version:l}}},{test:[/windows /i],describe:function(o){var l=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,o),u=r.default.getWindowsVersionName(l);return{name:s.OS_MAP.Windows,version:l,versionName:u}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(o){var l={name:s.OS_MAP.iOS},u=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,o);return u&&(l.version=u),l}},{test:[/macintosh/i],describe:function(o){var l=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,o).replace(/[_\s]/g,"."),u=r.default.getMacOSVersionName(l),g={name:s.OS_MAP.MacOS,version:l};return u&&(g.versionName=u),g}},{test:[/(ipod|iphone|ipad)/i],describe:function(o){var l=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,o).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:l}}},{test:function(o){var l=!o.test(/like android/i),u=o.test(/android/i);return l&&u},describe:function(o){var l=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,o),u=r.default.getAndroidVersionName(l),g={name:s.OS_MAP.Android,version:l};return u&&(g.versionName=u),g}},{test:[/(web|hpw)[o0]s/i],describe:function(o){var l=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,o),u={name:s.OS_MAP.WebOS};return l&&l.length&&(u.version=l),u}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(o){var l=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,o)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,o)||r.default.getFirstMatch(/\bbb(\d+)/i,o);return{name:s.OS_MAP.BlackBerry,version:l}}},{test:[/bada/i],describe:function(o){var l=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,o);return{name:s.OS_MAP.Bada,version:l}}},{test:[/tizen/i],describe:function(o){var l=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,o);return{name:s.OS_MAP.Tizen,version:l}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(o){var l=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,o);return{name:s.OS_MAP.PlayStation4,version:l}}}];e.default=a,t.exports=e.default},94:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(o){var l=r.default.getFirstMatch(/(can-l01)/i,o)&&"Nova",u={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return l&&(u.model=l),u}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(o){var l=o.test(/ipod|iphone/i),u=o.test(/like (ipod|iphone)/i);return l&&!u},describe:function(o){var l=r.default.getFirstMatch(/(ipod|iphone)/i,o);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:l}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(o){return o.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(o){var l=Number(String(o.getOSVersion()).split(".")[0]);return o.getOSName(!0)==="android"&&l>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(o){return o.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(o){return o.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(o){return o.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(o){return o.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(o){return o.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=a,t.exports=e.default},95:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),a=[{test:function(o){return o.getBrowserName(!0)==="microsoft edge"},describe:function(o){if(/\sedg\//i.test(o))return{name:s.ENGINE_MAP.Blink};var l=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,o);return{name:s.ENGINE_MAP.EdgeHTML,version:l}}},{test:[/trident/i],describe:function(o){var l={name:s.ENGINE_MAP.Trident},u=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:function(o){return o.test(/presto/i)},describe:function(o){var l={name:s.ENGINE_MAP.Presto},u=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:function(o){var l=o.test(/gecko/i),u=o.test(/like gecko/i);return l&&!u},describe:function(o){var l={name:s.ENGINE_MAP.Gecko},u=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(o){var l={name:s.ENGINE_MAP.WebKit},u=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}}];e.default=a,t.exports=e.default}})})});var xn=V((Lh,wn)=>{var Ns=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);Ns?(bn=new Uint8Array(16),wn.exports=function(){return Ns(bn),bn}):(yn=new Array(16),wn.exports=function(){for(var e=0,i;e<16;e++)e&3||(i=Math.random()*4294967296),yn[e]=i>>>((e&3)<<3)&255;return yn});var bn,yn});var Sn=V((zh,Ms)=>{var Bs=[];for(Qt=0;Qt<256;++Qt)Bs[Qt]=(Qt+256).toString(16).substr(1);var Qt;function rc(t,e){var i=e||0,n=Bs;return[n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]]].join("")}Ms.exports=rc});var zs=V((Hh,Ls)=>{var sc=xn(),oc=Sn(),js,_n,En=0,An=0;function ac(t,e,i){var n=e&&i||0,r=e||[];t=t||{};var s=t.node||js,a=t.clockseq!==void 0?t.clockseq:_n;if(s==null||a==null){var o=sc();s==null&&(s=js=[o[0]|1,o[1],o[2],o[3],o[4],o[5]]),a==null&&(a=_n=(o[6]<<8|o[7])&16383)}var l=t.msecs!==void 0?t.msecs:new Date().getTime(),u=t.nsecs!==void 0?t.nsecs:An+1,g=l-En+(u-An)/1e4;if(g<0&&t.clockseq===void 0&&(a=a+1&16383),(g<0||l>En)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");En=l,An=u,_n=a,l+=122192928e5;var p=((l&268435455)*1e4+u)%4294967296;r[n++]=p>>>24&255,r[n++]=p>>>16&255,r[n++]=p>>>8&255,r[n++]=p&255;var c=l/4294967296*1e4&268435455;r[n++]=c>>>8&255,r[n++]=c&255,r[n++]=c>>>24&15|16,r[n++]=c>>>16&255,r[n++]=a>>>8|128,r[n++]=a&255;for(var h=0;h<6;++h)r[n+h]=s[h];return e||oc(r)}Ls.exports=ac});var Vs=V((Vh,Hs)=>{var lc=xn(),uc=Sn();function dc(t,e,i){var n=e&&i||0;typeof t=="string"&&(e=t==="binary"?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||lc)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e)for(var s=0;s<16;++s)e[n+s]=r[s];return e||uc(r)}Hs.exports=dc});var Fn=V((qh,Us)=>{var cc=zs(),qs=Vs(),In=qs;In.v1=cc;In.v4=qs;Us.exports=In});var Gs=V((Kh,Ks)=>{Ks.exports=class{utils;config;ue_config;oid;oeid;sent;ocm_pvc_items;now;engaged;engaged_time;disengaged_time;engagement_timer;totalCompletion;totalEngagedTime;hasPageviewCompleteFired;isLinkClicked;isFormSubmitted;constructor(e,i,n,r){this.utils=e,this.config=e.config,this.ue_config=this.config.services.user_engagement,this.oid=n,this.oeid=r,this.sent=!1,this.ocm_pvc_items=JSON.parse(this.utils.window.localStorage.getItem("ocm_pvc_items"))||[],this.engaged=!1,this.engaged_time=this.getCurrentTime(),this.disengaged_time=this.engaged_time+2e3,this.totalCompletion=0,this.totalEngagedTime=0,this.hasPageviewCompleteFired=!1,this.isLinkClicked=!1,this.isFormSubmitted=!1,this.now=this.getCurrentTime()}async run(){await this.sendAndEmptyEvents(),await this.createPvcEvent(),this.initEngagementListener(),this.updateEventListener()}async sendAndEmptyEvents(){return new Promise(async(e,i)=>{let n=[...this.ocm_pvc_items];if(this.utils.window.document.visibilityState==="visible")for(let r=0;r<n.length;r++){let s=n[r],a=JSON.parse(this.utils.window.localStorage.getItem(s))||null;if(a){if(a.tet===0){a.tl+18e5<=this.now&&await this.deletePvcEvent(s);continue}await this.deletePvcEvent(s),await this.sendEventToAPI(a).then(()=>{}).catch(()=>{})}}e()})}initEngagementListener(){["touchstart","mousemove","mousedown","scroll","keydown","resize","focus"].forEach(i=>{this.utils.window.addEventListener(i,this.utils.throttle(()=>{this.engaged=!0,this.engaged_time=this.getCurrentTime(),this.engagement_timer&&clearTimeout(this.engagement_timer),this.engagement_timer=setTimeout(()=>{this.engaged=!1,this.disengaged_time=this.getCurrentTime(),this.totalEngagedTime+=this.disengaged_time-this.engaged_time},2e3)},1e3))})}updateEventListener(){setInterval(()=>{this.utils.window.document.visibilityState==="visible"&&(this.ocm_pvc_items.filter(e=>e===`ocm_pvc_${this.oeid}`).length||(this.ocm_pvc_items.push(`ocm_pvc_${this.oeid}`),this.utils.window.localStorage.setItem("ocm_pvc_items",this.ocm_pvc_items)),this.utils.window.localStorage.setItem(`ocm_pvc_${this.oeid}`,JSON.stringify(this.updatePvcEvent("updateEventListener"))))},this.ue_config.interval)}async createPvcEvent(){return new Promise((e,i)=>{let n=this.updatePvcEvent("createPvcEvent");this.ocm_pvc_items.push(`ocm_pvc_${this.oeid}`),this.utils.window.localStorage.setItem("ocm_pvc_items",JSON.stringify(this.ocm_pvc_items)),this.utils.window.localStorage.setItem(`ocm_pvc_${this.oeid}`,JSON.stringify(n)),e()})}updatePvcEvent(e){let i=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=this.getCurrentCompletion();this.totalEngagedTime+=this.engaged&&e==="updateEventListener"?this.getCurrentTime()-this.engaged_time:0,this.totalCompletion=i;let r="";if(this.config.build){let s=this.config.build.split(".");s.length>1&&(r=s[1])}return{u:this.utils.window.location.href,o:this.oeid,oi:this.oid,d:this.utils.window.location.hostname.replace("www.",""),tet:Math.ceil(parseInt(this.totalEngagedTime)/1e3),s:n,ts:this.totalCompletion,tm:this.now,tl:this.getCurrentTime(),v:r}}async deletePvcEvent(e){return new Promise((i,n)=>{this.ocm_pvc_items=JSON.parse(this.utils.window.localStorage.getItem("ocm_pvc_items")).filter(r=>r!==e),this.utils.window.localStorage.setItem("ocm_pvc_items",JSON.stringify(this.ocm_pvc_items)),this.utils.window.localStorage.removeItem(e),i()})}async sendEventToAPI(e){if(!e)return;let i="";if(this.config.build){let o=this.config.build.split(".");o.length>1&&(i=o[1])}let n={u:e.u,t:e.t,oi:e.oi,tet:parseInt(e.tet),s:e.s||0,ts:e.ts||0,o:e.o,h:e.d,tm:e.tm,v:i},r=new URLSearchParams(this.utils.window.location.search),s=Object.fromEntries(r.entries());return await fetch("https://windrunner.orangeclickmedia.com/pvc",{method:"POST",headers:{"Content-Type":"text/plain",Accept:"*/*"},body:JSON.stringify({events:[n]}),keepAlive:!0})}getCurrentCompletion(){let e=this.utils.window.document.documentElement.scrollHeight,i=this.utils.window.pageYOffset+this.utils.window.innerHeight;return i<=0?0:i>=e?1:i/e}getCurrentTime(){let e=new Date;return e.toLocaleString("el-GR",{timeZone:"Europe/Athens"}),e.getTime()}}});var Js=V((Wh,$s)=>{var hc="[OCM][Reaper] ",fc="https://windrunner.orangeclickmedia.com/insert",Ws="//windrunner.orangeclickmedia.com/usync",Cn=mn(),pc=ks(),gc=Fn();$s.exports=class{utils;config;reaper_config;_oid;_oeid;_oeid_time;data;ip;device_access;constructor(e,i){this.utils=e,this.config=i,this._oid=null,this.cookie_type=null,this._oeid=gc.v4(),this.utils.window.OCM._oeid=this._oeid,this._oeid_time=new Date().getTime(),this.reaper_config=i.services.reaper,this.data={},this.device_access=!0,this.ip=null,this.utils.window.OCM.site_language=this?.reaper_config?.language||null}run(){!this.utils.window.OCM?.hasPurposeOneConsent&&this.config.services.iab_compliance.active&&(console.warn(hc+"Device access was denied. Forcing first party."),this.device_access=!1),this.targetEventId(),this.getUserIP().catch(()=>{}).finally(()=>{this.collect().then(()=>{this.send()}).catch(e=>{})})}async getUserIP(){return new Promise(async(e,i)=>{fetch("https://www.cloudflare.com/cdn-cgi/trace").then(n=>n.text()).then(n=>{try{n=n.trim().split(`
`).reduce(function(r,s){return s=s.split("="),r[s[0]]=s[1],r},{}),this.ip=n.ip,e()}catch{fetch("https://api64.ipify.org").then(s=>s.text()).then(s=>{this.ip=s,e()}).catch(s=>{i()})}}).catch(n=>{fetch("https://api64.ipify.org").then(r=>r.text()).then(r=>{this.ip=r,e()}).catch(r=>{i()})})})}runUserEngagement(e,i){if(this.config.services?.user_engagement?.active){let n=Gs();new n(this.utils,this.config,e,i).run()}}hasAlreadyRun(){return this.utils.window.sessionStorage.getItem("has_reaper_already_run")||!1}cleanSessionStorageOnUnload(){this.utils.window.addEventListener("beforeunload",()=>{this.utils.window.sessionStorage.removeItem("has_reaper_already_run")})}targetEventId(){this.utils.window.googletag=this.utils.window.googletag||{cmd:[]},this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().setTargeting("oeid",[this._oeid])})}async collect(){return new Promise((e,i)=>{let n=pc.parse(this.utils.window.navigator.userAgent);this.reap().then(()=>{this.data={ip:this.ip,oid:this._oid,oeid:this._oeid,oeid_time:this._oeid_time,eids:"",consent:this.utils.window.OCM.hasPurposeOneConsent,cookie_type:this.cookie_type,os:`${n.os.name||""}/${n.os.versionName||""}/${n.os.version||""}`,browser:`${n.browser.name}/${n.browser.version}`||"",platform:n.platform.type||"",pageType:this.utils.window.OCM.pageType,url:`${this.utils.window.location.protocol}//${this.utils.window.location.hostname+this.utils.window.location.pathname}`,language:this.utils.window.navigator.language,hostname:this.utils.window.location.hostname.replace("www.",""),searchParams:this.utils.window.location.search,city:window.OCM?.geo?.city||window.xtbClient?.cookies.city||"",pixelRatio:this.utils.window.devicePixelRatio||null,connection:this.getConnectionSpeed(),referrer:document.referrer,viewportSize:`${document.documentElement.clientWidth}x${document.documentElement.clientHeight}`,windowSize:`${this.utils.window.outerWidth}x${this.utils.window.outerHeight}`,site_language:this?.reaper_config?.language||"-"},this.runUserEngagement(this._oid,this._oeid);let r=10,s=()=>{if(r<=0){e();return}window.ocmpbjs?typeof window.ocmpbjs.getUserIdsAsEids=="function"&&window.ocmpbjs.getUserIdsAsEids().length?(this.data.eids=JSON.stringify(window.ocmpbjs.getUserIdsAsEids()),e()):(r--,setTimeout(()=>{s()},200)):(r--,setTimeout(()=>{s()},200))};s()}).catch(r=>{i(r)})})}isDailyCallMade(){let e=this.utils.window.localStorage.getItem("ocm_sync_date");return e?this.isToday(new Date(e)):!1}isToday(e){let i=new Date;return e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()}reap(){return new Promise(async(e,i)=>{this._oid=Cn.get("_oid")||this.utils.window.localStorage.getItem("_oid")||null,this.thirdPartyCall(n=>{n?(this.saveOidInStorage(),e(n)):i()})})}updateSyncDate(){this.utils.window.localStorage.setItem("ocm_sync_date",new Date)}saveOidInStorage(){Cn.set("_oid",this._oid,{expires:400,domain:"."+this.utils.window.location.host.replace("www.",""),path:"/",Secure:!0,HttpOnly:!1}),this.utils.window.localStorage.setItem("_oid",this._oid)}deleteOidFromStorage(){Cn.remove("_oid",{domain:"."+this.utils.window.location.host.replace("www.",""),path:"/",Secure:!0,HttpOnly:!1}),this.utils.window.localStorage.removeItem("_oid")}thirdPartyCall(e){let i=new XMLHttpRequest;i.open("GET",Ws),i.setRequestHeader("Content-Type","text/plain"),i.withCredentials=!0,i.send(),i.onloadend=()=>{let n=JSON.parse(i.response);if(n.hasOwnProperty("result")&&n.result)this.cookie_type="third",this._oid=n._oid,e(!0);else if(this._oid)this._oid=n._oid,this.cookie_type="first",e(!0);else{let r=new XMLHttpRequest;r.open("GET",Ws),r.setRequestHeader("Content-Type","text/plain"),r.withCredentials=!0,r.send(),r.onloadend=()=>{let s=JSON.parse(r.response);s.hasOwnProperty("result")&&s.result?this.cookie_type="third":this.cookie_type="first",this._oid=s._oid,e(!0)},r.onerror=()=>{this.deleteOidFromStorage(),e(!1)}}},i.onerror=()=>{this.deleteOidFromStorage(),e(!1)}}getConnectionSpeed(){let e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!e||e.saveData)return null;switch(e.effectiveType){case"4g":return 3;case"3g":return 2;case"2g":case"slow-2g":return 1;default:return null}}send(){let e=new XMLHttpRequest;e.open("POST",fc),e.setRequestHeader("Content-Type","text/plain"),e.send(JSON.stringify(this.data)),e.onerror=()=>{}}}});var Ys=V(($h,Xs)=>{var mc="[OCM][Ads behind Adblock] ",vc=t=>{let e=document.createElement("script");e.src="https://cdn.unblockia.com/h.js",document.head.appendChild(e),(t.debug||t.services.blockthrough.debug)&&console.info(mc+"Loaded")};Xs.exports=vc});var Zs=V((Xh,Qs)=>{var G="[OCM][Fizz] ";Qs.exports=class{utils;config;fizz_config;slots=[];lazyload;headerBiddingFunctionality;engaging=!1;engagementTimer=null;slotsObserver=null;INTERSECTION_OBSERVER_TIMEOUT=1e3;FULLSCREEN_INTERVAL=7e3;TEADS_MAX_VIDEO_DURATION=3e4;INTERSECTION_OBSERVER_OPTIONS={root:null,rootMargin:"0px",threshold:.5};isRefreshIntervalStarted=!1;TRIGGER_REFRESH_INTERVAL=3e3;constructor(e,i){this.utils=e,this.config=i,this.fizz_config=i.services.fizz,this.headerBiddingFunctionality=i.services.hasOwnProperty("header_bidding")&&i.services.header_bidding.active?i.services.header_bidding.functionality:null}run(){if(this.utils.url.includes("google_preview=")){(this.config.debug||this.fizz_config.debug)&&console.log(G+"SEIZE FIRE. Will not run in google_preview mode.");return}if(!this.utils.allowPageType(this.fizz_config.page_types)){(this.config.debug||this.fizz_config.debug)&&console.log(G+"Page type not allowed, terminating process",this.fizz_config.page_types);return}(this.config.debug||this.fizz_config.debug)&&console.log(G+"Running..."),this.trackUserEngagement(),this.slotsObserver=this.createSlotsObserver(),this.slotRenderEndedListener(),this.adRenderSucceededListener()}allowByAdUnit(e){return!!this.fizz_config.ads_whitelist.find(i=>i.path===e)}isHBOnly(e){let i=this.fizz_config.ads_whitelist.find(n=>n.path===e);return!!(i&&i.hb_only)}allowByAdvertiser(e){if(this.fizz_config.advertisers_whitelist&&this.fizz_config.advertisers_whitelist.length===0)return!0;let i=this.fizz_config.advertisers_whitelist.find(n=>n.id===e);return i&&(this.config.debug||this.fizz_config.debug)&&console.log(G+`Found whitelisted advertiser ${i.name}`),!!i}removeFromSlots(e,i,n){this.slots.hasOwnProperty(e)&&((this.config.debug||this.fizz_config.debug)&&console.log(G,`Removing ad slot "${i}" due to not whitelisted advertiserId = ${n.advertiserId}`),delete this.slots[e])}getAdDivElement(e){let i=null;if(this.utils.config.services.lazyload.active)i=this.utils.window.document.querySelector('[data-oau-code="'+e+'"]');else{let n=this.utils.window.googletag.pubads().getSlots().filter(r=>r.getAdUnitPath()===e);n.length&&typeof n[0]=="object"&&(i=this.utils.window.document.getElementById(n[0].getSlotElementId()))}return i}trackUserEngagement(){(this.config.debug||this.fizz_config.debug)&&console.log(G+"Running user engagement listener"),["touchstart","touchmove","click","scroll","keyup"].forEach(e=>{this.utils.window.addEventListener(e,this.utils.throttle(()=>{this.engaging=!0,(this.config.debug||this.fizz_config.debug)&&console.log(G+"User engaged"),this.engagementTimer&&clearTimeout(this.engagementTimer),this.engagementTimer=setTimeout(()=>{this.engaging=!1,(this.config.debug||this.fizz_config.debug)&&console.log(G+"User disengaged")},1e4)},1e3))})}createSlotsObserver(){return new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting&&setTimeout(()=>{let n=i?.target?.id;n&&this.utils.isSlotInViewport(n)?(this.slots[n].viewedAt=Date.now(),(this.config.debug||this.fizz_config.debug)&&console.log(G+`[Intersection Observer] Slot "${i.target.id}" is visible at viewport`),this.slotsObserver.unobserve(i.target)):(this.config.debug||this.fizz_config.debug)&&console.log(G+`[Intersection Observer] Slot "${i.target.id}" is out of viewport`)},this.INTERSECTION_OBSERVER_TIMEOUT)})},this.INTERSECTION_OBSERVER_OPTIONS)}slotRenderEndedListener(){(this.config.debug||this.fizz_config.debug)&&console.log(G+"Looking for rendered slots"),this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",e=>{this.isRefreshIntervalStarted||(this.isRefreshIntervalStarted=!0,this.startRefreshInterval());let i=e.slot.getAdUnitPath(),n=e.slot.getSlotElementId(),r=this.utils.window.document.getElementById(n),s=e.isEmpty?null:e.slot.getResponseInformation();if((this.config.debug||this.fizz_config.debug)&&console.log(G+`Checking if ad unit "${i}" is in whitelisted ad units`,this.fizz_config.ads_whitelist),!this.allowByAdUnit(i))return(this.config.debug||this.fizz_config.debug)&&console.log(G+`Blocking refresh of "${i}" due to not whitelisted ad unit path`),null;if(!e.isEmpty){if((this.config.debug||this.fizz_config.debug)&&console.log(G+`Checking "${i}" for whitelisted advertiserId = ${s.advertiserId}`),!this.allowByAdvertiser(s.advertiserId))return(this.config.debug||this.fizz_config.debug)&&console.log(G+`Removing "${i}" from fizz slots due to not allowed by advertiser`),this.removeFromSlots(n,i,s),null;let a=this.getMaxHeightForSlot(i),o=this.utils.window.document.querySelector(`#${n} iframe`);if(o){let l=o.clientHeight||o.offsetHeight;l&&a===l&&!n.includes("ocm_sticky")&&!r.parentNode.classList.contains("ocm-mis-wrapper")&&(r.style.minHeight=a+"px",(this.config.debug||this.fizz_config.debug)&&console.log(G,"Attaching min height to ",i))}}if(this.slots.hasOwnProperty(n))this.slots[n].renderedAt=Date.now(),(this.config.debug||this.fizz_config.debug)&&console.log(G+`Updated time for slot "${n}"`,this.slots[n]);else{let a=+this.fizz_config.interval;this.slots[n]={gptslot:e.slot,div:n,code:i,renderedAt:Date.now(),isEmpty:e.isEmpty,viewedAt:null,hb_only:this.isHBOnly(i),adUnitInterval:a/2,refreshTurn:"HB"},r&&(this.slotsObserver.observe(this.utils.window.document.getElementById(n)),(this.config.debug||this.fizz_config.debug)&&console.log(G+`Created a new slot for "${n}"`,this.slots[n]))}(this.config.debug||this.fizz_config.debug)&&console.log(G+"All Slots: ",this.slots)})})}adRenderSucceededListener(){this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{que:[]},this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("adRenderSucceeded",e=>{this.isRefreshIntervalStarted||(this.isRefreshIntervalStarted=!0,this.startRefreshInterval());let i=e.bid.adUnitCode,n=+this.fizz_config.interval;this.slots[i]={gptslot:null,div:i,code:i,renderedAt:Date.now(),isEmpty:!1,viewedAt:Date.now()+1e3,hb_only:this.isHBOnly(i),adUnitInterval:n/2,refreshTurn:"HB"},(this.config.debug||this.fizz_config.debug)&&console.log(G+"All Slots: ",this.slots)})})}getMaxHeightForSlot(e){let i=this.utils.window.OCM.ad_units.find(n=>n.code===e);return i?i.sizes.reduce((n,r)=>Math.max(n,r[1]),0):0}getSlotByCode(e){let i=Object.keys(this.slots).find(n=>this.slots[n].code===e);return this.slots[i]}adjustMediaTypesSizes(e,i){let n={...i},r=this.getSlotByCode(e);if(r){let s=this.utils.window.document.querySelector(`#${r.div}`),a=this.utils.window.document.querySelector(`#${r.div} iframe`);if(s&&a){let o=a.clientHeight||a.offsetHeight,l=s.style&&s.style.minHeight&&s.style.minHeight!="";o&&(n.banner&&(n.banner.sizes=i.banner.sizes.filter(u=>l?u[1]===o||u[1]<o:u[1]===o),n.banner.sizes.length===0&&delete n.banner),n.video&&(n.video.playerSize=i.video.playerSize.filter(u=>l?u[1]===o||u[1]<o:u[1]===o),n.video.playerSize.length===0&&delete n.video))}}return n}determineHbAdUnits(e,i=!1,n=!1){(this.config.debug||this.fizz_config.debug)&&console.log(G+"Determining HB ad units");let r=[],s=[...this.utils.window.OCM.ad_units];for(let a of e)for(let o of s)if(o.code===a.code){let l=o?.ortb2Imp?JSON.parse(JSON.stringify(o.ortb2Imp)):{ext:{data:{}}};if(l.ext.data.fizz=!0,n){let u=this.adjustMediaTypesSizes(o.code,o.mediaTypes);!!(u.banner&&u.banner.sizes&&u.banner.sizes.length||u.video&&u.video.playerSize&&u.video.playerSize.length)&&r.push({code:o.code,mediaTypes:u,bids:i?[...o.bids.filter(p=>p.bidder!=="amazon")]:[...o.bids],ortb2Imp:l})}else r.push({code:o.code,mediaTypes:o.mediaTypes,bids:i?[...o.bids.filter(u=>u.bidder!=="amazon")]:[...o.bids],ortb2Imp:l})}return(this.config.debug||this.fizz_config.debug)&&console.log(G+"Determined HB ad units",r),r}refreshHb(e){(this.config.debug||this.fizz_config.debug)&&console.log(G+"in refreshHb");let i=this.determineHbAdUnits(e,!0,!0);i.length?this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.removeAdUnit(),(this.config.debug||this.fizz_config.debug)&&console.log(G+" Removing old ad units"),this.utils.window.ocmpbjs.addAdUnits(i),(this.config.debug||this.fizz_config.debug)&&console.log(G+"Adding new ad units",i),this.utils.window.ocmpbjs.requestBids({adUnitCodes:i.map(n=>n.code),bidsBackHandler:(n,r,s)=>{(this.config.debug||this.fizz_config.debug)&&console.log(G+"Auction has finished and the bids are : ",n),Object.keys(n).forEach(a=>{n[a].bids=n[a].bids.filter(o=>o.statusMessage!=="bidRejected"&&o.status!=="bidRejected")}),Object.keys(n).forEach(a=>{n[a].bids.length||delete n[a]}),Object.keys(n).length>0&&this.renderBidResponses(n),e.forEach(a=>{this.slots[a.div].isEmpty=n[a.div]&&n[a.div].bids&&n[a.div].bids.length||!1})}})}):e.forEach(n=>{this.slots[n.div].refreshTurn="GAM"})}renderBidResponses(e){for(let i in e){(this.config.debug||this.fizz_config.debug)&&console.log(G+"Found bid for #"+i,e[i]);let n=i,r=this.getAdDivElement(i);if(r){(this.config.debug||this.fizz_config.debug)&&console.log(G+"Ad div = ",r);let s=this.utils.window.document.createElement("iframe");s.setAttribute("id",n+"_ocm_hb"),s.setAttribute("style","border:0; overflow:hidden; margin:0px auto;display:block;"),s.width="1",s.height="1",s.setAttribute("frameborder","0"),s.setAttribute("marginheight","0"),s.setAttribute("marginwidth","0"),s.setAttribute("scrolling","no"),s.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation-by-user-activation");let a=this.utils.window.ocmpbjs.getAdserverTargetingForAdUnitCode(n);if((this.config.debug||this.fizz_config.debug)&&console.log(G+"adServerTargeting",a),a&&a.hb_adid){(this.config.debug||this.fizz_config.debug)&&console.log(G+"Rendering ad for "+n),r.querySelectorAll("script, div, iframe, ins").forEach(u=>u.remove()),r.append(s);let l=s.contentDocument||s.contentWindow.document;this.utils.window.ocmpbjs.renderAd(l,a.hb_adid),setTimeout(()=>{l.body&&(l.body.insertAdjacentHTML("afterbegin","<style>body {margin:0px !important}</style>"),l.body.style.margin="0px !important")},10),this.slotsObserver.observe(r)}}else(this.config.debug||this.fizz_config.debug)&&console.log(G+"Ad div #"+n+" not found")}}slotContainsVideo(e){let i=this.utils.window.document.getElementById(e.div),r=Date.now()-e.renderedAt||0,s=!!(i&&i.querySelector(".teads-inread")&&r<=this.TEADS_MAX_VIDEO_DURATION),a=!!(i&&i.querySelector("video")),o=i&&i.querySelector("iframe"),l=!!(o&&o.contentDocument&&o.contentDocument.querySelector("video"));return(this.config.debug||this.fizz_config.debug)&&console.log(G+`Slot ID: "${e.div}" hasVideo: ${a} hasTeads: ${s} hasVideoInIframe: ${l}`),a||l||s}startRefreshInterval(){setInterval(()=>{if((this.config.debug||this.fizz_config.debug)&&console.log(G+"Refresh interval triggered"),this.engaging){(this.config.debug||this.fizz_config.debug)&&console.log(G+"User is engaged during refresh interval trigger.");let e=Date.now(),i=[],n=[];Object.keys(this.slots).forEach(r=>{let s=this.slots[r],a=e-s.renderedAt||0,o=e-s.viewedAt||0,l=s.div&&s.div.includes("fullscreen")?this.FULLSCREEN_INTERVAL:s.adUnitInterval,u=!!s.hb_only;if(this.slotContainsVideo(s)){(this.config.debug||this.fizz_config.debug)&&console.log(G+`Slot "${s.div}" playing video. Skipping refresh for this slot.`);return}if(s.refreshTurn==="HB")a>=l&&o>=5e3&&((this.config.debug||this.fizz_config.debug)&&console.log(G+s.div+`HB Slot "${s.div}" passed time requirements. Turn: ${s.refreshTurn}`),this.utils.isSlotInViewport(s.div)?i.push(s):(this.config.debug||this.fizz_config.debug)&&console.log(G+`HB Slot "${s.div}" not inside viewport`));else if(s.refreshTurn==="GAM"){let g=this.fizz_config.interval-l>0?this.fizz_config.interval-l:this.fizz_config.interval;a>=g&&o>=3e3&&((this.config.debug||this.fizz_config.debug)&&console.log(G+s.div+`GAM Slot "${s.div}" passed time requirements`),this.utils.isSlotInViewport(s.div)&&!u?n.push(s):(this.config.debug||this.fizz_config.debug)&&console.log(G+`GAM Slot "${s.div}" not inside viewport`))}}),this.refreshHbBubbles(i),this.refreshGAMBubbles(n)}else(this.config.debug||this.fizz_config.debug)&&console.log(G+"No user engagement during refresh interval trigger")},this.TRIGGER_REFRESH_INTERVAL)}refreshHbBubbles(e){e.length?((this.config.debug||this.fizz_config.debug)&&console.log(G+"Found HB bubbles: ",e),this.refreshHb(e),e.forEach(i=>{this.slots[i.div].viewedAt=null,this.slots[i.div].renderedAt=Date.now(),this.slots[i.div].refreshTurn=i.hb_only?"HB":"GAM"}),(this.config.debug||this.fizz_config.debug)&&console.log(G+"Resetting all HB slots after refresh",this.slots)):(this.config.debug||this.fizz_config.debug)&&console.log(G+"No HB bubbles found")}refreshGAMBubbles(e){if(e.length){switch((this.config.debug||this.fizz_config.debug)&&console.log(G+"Found GAM bubbles: ",e),this.headerBiddingFunctionality){case null:this.refreshDfp(e);break;case"no_adserver":this.refreshHb(e);break;case"lazyload_v1":case"lazyload_v2":this.refreshDfpHbLazyload(e);break;default:this.refreshDfpHb(e);break}e.forEach(i=>{this.slots[i.div].viewedAt=null,this.slots[i.div].renderedAt=Date.now(),this.slots[i.div].refreshTurn="HB"}),(this.config.debug||this.fizz_config.debug)&&console.log(G+"Resetting all GAM slots after refresh",this.slots)}else(this.config.debug||this.fizz_config.debug)&&console.log(G+"No GAM bubbles found")}refreshDfp(e){(this.config.debug||this.fizz_config.debug)&&console.log(G+"in refreshDfp");let i=[];Object.keys(e).forEach(n=>{this.utils.window.googletag.cmd.push(()=>{e[n].gptslot.setTargeting("ocmFizz",["true"])}),i.push(e[n].gptslot)}),this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().refresh(i)})}refreshDfpHbLazyload(e){(this.config.debug||this.fizz_config.debug)&&console.log(G+"in refreshDfpHbLazyload");for(let i of e){let n=document.querySelector('div[data-oau-code="'+i.code+'"]');n&&!n.hasAttribute("data-lazyincluded-by-ocm")&&(n.removeAttribute("data-lazyloaded-by-ocm"),n.removeAttribute("data-oau-code"),this.utils.window.googletag.cmd.push(()=>{i.gptslot.setTargeting("ocmFizz",["true"])}))}}refreshDfpHb(e){(this.config.debug||this.fizz_config.debug)&&console.log(G+"in refreshHbDfp"),this.utils.window.ocmpbjs.adUnits=[];let i=this.determineHbAdUnits(e,!1,!1);this.utils.window.googletag.cmd.push(()=>{this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.addAdUnits(i),this.utils.window.ocmpbjs.requestBids({adUnitCodes:i.map(function(n){return n.code}),bidsBackHandler:()=>{let n=[];try{Object.keys(e).forEach(r=>{this.utils.window.googletag.cmd.push(()=>{e[r].gptslot.setTargeting("ocmFizz",["true"])}),n.push(e[r].gptslot)})}catch(r){console.error("OCM Fizz: ",r)}n.length&&(this.utils.window.ocmpbjs.setTargetingForGPTAsync(n.map(function(r){return r.getAdUnitPath()})),this.utils.window.googletag.pubads().refresh(n),this.utils.window.ocmpbjs.initAdserverSet=!0,(this.config.debug||this.fizz_config.debug)&&console.log(G+"=> HB: Called initAdServer"))}})})})}}});var to=V((Yh,eo)=>{var bc=(t,e)=>{let i="[OCM][MWI] ";if(t.services.mwi.hasOwnProperty("code")){if((t.debug||t.services.mwi.debug)&&console.log(i+"Running..."),!e.allowPageType(t.services.mwi.page_types)){(t.debug||t.services.mwi.debug)&&console.warn(i+"Terminating due to page type");return}if(!t.services.mwi.safari&&e.browser.isSafari){(t.debug||t.services.mwi.debug)&&console.warn(i+"Terminating due to Safari browser");return}if(!t.services.mwi.mobile&&e.is_mobile){(t.debug||t.services.mwi.debug)&&console.warn(i+"Terminating due to mobile device");return}if(!t.services.mwi.desktop&&!e.is_mobile){(t.debug||t.services.mwi.debug)&&console.warn(i+"Terminating due to desktop device");return}let n;e.window.googletag.cmd.push(()=>{n=googletag.defineOutOfPageSlot(t.services.mwi.code,googletag.enums.OutOfPageFormat.INTERSTITIAL),n&&(e.loadStyle("ins[data-vignette-loaded] { position:fixed !important; z-index: 2147483647 !important }"),(t.debug||t.services.mwi.debug)&&console.log(i+"Slot created"),n.addService(googletag.pubads()),n.addService(googletag.pubads()).setConfig({interstitial:{triggers:{unhideWindow:t.services.mwi&&t.services.mwi.unhideWindow||!1}}}),(e.config.services.header_bidding.active||e.config.services.lazyload.active)&&((t.debug||t.services.mwi.debug)&&console.log(i+"disableInitialLoad is on, refreshing"),e.gptPubAdsReady().then(()=>{googletag.pubads().refresh([n],{changeCorrelator:t.change_correlator!==void 0?t.change_correlator:!0})})))})}else!t.services.mwi.hasOwnProperty("code")&&(t.debug||t.services.mwi.debug)&&console.error(i+"Ad unit code missing from config")};eo.exports=bc});var no=V((Zh,io)=>{var Zt="[OCM][Injected Tags] ";io.exports=class{utils;config;it_config;parent_el;constructor(e,i,n=null){this.parent_el=n,this.utils=e,this.config=i,this.it_config=i.services.injected_tags}run(){for(let e of this.it_config.tags)e.active&&this.utils.allowPageType(e.conditions.page_types)&&this.createTag(e)}createTag(e){this.utils.contentLoaded().then(()=>{this.inject(e)})}inject(e){let i=e.div_id+"_"+this.utils.getRandomString(7);if((this.config.debug||this.it_config.debug)&&console.log(Zt+"injecting "+e.path),e.device_category!==void 0){if(e.device_category.mobile===!1&&this.utils.is_mobile){(this.config.debug||this.it_config.debug)&&console.info(Zt+"injected tag: "+e.path+" has been disabled on mobile");return}if(e.device_category.desktop===!1&&!this.utils.is_mobile){(this.config.debug||this.it_config.debug)&&console.info(Zt+"injected tag: "+e.path+" has been disabled on desktop");return}}this.parent_el&&(e.conditions.selector=this.parent_el+" "+e.conditions.selector);let n=this.utils.determineInjectionTarget(e.conditions.selector,e.conditions.position,e.conditions.count_gt,e.conditions.word_count,e.conditions.words_gt);if(!n){(this.config.debug||this.it_config.debug)&&console.info(Zt+"node NOT found, stopping process",n);return}(this.config.debug||this.it_config.debug)&&console.info(Zt+"node found: ",n);let r=document.createElement("div"),s=document.createElement("div"),a=document.createElement("script"),o=e.hasOwnProperty("mobile_inread_sticky")&&this.utils.is_mobile?e.mobile_inread_sticky:!1;if(o){r.classList.add("ocm-mis");let l=document.createElement("div");l.classList.add("ocm-mis-expand");let u=document.createElement("div");u.classList.add("ocm-mis-wrapper"),s.id=i,s.setAttribute("data-ocm-mis","true"),u.append(s),l.append(u),r.append(l)}else r.id=i;e.style!==""&&(r.style=e.style),e.classes&&typeof e.classes<"u"&&e.classes!==""&&r.setAttribute("class",e.classes),e.hasOwnProperty("size_mapping")&&e.size_mapping!==null&&e.size_mapping.hasOwnProperty("code")&&e.size_mapping.hasOwnProperty("name")&&e.size_mapping.code!==null&&e.size_mapping.name!==null?(a.text="googletag.cmd.push(function() {  "+e.size_mapping.code.replace(/g\n/,"")+"   var "+i+'_slot = googletag.defineSlot("'+e.path+'", '+e.sizes+', "'+i+'").defineSizeMapping('+e.size_mapping.name+').addService(googletag.pubads());  googletag.display("'+i+'");',!this.utils.config.services.lazyload.active&&this.utils.config.services.header_bidding.active&&(a.text+=`if (window.OCM.init_ad_server_set) { googletag.pubads().refresh([${i}_slot], { changeCorrelator: ${this.config.change_correlator!==void 0?this.config.change_correlator.toString():"true"} }); }`),a.text+="})"):(a.text="googletag.cmd.push(function() {   var "+i+'_slot = googletag.defineSlot("'+e.path+'", '+e.sizes+', "'+i+'").addService(googletag.pubads());  googletag.display("'+i+'");',!this.utils.config.services.lazyload.active&&this.utils.config.services.header_bidding.active&&(a.text+=`if (window.OCM.init_ad_server_set) { googletag.pubads().refresh([${i}_slot], { changeCorrelator: ${this.config.change_correlator!==void 0?this.config.change_correlator.toString():"true"} }); }`),a.text+="})"),e.conditions.hasOwnProperty("place")&&e.conditions.place&&this.utils.injectTag(n,r,e.conditions.place)&&(o?(s.append(a),this.utils.clipHiddenOverflows(r)):r.append(a))}}});var Tn=V(()=>{(function(){"use strict";if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(y){try{return y.defaultView&&y.defaultView.frameElement||null}catch{return null}}var e=function(y){for(var S=y,E=t(S);E;)S=E.ownerDocument,E=t(S);return S}(window.document),i=[],n=null,r=null;function s(y){this.time=y.time,this.target=y.target,this.rootBounds=m(y.rootBounds),this.boundingClientRect=m(y.boundingClientRect),this.intersectionRect=m(y.intersectionRect||h()),this.isIntersecting=!!y.intersectionRect;var S=this.boundingClientRect,E=S.width*S.height,C=this.intersectionRect,x=C.width*C.height;E?this.intersectionRatio=Number((x/E).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function a(y,S){var E=S||{};if(typeof y!="function")throw new Error("callback must be a function");if(E.root&&E.root.nodeType!=1&&E.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=l(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=y,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(E.rootMargin),this.thresholds=this._initThresholds(E.threshold),this.root=E.root||null,this.rootMargin=this._rootMarginValues.map(function(C){return C.value+C.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}a.prototype.THROTTLE_TIMEOUT=100,a.prototype.POLL_INTERVAL=null,a.prototype.USE_MUTATION_OBSERVER=!0,a._setupCrossOriginUpdater=function(){return n||(n=function(y,S){!y||!S?r=h():r=f(y,S),i.forEach(function(E){E._checkForIntersections()})}),n},a._resetCrossOriginUpdater=function(){n=null,r=null},a.prototype.observe=function(y){var S=this._observationTargets.some(function(E){return E.element==y});if(!S){if(!(y&&y.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:y,entry:null}),this._monitorIntersections(y.ownerDocument),this._checkForIntersections()}},a.prototype.unobserve=function(y){this._observationTargets=this._observationTargets.filter(function(S){return S.element!=y}),this._unmonitorIntersections(y.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},a.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},a.prototype.takeRecords=function(){var y=this._queuedEntries.slice();return this._queuedEntries=[],y},a.prototype._initThresholds=function(y){var S=y||[0];return Array.isArray(S)||(S=[S]),S.sort().filter(function(E,C,x){if(typeof E!="number"||isNaN(E)||E<0||E>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return E!==x[C-1]})},a.prototype._parseRootMargin=function(y){var S=y||"0px",E=S.split(/\s+/).map(function(C){var x=/^(-?\d*\.?\d+)(px|%)$/.exec(C);if(!x)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(x[1]),unit:x[2]}});return E[1]=E[1]||E[0],E[2]=E[2]||E[0],E[3]=E[3]||E[1],E},a.prototype._monitorIntersections=function(y){var S=y.defaultView;if(S&&this._monitoringDocuments.indexOf(y)==-1){var E=this._checkForIntersections,C=null,x=null;this.POLL_INTERVAL?C=S.setInterval(E,this.POLL_INTERVAL):(u(S,"resize",E,!0),u(y,"scroll",E,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in S&&(x=new S.MutationObserver(E),x.observe(y,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(y),this._monitoringUnsubscribes.push(function(){var F=y.defaultView;F&&(C&&F.clearInterval(C),g(F,"resize",E,!0)),g(y,"scroll",E,!0),x&&x.disconnect()});var _=this.root&&(this.root.ownerDocument||this.root)||e;if(y!=_){var A=t(y);A&&this._monitorIntersections(A.ownerDocument)}}},a.prototype._unmonitorIntersections=function(y){var S=this._monitoringDocuments.indexOf(y);if(S!=-1){var E=this.root&&(this.root.ownerDocument||this.root)||e,C=this._observationTargets.some(function(A){var F=A.element.ownerDocument;if(F==y)return!0;for(;F&&F!=E;){var T=t(F);if(F=T&&T.ownerDocument,F==y)return!0}return!1});if(!C){var x=this._monitoringUnsubscribes[S];if(this._monitoringDocuments.splice(S,1),this._monitoringUnsubscribes.splice(S,1),x(),y!=E){var _=t(y);_&&this._unmonitorIntersections(_.ownerDocument)}}}},a.prototype._unmonitorAllIntersections=function(){var y=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var S=0;S<y.length;S++)y[S]()},a.prototype._checkForIntersections=function(){if(!(!this.root&&n&&!r)){var y=this._rootIsInDom(),S=y?this._getRootRect():h();this._observationTargets.forEach(function(E){var C=E.element,x=c(C),_=this._rootContainsTarget(C),A=E.entry,F=y&&_&&this._computeTargetAndRootIntersection(C,x,S),T=null;this._rootContainsTarget(C)?(!n||this.root)&&(T=S):T=h();var R=E.entry=new s({time:o(),target:C,boundingClientRect:x,rootBounds:T,intersectionRect:F});A?y&&_?this._hasCrossedThreshold(A,R)&&this._queuedEntries.push(R):A&&A.isIntersecting&&this._queuedEntries.push(R):this._queuedEntries.push(R)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},a.prototype._computeTargetAndRootIntersection=function(y,S,E){if(window.getComputedStyle(y).display!="none"){for(var C=S,x=v(y),_=!1;!_&&x;){var A=null,F=x.nodeType==1?window.getComputedStyle(x):{};if(F.display=="none")return null;if(x==this.root||x.nodeType==9)if(_=!0,x==this.root||x==e)n&&!this.root?!r||r.width==0&&r.height==0?(x=null,A=null,C=null):A=r:A=E;else{var T=v(x),R=T&&c(T),M=T&&this._computeTargetAndRootIntersection(T,R,E);R&&M?(x=T,A=f(R,M)):(x=null,C=null)}else{var P=x.ownerDocument;x!=P.body&&x!=P.documentElement&&F.overflow!="visible"&&(A=c(x))}if(A&&(C=p(A,C)),!C)break;x=x&&v(x)}return C}},a.prototype._getRootRect=function(){var y;if(this.root&&!w(this.root))y=c(this.root);else{var S=w(this.root)?this.root:e,E=S.documentElement,C=S.body;y={top:0,left:0,right:E.clientWidth||C.clientWidth,width:E.clientWidth||C.clientWidth,bottom:E.clientHeight||C.clientHeight,height:E.clientHeight||C.clientHeight}}return this._expandRectByRootMargin(y)},a.prototype._expandRectByRootMargin=function(y){var S=this._rootMarginValues.map(function(C,x){return C.unit=="px"?C.value:C.value*(x%2?y.width:y.height)/100}),E={top:y.top-S[0],right:y.right+S[1],bottom:y.bottom+S[2],left:y.left-S[3]};return E.width=E.right-E.left,E.height=E.bottom-E.top,E},a.prototype._hasCrossedThreshold=function(y,S){var E=y&&y.isIntersecting?y.intersectionRatio||0:-1,C=S.isIntersecting?S.intersectionRatio||0:-1;if(E!==C)for(var x=0;x<this.thresholds.length;x++){var _=this.thresholds[x];if(_==E||_==C||_<E!=_<C)return!0}},a.prototype._rootIsInDom=function(){return!this.root||b(e,this.root)},a.prototype._rootContainsTarget=function(y){var S=this.root&&(this.root.ownerDocument||this.root)||e;return b(S,y)&&(!this.root||S==y.ownerDocument)},a.prototype._registerInstance=function(){i.indexOf(this)<0&&i.push(this)},a.prototype._unregisterInstance=function(){var y=i.indexOf(this);y!=-1&&i.splice(y,1)};function o(){return window.performance&&performance.now&&performance.now()}function l(y,S){var E=null;return function(){E||(E=setTimeout(function(){y(),E=null},S))}}function u(y,S,E,C){typeof y.addEventListener=="function"?y.addEventListener(S,E,C||!1):typeof y.attachEvent=="function"&&y.attachEvent("on"+S,E)}function g(y,S,E,C){typeof y.removeEventListener=="function"?y.removeEventListener(S,E,C||!1):typeof y.detatchEvent=="function"&&y.detatchEvent("on"+S,E)}function p(y,S){var E=Math.max(y.top,S.top),C=Math.min(y.bottom,S.bottom),x=Math.max(y.left,S.left),_=Math.min(y.right,S.right),A=_-x,F=C-E;return A>=0&&F>=0&&{top:E,bottom:C,left:x,right:_,width:A,height:F}||null}function c(y){var S;try{S=y.getBoundingClientRect()}catch{}return S?(S.width&&S.height||(S={top:S.top,right:S.right,bottom:S.bottom,left:S.left,width:S.right-S.left,height:S.bottom-S.top}),S):h()}function h(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function m(y){return!y||"x"in y?y:{top:y.top,y:y.top,bottom:y.bottom,left:y.left,x:y.left,right:y.right,width:y.width,height:y.height}}function f(y,S){var E=S.top-y.top,C=S.left-y.left;return{top:E,left:C,height:S.height,width:S.width,bottom:E+S.height,right:C+S.width}}function b(y,S){for(var E=S;E;){if(E==y)return!0;E=v(E)}return!1}function v(y){var S=y.parentNode;return y.nodeType==9&&y!=e?t(y):(S&&S.assignedSlot&&(S=S.assignedSlot.parentNode),S&&S.nodeType==11&&S.host?S.host:S)}function w(y){return y&&y.nodeType===9}window.IntersectionObserver=a,window.IntersectionObserverEntry=s})()});function so(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uo(t,e,i){return e&&so(t.prototype,e),i&&so(t,i),t}function Pn(){return Pn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Pn.apply(this,arguments)}function co(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ti(t,e)}function Rn(t){return Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Rn(t)}function ti(t,e){return ti=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i},ti(t,e)}function yc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function On(t,e,i){return On=yc()?Reflect.construct:function(n,r,s){var a=[null];a.push.apply(a,r);var o=new(Function.bind.apply(n,a));return s&&ti(o,s.prototype),o},On.apply(null,arguments)}function Dn(t){var e=typeof Map=="function"?new Map:void 0;return Dn=function(i){if(i===null||Function.toString.call(i).indexOf("[native code]")===-1)return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,n)}function n(){return On(i,arguments,Rn(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ti(n,i)},Dn(t)}function X(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oo(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function ce(t){return"__private_"+wc+++"_"+t}function I(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Ii,ro,lo,wc,ho,kn,Nn,We,le,at,Be,xc,Sc,ao,vt,Bn,yt,L,ue,ie,Rt,ne,$e,H,we,xe,Ae,lt,Ot,Se,Dt,Re,ut,bt,qe,Oe,Je,Xe,Z,dt,kt,Me,Nt,ei,fo,po=na(()=>{Ii=null,ro=function(){Ii=null},lo=function(){var t=window;return t.google&&t.google.ima?Promise.resolve(t.google.ima):Ii||((Ii=new Promise(function(e,i){var n=document.createElement("script");n.async=!0,n.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",n.onload=e,n.onerror=i,document.body.appendChild(n)}).then(function(){return t.google.ima})).then(ro).catch(ro),Ii)};wc=0;ho={};ho.CustomEvent=typeof CustomEvent=="function"?CustomEvent:function(t){return e[t]=new e("").constructor[t],e;function e(i,n){n||(n={});var r=document.createEvent("CustomEvent");return r.initCustomEvent(i,!!n.bubbles,!!n.cancelable,n.detail),r}}("prototype");We=ho.CustomEvent,le=ce("mediaElement"),at=ce("currentTime"),Be=ce("enabled"),xc=function(){function t(i){Object.defineProperty(this,le,{writable:!0,value:void 0}),Object.defineProperty(this,at,{writable:!0,value:void 0}),Object.defineProperty(this,Be,{writable:!0,value:void 0}),this.seeking=void 0,I(this,le)[le]=i,I(this,at)[at]=0,I(this,Be)[Be]=!1,this.seeking=!1,this.t=this.t.bind(this),this.i=this.i.bind(this),this.h=this.h.bind(this),this.enable()}var e=t.prototype;return e.i=function(){this.seeking=!0},e.h=function(){this.seeking=!1},e.t=function(){var i,n;this.seeking||(i=I(this,le)[le])!=null&&i.paused||(I(this,at)[at]=(n=I(this,le)[le])==null?void 0:n.currentTime)},e.enable=function(){var i,n,r;I(this,Be)[Be]||((i=I(this,le)[le])==null||i.addEventListener("seeking",this.i),(n=I(this,le)[le])==null||n.addEventListener("seeked",this.h),(r=I(this,le)[le])==null||r.addEventListener("timeupdate",this.t),I(this,Be)[Be]=!0)},e.disable=function(){var i,n,r;I(this,Be)[Be]&&((i=I(this,le)[le])==null||i.removeEventListener("seeking",this.i),(n=I(this,le)[le])==null||n.removeEventListener("seeked",this.h),(r=I(this,le)[le])==null||r.removeEventListener("timeupdate",this.t),I(this,Be)[Be]=!1)},e.play=function(){var i=this;return new Promise(function(n){var r;n((r=I(i,le)[le])==null?void 0:r.play())})},e.pause=function(){var i;(i=I(this,le)[le])==null||i.pause()},e.reset=function(){I(this,at)[at]=0,I(this,Be)[Be]=!1,this.seeking=!1,this.enable()},e.destroy=function(){I(this,at)[at]=0,I(this,Be)[Be]=!1,this.seeking=!1,this.disable(),I(this,le)[le]=void 0},uo(t,[{key:"enabled",get:function(){return I(this,Be)[Be]}},{key:"currentTime",get:function(){return I(this,at)[at]}},{key:"duration",get:function(){var i;return(i=I(this,le)[le])==null?void 0:i.duration}},{key:"muted",get:function(){var i;return(i=I(this,le)[le])==null?void 0:i.muted}},{key:"volume",get:function(){var i;return(i=I(this,le)[le])==null?void 0:i.volume}}]),t}(),Sc=function(){function t(){this.delegate=document.createDocumentFragment()}var e=t.prototype;return e.addEventListener=function(){this.delegate.addEventListener.apply(this.delegate,[].slice.call(arguments))},e.dispatchEvent=function(){return this.delegate.dispatchEvent.apply(this.delegate,[].slice.call(arguments))},e.removeEventListener=function(){return this.delegate.removeEventListener.apply(this.delegate,[].slice.call(arguments))},t}(),ao=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];(function(t){t.MEDIA_START="MediaStart",t.MEDIA_IMPRESSION="MediaImpression",t.MEDIA_STOP="MediaStop",t.MEDIA_CUE_POINTS_CHANGE="MediaCuePointsChange",t.MEDIA_RESUMED="MediaResumed"})(kn||(kn={})),function(t){t.AD_ERROR="AdError",t.AD_BUFFERING="AdBuffering",t.LOADED="AdLoaded",t.IMPRESSION="AdImpression",t.STARTED="AdStarted",t.FIRST_QUARTILE="AdFirstQuartile",t.MIDPOINT="AdMidpoint",t.THIRD_QUARTILE="AdThirdQuartile",t.AD_PROGRESS="AdProgress",t.COMPLETE="AdComplete",t.CLICK="AdClick",t.PAUSED="AdPaused",t.RESUMED="AdResumed",t.SKIPPED="AdSkipped",t.SKIPPABLE_STATE_CHANGED="AdSkippableStateChanged",t.VOLUME_CHANGED="AdVolumeChanged",t.VOLUME_MUTED="AdMuted",t.AD_METADATA="AdMetadata",t.AD_BREAK_READY="AdBreakReady",t.CONTENT_PAUSE_REQUESTED="AdContentPauseRequested",t.CONTENT_RESUME_REQUESTED="AdContentResumeRequested",t.ALL_ADS_COMPLETED="AdAllAdsCompleted",t.DURATION_CHANGE="AdDurationChange",t.INTERACTION="AdInteraction",t.LINEAR_CHANGED="AdLinearChanged",t.LOG="AdLog",t.USER_CLOSE="AdUserClose",t.AD_CAN_PLAY="AdCanPlay",t.EXPANDED_CHANGED="AdExpandedChanged",t.VIEWABLE_IMPRESSION="AdViewableImpression"}(Nn||(Nn={}));vt=Pn({},Nn,kn),Bn=function(){this.disableCustomPlaybackForIOS10Plus=!1,this.autoResize=!0,this.clickTrackingElement=void 0},yt=function(t){function e(){var i;return(i=t.call.apply(t,[this].concat([].slice.call(arguments)))||this).errorCode=void 0,i.innerError=void 0,i.type=void 0,i.vastErrorCode=void 0,i}return co(e,t),e}(Dn(Error));yt.ERROR_CODE_ADS_MANAGER_LOADED_TIMEOUT=9e3,yt.ERROR_CODE_REQUEST_ADS_TIMEOUT=9001;L=ce("mediaElement"),ue=ce("adElement"),ie=ce("customPlayhead"),Rt=ce("adsRenderingSettings"),ne=ce("ima"),$e=ce("adDisplayContainer"),H=ce("adsManager"),we=ce("width"),xe=ce("height"),Ae=ce("adsLoader"),lt=ce("playerOptions"),Ot=ce("resizeObserver"),Se=ce("currentAd"),Dt=ce("loadedAd"),Re=ce("mediaStartTriggered"),ut=ce("mediaImpressionTriggered"),bt=ce("mediaInActivation"),qe=ce("customPlaybackTimeAdjustedOnEnded"),Oe=ce("cuePoints"),Je=ce("adCurrentTime"),Xe=ce("adDuration"),Z=ce("startAdCallback"),dt=ce("adsManagerLoadedTimeout"),kt=ce("requestAdsTimeout"),Me=ce("wasExternallyPaused"),Nt=ce("lastNonZeroAdVolume"),ei=ce("activatePromise"),fo=function(t){function e(n,r,s,a,o){var l;a===void 0&&(a=new n.AdsRenderingSettings),o===void 0&&(o=new Bn),l=t.call(this)||this,Object.defineProperty(X(l),L,{writable:!0,value:void 0}),Object.defineProperty(X(l),ue,{writable:!0,value:void 0}),Object.defineProperty(X(l),ie,{writable:!0,value:void 0}),Object.defineProperty(X(l),Rt,{writable:!0,value:void 0}),Object.defineProperty(X(l),ne,{writable:!0,value:void 0}),Object.defineProperty(X(l),$e,{writable:!0,value:void 0}),Object.defineProperty(X(l),H,{writable:!0,value:void 0}),Object.defineProperty(X(l),we,{writable:!0,value:void 0}),Object.defineProperty(X(l),xe,{writable:!0,value:void 0}),Object.defineProperty(X(l),Ae,{writable:!0,value:void 0}),Object.defineProperty(X(l),lt,{writable:!0,value:void 0}),Object.defineProperty(X(l),Ot,{writable:!0,value:void 0}),Object.defineProperty(X(l),Se,{writable:!0,value:void 0}),Object.defineProperty(X(l),Dt,{writable:!0,value:void 0}),Object.defineProperty(X(l),Re,{writable:!0,value:!1}),Object.defineProperty(X(l),ut,{writable:!0,value:!1}),Object.defineProperty(X(l),bt,{writable:!0,value:!1}),Object.defineProperty(X(l),qe,{writable:!0,value:!1}),Object.defineProperty(X(l),Oe,{writable:!0,value:[]}),Object.defineProperty(X(l),Je,{writable:!0,value:void 0}),Object.defineProperty(X(l),Xe,{writable:!0,value:void 0}),Object.defineProperty(X(l),Z,{writable:!0,value:void 0}),Object.defineProperty(X(l),dt,{writable:!0,value:void 0}),Object.defineProperty(X(l),kt,{writable:!0,value:void 0}),Object.defineProperty(X(l),Me,{writable:!0,value:!1}),Object.defineProperty(X(l),Nt,{writable:!0,value:1}),Object.defineProperty(X(l),ei,{writable:!0,value:Promise.resolve()}),I(X(l),L)[L]=r,I(X(l),ue)[ue]=s,I(X(l),ne)[ne]=n,I(X(l),lt)[lt]=o,I(X(l),Rt)[Rt]=a,I(X(l),Rt)[Rt].restoreCustomPlaybackStateOnAdBreakComplete=!0,o.disableCustomPlaybackForIOS10Plus&&!I(X(l),L)[L].hasAttribute("playsinline")&&I(X(l),L)[L].setAttribute("playsinline",""),I(X(l),ne)[ne].settings.setDisableCustomPlaybackForIOS10Plus(o.disableCustomPlaybackForIOS10Plus),I(X(l),ie)[ie]=new xc(I(X(l),L)[L]),l.o=l.o.bind(X(l)),ao.forEach(function(c){I(X(l),L)[L].addEventListener(c,l.o)}),l.u=l.u.bind(X(l)),l.l=l.l.bind(X(l));var u=I(X(l),L)[L],g=u.offsetHeight,p=u.offsetWidth;return I(X(l),we)[we]=p,I(X(l),xe)[xe]=g,o.autoResize&&window.ResizeObserver&&(I(X(l),Ot)[Ot]=new window.ResizeObserver(function(c){return l.v(c)}),I(X(l),Ot)[Ot].observe(I(X(l),L)[L])),l}co(e,t);var i=e.prototype;return i.activate=function(){var n=this;if(!I(this,Re)[Re]&&!I(this,bt)[bt]&&(I(this,bt)[bt]=!0,I(this,L)[L].paused)){var r=function(){return I(n,L)[L].pause(),new Promise(function(s){setTimeout(function(){I(n,bt)[bt]=!1,s()},1)})};I(this,ei)[ei]=new Promise(function(s){return s(I(n,L)[L].play())}).then(r).catch(r)}},i.playAds=function(n){this.m(n)},i.loadAds=function(n,r){this.m(n,!1,r)},i.p=function(){var n=this;return I(this,ei)[ei].then(function(){return new Promise(function(r){return r(I(n,L)[L].play())})})},i.m=function(n,r,s){var a=this;r===void 0&&(r=!0),this.reset(),this.O(),I(this,ne)[ne].settings.setAutoPlayAdBreaks(r),I(this,L)[L].ended&&(I(this,ie)[ie].reset(),I(this,L)[L].currentTime=0),I(this,Z)[Z]=s,n.linearAdSlotWidth=I(this,we)[we],n.linearAdSlotHeight=I(this,xe)[xe],n.nonLinearAdSlotWidth=I(this,we)[we],n.nonLinearAdSlotHeight=I(this,xe)[xe],n.contentDuration==null&&(n.contentDuration=-3),I(this,dt)[dt]=window.setTimeout(function(){var o=new yt("No adsManagerLoadedEvent within 5000ms.");o.errorCode=yt.ERROR_CODE_ADS_MANAGER_LOADED_TIMEOUT,a.j(o)},5e3),I(this,kt)[kt]=window.setTimeout(function(){var o=new yt("No response for ads-request within 10000ms.");o.errorCode=yt.ERROR_CODE_REQUEST_ADS_TIMEOUT,a.j(o)},1e4),I(this,Ae)[Ae].requestAds(n)},i.O=function(){I(this,$e)[$e]=new(I(this,ne))[ne].AdDisplayContainer(I(this,ue)[ue],I(this,lt)[lt].disableCustomPlaybackForIOS10Plus?void 0:I(this,L)[L],I(this,lt)[lt].clickTrackingElement),I(this,Ae)[Ae]=new(I(this,ne))[ne].AdsLoader(I(this,$e)[$e]),I(this,Ae)[Ae].addEventListener(I(this,ne)[ne].AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.u,!1),I(this,Ae)[Ae].addEventListener(I(this,ne)[ne].AdErrorEvent.Type.AD_ERROR,this.l,!1)},i.skipAd=function(){I(this,H)[H]&&I(this,H)[H].skip()},i.discardAdBreak=function(){I(this,H)[H]&&I(this,H)[H].discardAdBreak()},i.play=function(){var n=this;I(this,Me)[Me]=!1,!I(this,ie)[ie].enabled&&I(this,H)[H]?I(this,H)[H].resume():I(this,dt)[dt]||this.p().then(function(){}).catch(function(){n.dispatchEvent(new We("pause"))})},i.pause=function(){I(this,Me)[Me]=!0,!I(this,ie)[ie].enabled&&I(this,H)[H]?I(this,H)[H].pause():I(this,L)[L].pause()},i.g=function(n){I(this,Oe)[Oe]=[].concat(n),this.dispatchEvent(new We(vt.MEDIA_CUE_POINTS_CHANGE,{detail:{cuePoints:[].concat(I(this,Oe)[Oe])}}))},i.A=function(n){var r=this.cuePoints.indexOf(n);r>-1&&(I(this,Oe)[Oe].splice(r,1),this.g(I(this,Oe)[Oe]))},i.resizeAd=function(n,r){I(this,we)[we]=n,I(this,xe)[xe]=r,I(this,H)[H]&&I(this,H)[H].resize(n,r,this.k()),I(this,ue)[ue].style.width=n+"px",I(this,ue)[ue].style.height=r+"px"},i.reset=function(n){n===void 0&&(n=!1),n&&(I(this,ut)[ut]=!1,I(this,Re)[Re]=!1,I(this,qe)[qe]=!1),this.C(),I(this,Oe)[Oe]=[],I(this,Me)[Me]=!1,I(this,Z)[Z]=void 0,I(this,H)[H]&&I(this,H)[H].destroy(),I(this,H)[H]=void 0,I(this,ne)[ne].settings.setAutoPlayAdBreaks(!0),n&&this.P(),I(this,ue)[ue].style.display="none"},i.P=function(){I(this,Ae)[Ae]&&(I(this,Ae)[Ae].removeEventListener(I(this,ne)[ne].AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.u,!1),I(this,Ae)[Ae].removeEventListener(I(this,ne)[ne].AdErrorEvent.Type.AD_ERROR,this.l,!1),I(this,Ae)[Ae].destroy()),I(this,$e)[$e]&&I(this,$e)[$e].destroy()},i.destroy=function(){var n,r,s,a,o=this;this.reset(!0),I(this,ie)[ie].destroy(),ao.forEach(function(l){I(o,L)[L].removeEventListener(l,o.o)}),(n=I(this,Ae)[Ae])==null||n.removeEventListener(I(this,ne)[ne].AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.u,!1),(r=I(this,$e)[$e])==null||r.destroy(),(s=I(this,Ae)[Ae])==null||s.destroy(),I(this,ut)[ut]=!1,I(this,qe)[qe]=!1,I(this,Re)[Re]=!1,(a=I(this,Ot)[Ot])==null||a.disconnect()},i.isCustomPlaybackUsed=function(){return I(this,ne)[ne].settings.getDisableCustomPlaybackForIOS10Plus()===!1&&!I(this,ue)[ue].querySelector("video")},i.C=function(){window.clearTimeout(I(this,dt)[dt]),window.clearTimeout(I(this,kt)[kt]),I(this,dt)[dt]=void 0,I(this,kt)[kt]=void 0,I(this,Se)[Se]=void 0,I(this,Je)[Je]=void 0,I(this,Xe)[Xe]=void 0,I(this,ue)[ue].style.display="none",I(this,ue)[ue].classList.remove("nonlinear"),I(this,H)[H]&&this.R()},i.o=function(n){var r=this;if(I(this,ie)[ie].enabled||n.type==="volumechange"){if(n.type==="timeupdate"){if(I(this,L)[L].currentTime<.5)return;if(I(this,H)[H]){var s=I(this,H)[H].getCuePoints().filter(function(u){return u>=0&&u<I(r,ie)[ie].currentTime}).pop();this.A(s)}!I(this,ut)[ut]&&I(this,Re)[Re]&&(this.dispatchEvent(new We(vt.MEDIA_IMPRESSION)),I(this,ut)[ut]=!0)}if(n.type!=="play"||I(this,Re)[Re]||(this.dispatchEvent(new We(vt.MEDIA_START)),I(this,Re)[Re]=!0),n.type==="ended"&&(this.isCustomPlaybackUsed()&&I(this,L)[L].currentTime===I(this,L)[L].duration&&I(this,Oe)[Oe].indexOf(-1)>-1&&(I(this,L)[L].currentTime=I(this,L)[L].duration-1e-5,I(this,qe)[qe]=!0),I(this,Ae)[Ae].contentComplete(),I(this,H)[H]||this.T()),!window.ResizeObserver&&I(this,lt)[lt].autoResize&&n.type==="loadedmetadata"){var a=I(this,L)[L],o=a.offsetHeight,l=a.offsetWidth;I(this,we)[we]=l,I(this,xe)[xe]=o,this.R()}I(this,bt)[bt]&&n.type!=="volumechange"||this.dispatchEvent(new We(n.type))}},i.S=function(n){var r=this,s=I(this,ne)[ne].AdEvent;switch(n.type){case s.Type.LOADED:var a=n.getAd();I(this,Z)[Z]&&I(this,Oe)[Oe].length===0?I(this,Z)[Z]({ad:a,start:function(){r.M(),I(r,Z)[Z]=void 0},startWithoutReset:function(){r.M()}}):I(this,Dt)[Dt]=a;break;case s.Type.AD_BREAK_READY:this.C(),I(this,Z)[Z]?(I(this,Z)[Z]({ad:I(this,Dt)[Dt],adBreakTime:n.getAdData().adBreakTime,start:function(){r.M(),I(r,Z)[Z]=void 0},startWithoutReset:function(){r.M()}}),I(this,Dt)[Dt]=void 0):this.M();break;case s.Type.STARTED:var o=I(this,Se)[Se]=n.getAd();o.getAdPodInfo().getAdPosition()>1&&I(this,H)[H].setVolume(I(this,H)[H].getVolume()),I(this,ue)[ue].classList.remove("nonlinear"),this.R(),o.isLinear()?(I(this,ie)[ie].disable(),I(this,Xe)[Xe]=o.getDuration(),I(this,Je)[Je]=0):(I(this,ue)[ue].classList.add("nonlinear"),this.I()),I(this,ue)[ue].style.display="",I(this,Me)[Me]&&(I(this,Me)[Me]=!1,I(this,H)[H].pause());break;case s.Type.ALL_ADS_COMPLETED:if(I(this,qe)[qe])return;this.isCustomPlaybackUsed()&&I(this,Se)[Se]&&I(this,Se)[Se].getAdPodInfo().getTimeOffset()!==-1&&this.I(),this.reset();break;case s.Type.CONTENT_PAUSE_REQUESTED:this.C(),I(this,Se)[Se]=n.getAd(),I(this,ue)[ue].style.display="",I(this,L)[L].pause(),this.R(),I(this,Se)[Se]&&this.A(I(this,Se)[Se].getAdPodInfo().getTimeOffset()),I(this,H)[H].setVolume(I(this,L)[L].muted?0:I(this,L)[L].volume),I(this,ie)[ie].disable(),I(this,Xe)[Xe]=I(this,Se)[Se].getDuration(),I(this,Je)[Je]=0;break;case s.Type.CONTENT_RESUME_REQUESTED:var l=!!I(this,Se)[Se];if(l){var u=I(this,H)[H].getVolume();I(this,L)[L].muted=u===0,I(this,L)[L].volume=I(this,Nt)[Nt]}I(this,qe)[qe]&&(I(this,L)[L].currentTime=I(this,L)[L].duration+1,I(this,qe)[qe]=!1),I(this,L)[L].ended?(this.reset(),this.T()):this.C(),l&&(I(this,Me)[Me]=!1,this.I());break;case s.Type.AD_METADATA:this.g(I(this,H)[H].getCuePoints()),I(this,Oe)[Oe].indexOf(0)===-1&&(I(this,Z)[Z]?I(this,Z)[Z]({start:function(){r.I(),I(r,Z)[Z]=void 0},startWithoutReset:function(){r.I()}}):this.I());break;case s.Type.AD_PROGRESS:var g=n.getAdData();I(this,Je)[Je]=g.currentTime,I(this,Xe)[Xe]=g.duration;break;case s.Type.LOG:var p=n.getAdData();I(this,Z)[Z]?I(this,Z)[Z]({start:function(){r.I(),I(r,Z)[Z]=void 0},startWithoutReset:function(){r.I()}}):p.adError&&!I(this,Se)[Se]&&this.I();break;case s.Type.VOLUME_CHANGED:var c=I(this,H)[H].getVolume();c>0&&(I(this,Nt)[Nt]=c)}},i.l=function(n){this.j(this.B(n))},i.u=function(n){var r=this,s=I(this,ne)[ne],a=s.AdEvent,o=s.AdErrorEvent.Type.AD_ERROR;window.clearTimeout(I(this,dt)[dt]);var l=I(this,H)[H]=n.getAdsManager(I(this,ie)[ie],I(this,Rt)[Rt]);Object.keys(a.Type).forEach(function(g){l.addEventListener(a.Type[g],function(p){if(r.S(p),vt[g]){var c=["LOG","AD_PROGRESS"].indexOf(g)>-1;r.dispatchEvent(new We(vt[g],{detail:{ad:p.getAd()||I(r,Se)[Se],adData:c?p.getAdData():{}}}))}})}),l.addEventListener(o,function(g){return r.j(r.B(g))});try{var u;l.init(I(this,we)[we],I(this,xe)[xe],this.k()),l.setVolume(I(this,L)[L].muted?0:I(this,L)[L].volume),(u=I(this,$e)[$e])==null||u.initialize(),I(this,Z)[Z]||this.M()}catch(g){this.j(new yt(g.message))}},i.M=function(){if(I(this,Re)[Re]||(this.dispatchEvent(new We(vt.MEDIA_START)),I(this,Re)[Re]=!0),I(this,H)[H])try{I(this,H)[H].start()}catch(n){this.j(new yt(n.message))}else this.I()},i.T=function(){var n=this;setTimeout(function(){I(n,ut)[ut]=!1,I(n,Re)[Re]=!1,I(n,qe)[qe]=!1,n.dispatchEvent(new We(vt.MEDIA_STOP))},1)},i.v=function(n){for(var r,s=function(o,l){var u=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(u)return(u=u.call(o)).next.bind(u);if(Array.isArray(o)||(u=function(p,c){if(p){if(typeof p=="string")return oo(p,c);var h=Object.prototype.toString.call(p).slice(8,-1);return h==="Object"&&p.constructor&&(h=p.constructor.name),h==="Map"||h==="Set"?Array.from(p):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?oo(p,c):void 0}}(o))){u&&(o=u);var g=0;return function(){return g>=o.length?{done:!0}:{done:!1,value:o[g++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(n);!(r=s()).done;){var a=r.value;a.contentBoxSize&&a.contentBoxSize.length===1?(I(this,we)[we]=a.contentBoxSize[0].inlineSize,I(this,xe)[xe]=a.contentBoxSize[0].blockSize):a.contentBoxSize&&a.contentBoxSize.inlineSize?(I(this,we)[we]=a.contentBoxSize.inlineSize,I(this,xe)[xe]=a.contentBoxSize.blockSize):(I(this,we)[we]=a.contentRect.width,I(this,xe)[xe]=a.contentRect.height)}this.R()},i.R=function(){if(I(this,lt)[lt].autoResize&&I(this,H)[H]){var n=I(this,Se)[Se],r=this.k();n&&!n.isLinear()?n&&(n.getWidth()>I(this,we)[we]||n.getHeight()>I(this,xe)[xe]?this.resizeAd(I(this,we)[we],I(this,xe)[xe]):(I(this,H)[H].resize(n.getWidth(),n.getHeight()+20,r),I(this,ue)[ue].style.width=n.getWidth()+"px",I(this,ue)[ue].style.height=n.getHeight()+20+"px")):this.resizeAd(I(this,we)[we],I(this,xe)[xe])}},i.k=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||I(this,L)[L].webkitDisplayingFullscreen?I(this,ne)[ne].ViewMode.FULLSCREEN:I(this,ne)[ne].ViewMode.NORMAL},i.I=function(){var n=this;I(this,ue)[ue].style.display="none",I(this,L)[L].ended||(I(this,ie)[ie].enable(),I(this,Me)[Me]?(I(this,L)[L].pause(),this.dispatchEvent(new We("pause"))):(this.p().then(function(){}).catch(function(){n.dispatchEvent(new We("pause"))}),this.dispatchEvent(new We("play")),this.dispatchEvent(new We(vt.MEDIA_RESUMED))),I(this,Me)[Me]=!1)},i.B=function(n){var r=n.getError(),s=new yt(r.getMessage());return s.type=r.getType(),s.errorCode=r.getErrorCode(),s.vastErrorCode=r.getVastErrorCode&&r.getVastErrorCode(),s.innerError=r.getInnerError(),s},i.j=function(n){var r=this;this.dispatchEvent(new We(vt.AD_ERROR,{detail:{error:n}})),this.C(),I(this,Z)[Z]?I(this,Z)[Z]({start:function(){r.I(),I(r,Z)[Z]=void 0},startWithoutReset:function(){r.I()}}):this.I()},uo(e,[{key:"volume",get:function(){return!I(this,ie)[ie].enabled&&I(this,H)[H]?I(this,H)[H].getVolume():I(this,L)[L].volume},set:function(n){!I(this,ie)[ie].enabled&&I(this,H)[H]&&I(this,H)[H].setVolume(n),I(this,L)[L].volume=n}},{key:"muted",get:function(){return!I(this,ie)[ie].enabled&&I(this,H)[H]?I(this,H)[H].getVolume()===0:I(this,L)[L].muted},set:function(n){!I(this,ie)[ie].enabled&&I(this,H)[H]&&I(this,H)[H].setVolume(n?0:I(this,Nt)[Nt]),I(this,L)[L].muted=n}},{key:"currentTime",get:function(){return I(this,Je)[Je]!==void 0?I(this,Je)[Je]:I(this,L)[L].currentTime},set:function(n){I(this,ie)[ie].enabled&&(I(this,L)[L].currentTime=n)}},{key:"duration",get:function(){return I(this,Xe)[Xe]!==void 0?I(this,Xe)[Xe]:I(this,L)[L].duration}},{key:"cuePoints",get:function(){return[].concat(I(this,Oe)[Oe])}}]),e}(Sc)});var mo=V((of,go)=>{po();go.exports=class{constructor(e,i,n,r){this.utils=e,this.config=this.utils.config,this.hb_config=this.utils.config.services.header_bidding,this.adDiv=i,this.size=n,this.bid=r,this.vastUrl=this.bid.vastUrl||null,this.vastXml=this.bid.vastXml||null,this.mediaElement=null,this.adContainer=null,this.controlsContainer=null,this.volumeButton=null}run(){this.styles(),this.html(),this.play()}play(){lo().then(()=>{window.google.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE),window.google.ima.settings.setNumRedirects(3);let e=new window.google.ima.AdsRenderingSettings;e.loadVideoTimeout=1e4,e.useStyledLinearAds=!1,e.useStyledNonLinearAds=!1;let i=new Bn;this.player=new fo(window.google.ima,this.mediaElement,this.adContainer,e,i),this.player.addEventListener("AdError",r=>{this.handleAdError(r.detail.error)}),this.player.addEventListener("AdImpression",r=>{this.handleAdImpression()}),this.player.addEventListener("AdClick",r=>{this.handleVideoEvents("click",r.detail)}),this.player.addEventListener("AdFirstQuartile",r=>{this.handleVideoEvents("first_quartile",r.detail)}),this.player.addEventListener("AdMidpoint",r=>{this.handleVideoEvents("midpoint",r.detail)}),this.player.addEventListener("AdThirdQuartile",r=>{this.handleVideoEvents("third_quartile",r.detail)}),this.player.addEventListener("AdComplete",r=>{this.handleAdEnd()}),this.controlsMute(),this.mediaElement.muted=!0,this.mediaElement.volume=0;let n=new window.google.ima.AdsRequest;n.vastLoadTimeout=1e4,this.vastUrl?n.adTagUrl=this.vastUrl:this.vastXml&&(n.adsResponse=this.vastXml),this.player.playAds(n),this.controlsContainer&&window.getComputedStyle(this.controlsContainer).display==="none"&&this.controlsContainer.setAttribute("style","display:block !important")})}handleLoaded(e){try{e.data.B.vpaid||(this.playerState=!0,setTimeout(()=>{this.playerState&&(this.visible?this.player.play():this.player.pause())},1e3))}catch{this.playerState=!0,setTimeout(()=>{this.playerState&&(this.visible?this.player.play():this.player.pause())},1e3)}this.resizeAd()}resizeAd(){if(this.bid.width<=this.size.width)return;let e=this.bid.height/this.bid.width;this.size.height=Math.floor(this.size.width*e),this.player.resize(this.size.width,this.size.height)}handleAdPlay(){this.controlsMute(),this.player.setVolume(0)}handleAdImpression(){if(this.utils.window.OCM?.vidimps&&this.utils.window.OCM.vidimps[this.bid.auctionId]){let e=this.utils.window.OCM.vidimps[this.bid.auctionId];fetch("https://windrunner.orangeclickmedia.com/pba-update",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e)}).then(i=>{}).catch(i=>{console.error(i)})}}handleVideoEvents(e,i){if(this.utils.window.OCM?.vidimps&&this.utils.window.OCM.vidimps[this.bid.auctionId]){let n=this.utils.window.OCM.vidimps[this.bid.auctionId],r={eventName:e,adUnit:n.data.adUnit,auctionId:n.data.auctionId};fetch("https://windrunner.orangeclickmedia.com/pba-video",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(r)}).then(s=>{s.json().then(a=>{})}).catch(s=>{console.error(s)})}}handleAdEnd(){this.player.destroy(),this.videoContainer.style.height=0,setTimeout(()=>{this.videoContainer.remove()},500),this.refreshAd()}handleAdError(e){console.error(e),this.refreshAd()}refreshAd(){if(this.hb_config.functionality!=="no_adserver")if(this.hb_config.functionality.includes("lazyload"))this.resetLazyLoadForAdDiv();else{let e=this.utils.window.googletag.pubads().getSlots().filter(i=>i.getSlotElementId()===this.adDiv.id);e.length&&this.utils.window.googletag.pubads().refresh(e)}}resetLazyLoadForAdDiv(){this.adDiv.removeAttribute("data-lazyloaded-by-ocm"),this.adDiv.removeAttribute("data-oau-code")}styles(){this.utils.loadStyle(`
        .ocmVideoContainer {
           display:block; margin:0 auto; width:100%; transition: height 1s, transform 1s;
        }
        .ocmAdContainer {
            position:absolute;
            left:0px;
            top:0px;
            z-index:100;
        }
        .ocmAdControls {
        	display:none;
        	width:0px;
        	height:auto;
        	position: absolute;
        	left:0px;
        	top:0px;
        	z-index:101;
        }
        /*.ocmAdPlay, */
        .ocmAdVolume {
        	position:absolute;
        	top:10px;
        	width:32px;
        	height:32px;
        	cursor: pointer;
        	border-radius:50%;
        	background-color: rgb(223 129 0 / 85%);
        	background-origin:border-box;
        	background-position:center center;
        	background-repeat: no-repeat;
        	background-size:20px;
        }
        .ocmAdLabel {
        	position:absolute;
        	top:16px;
        	left:50px;
        	width:16px;
        	height:16px;
        	font-size:12px;
        	color:#000;
        	text-shadow:1px 1px 0px rgba(255, 255, 255, 0.6)
        }
        .scaled {
            transform: scale(0.8) !important;        
        }
        .ocmAdLabel.scaled {
            left: 46px !important;
        }
        .ocmAdVolume {
        	left:10px;
        }
        /*
        .ocmAdPlay {
    		left:10px;
        }
        .ocmAdPlay.playing {
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/pause.png');
        }
        .ocmAdPlay.paused {
        	background-position: 9px 6px;
		    background-size: 18px;
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/play.png');
        }
        */
        .ocmAdVolume.unmuted {
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/mute.png');
        }
        .ocmAdVolume.muted {
        	background-position: 9px 9px;
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/unmute.png');
        }
        `)}html(){let e=`<div id="ocmVideo-${this.adDiv.id}" class="ocmVideoContainer">
              <video id="ocmMediaElement-${this.adDiv.id}" style="width:100%; height:100%;" autoplay playsinline preload="none">
              </video>
              <div id="ocmAdContainer-${this.adDiv.id}" class="ocmAdContainer"></div>
              <div class="ocmAdControls">
                <div class="ocmAdLabel">Ad</div>
                <div class="ocmAdPlay"></div>
                <div class="ocmAdVolume"></div>
                <div class="ocmAdReplay"></div>
              </div>
            </div>`;this.adDiv.insertAdjacentHTML("afterbegin",e),this.videoContainer=document.getElementById(`ocmVideo-${this.adDiv.id}`),this.mediaElement=document.getElementById(`ocmMediaElement-${this.adDiv.id}`),this.adContainer=document.getElementById(`ocmAdContainer-${this.adDiv.id}`),this.controlsContainer=document.querySelector(`#ocmVideo-${this.adDiv.id} .ocmAdControls`),this.volumeButton=document.querySelector(`#ocmVideo-${this.adDiv.id} .ocmAdControls .ocmAdVolume`),this.size.width===300&&(this.controlsContainer.classList.add("scaled"),this.volumeButton.classList.add("scaled")),this.elementListeners()}elementListeners(){this.volumeButton.addEventListener("click",e=>{this.volumeState?(this.controlsMute(),this.player.volume=0):(this.controlsUnMute(),this.player.volume=.2)})}controlsMute(){this.volumeState=!1,this.player.volume=0,this.volumeButton.classList.remove("unmuted"),this.volumeButton.classList.add("muted")}controlsUnMute(){this.volumeState=!0,this.player.volume=.1,this.volumeButton.classList.remove("muted"),this.volumeButton.classList.add("unmuted")}}});var Mn=V((lf,vo)=>{var pe="[OCM][HB] ",_c=mo();vo.exports=class{utils;config;hb_config;mode;ratio;screen_width;screen_height;analytics_adapters=[];viewedBids=[];constructor(e,i){this.utils=e,this.config=i,this.hb_config=i.services.header_bidding,this.mode=this.hb_config.functionality,this.mode==="lazyload_v2"&&this.utils.browser.isSafari&&(this.mode="lazyload_v1"),this.ratio=1,this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{que:[]},this.loadPrebidLib();let n=["Article","article","news_article","Recipe","Teen Article"];(this.hb_config.adsqRTDModuleEnabled||this.window?.ADSQ?.response)&&n.includes(this.utils.window.OCM.pageType)&&Math.random()<.1&&this.loadAdformCookie()}async prepare(e){return new Promise(async(i,n)=>{if(e=typeof e>"u"?!1:e,this.hb_config.bidderTimeout===1){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Timeout was set to 1ms, terminating process.");return}this.adjustBidderTimeout(e),this.buildAdUnits().then(()=>{this.utils.window.OCM.adBlocked||this.setupAnalytics(),this.configure(),this.mode!=="no_adserver"&&this.gptEventListeners(),i()})})}configure(){let e={buckets:[{precision:2,min:.01,max:10,increment:.01},{precision:2,max:20,increment:.1},{precision:2,max:50,increment:.5}]};this.hb_config.adServerCurrency==="CZK"&&(e={buckets:[{precision:2,max:250,increment:.25},{precision:2,max:500,increment:2.5},{precision:2,max:1250,increment:12.5}]}),this.hb_config.adServerCurrency==="RON"&&(e={buckets:[{precision:2,max:50,increment:.05},{precision:2,max:100,increment:.25},{precision:2,max:250,increment:2.5}]}),this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("bidViewable",n=>{if(this.viewedBids.includes(n.adId))return;this.viewedBids.push(n.adId),(this.config.debug||this.hb_config.debug)&&console.log(pe+"bidViewable",n);let r={eventName:"bidViewable",adUnit:n.adUnitCode.toLowerCase(),auctionId:n.auctionId};fetch("https://windrunner.orangeclickmedia.com/pba-viewability",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(r)}).then(s=>{}).catch(s=>{console.error(s)})}),(typeof this.config.uses_cmp>"u"||this.config.uses_cmp)&&this.utils.window.ocmpbjs.setConfig({consentManagement:{gdpr:{cmpApi:"iab",timeout:this.hb_config.bidderTimeout+2e4,defaultGdprScope:!0,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["ocmpba"]},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["ocmpba"]},{purpose:"reportAnalytics",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["ocmpba"]}]},usp:{cmpApi:"iab",timeout:100}}}),this.utils.window.ocmpbjs.setConfig({enableTIDs:!0,bidViewabilityIO:{enabled:!0},auctionOptions:{suppressStaleRender:!0},floors:{enforcement:{floorDeals:!1,bidAdjustment:!0},data:{currency:"EUR",schema:{fields:["mediaType"]},values:{banner:.05,video:.3}}},ortb2:{device:{geo:{},ext:{data:{}}},site:{inventorypartnerdomain:"orangeclickmedia.com",ext:{data:{hostname:this.utils.hostname.replace("www.","")}},content:{},cat:[],publisher:{domain:this.utils.hostname.replace("www.","")}},user:{ext:{data:{}},geo:{}}},firstPartyData:{skipEnrichments:!1},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},priceGranularity:e,realTimeData:this.setupRealTimeData(),gptPreAuction:{enabled:!0,useDefaultPreAuction:!0},schain:this.config.schain,currency:{adServerCurrency:this.hb_config.adServerCurrency,conversionRateFile:"https://cdn.orangeclickmedia.com/tech/libs/latest_currencies.txt",defaultRates:{EUR:{AED:3.910817,AFN:84.894456,ALL:107.055056,AMD:413.808926,ANG:1.935814,AOA:881.072944,ARS:372.591364,AUD:1.646941,AWG:1.919208,AZN:1.807316,BAM:1.956531,BBD:2.168715,BDT:117.86401,BGN:1.957687,BHD:.401352,BIF:3042.621899,BMD:1.064748,BND:1.461279,BOB:7.421817,BRL:5.184894,BSD:1.074052,BTC:40030548e-12,BTN:89.133502,BWP:14.61379,BYN:2.711069,BYR:20869.052451,BZD:2.164993,CAD:1.437393,CDF:2629.926215,CHF:.953586,CLF:.034314,CLP:946.81573,CNY:7.630087,COP:4173.01193,CRC:572.599852,CUC:1.064748,CUP:28.215811,CVE:110.321736,CZK:24.548287,DJF:191.238349,DKK:7.456109,DOP:60.971929,DZD:146.5753,EGP:32.945315,ERN:15.971214,ETB:59.379353,FJD:2.40899,FKP:.852689,GBP:.857154,GEL:2.798147,GGP:.852689,GHS:12.335344,GIP:.852689,GMD:64.41333,GNF:9220.915298,GTQ:8.453268,GYD:224.715566,HKD:8.333391,HNL:26.464107,HRK:7.468894,HTG:145.53758,HUF:384.59713,IDR:16360.006187,ILS:4.070828,IMP:.852689,INR:88.437826,IQD:1406.610175,IRR:44998.893087,ISK:145.295917,JEP:.852689,JMD:165.94846,JOD:.754055,JPY:157.011405,KES:156.196944,KGS:94.41479,KHR:4405.348314,KMF:493.08561,KPW:958.274829,KRW:1413.276748,KWD:.328964,KYD:.895052,KZT:500.462676,LAK:21368.78876,LBP:16062.338222,LKR:347.46543,LRD:198.504247,LSL:20.283725,LTL:3.143923,LVL:.644056,LYD:5.21068,MAD:10.906609,MDL:19.29074,MGA:4857.543739,MKD:61.531041,MMK:2255.55998,MNT:3702.293959,MOP:8.659572,MRO:380.114701,MUR:47.696163,MVR:16.40762,MWK:1170.613012,MXN:18.202284,MYR:4.98142,MZN:67.34523,NAD:20.283568,NGN:818.460413,NIO:39.301319,NOK:11.416378,NPR:142.618024,NZD:1.796133,OMR:.409911,PAB:1.074042,PEN:3.973384,PGK:3.946066,PHP:60.583601,PKR:319.806569,PLN:4.633989,PYG:7819.021134,QAR:3.876718,RON:4.970454,RSD:117.281535,RUB:101.682601,RWF:1287.786467,SAR:3.993773,SBD:8.94888,SCR:13.727802,SDG:640.004824,SEK:11.892751,SGD:1.450218,SHP:1.295531,SLE:23.682072,SLL:21028.764683,SOS:605.287384,SRD:40.737446,STD:22038.125066,SSP:639.913082,SYP:13843.498701,SZL:20.286433,THB:38.085492,TJS:11.793855,TMT:3.726617,TND:3.359295,TOP:2.546504,TRY:28.694091,TTD:7.290681,TWD:34.020779,TZS:2667.013813,UAH:39.670474,UGX:4001.057648,USD:1.064748,UYU:41.100751,UZS:13054.591054,VEF:3544567605004e-6,VES:35.632779,VND:25825.452408,VUV:129.731959,WST:2.928959,XAF:656.306851,XAG:.04655,XAU:556e-6,XCD:2.877533,XDR:.812826,XOF:656.294516,XPF:119.89017,YER:266.56004,ZAR:20.247877,ZMK:9584.016189,ZMW:22.04513,ZWL:342.848284}}},userSync:{syncsPerBidder:5,auctionDelay:700,filterSettings:{iframe:{bidders:["iprom"],filter:"exclude"}},userIds:[{name:"lotamePanoramaId",params:{clientId:"17623"}},{name:"identityLink",params:{pid:"1258"},storage:{type:"html5",name:"idl_env",expires:90,refreshInSeconds:8*3600}},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=pubmatic&fmt=json",type:"html5",name:"_unifiedid",expires:30}},{name:"criteo"},{name:"id5Id",params:{partner:347},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}},{name:"sharedId",storage:{type:"html5",name:"_pubcid",expires:365}}],aliasSyncEnabled:!0},maxRequestsPerOrigin:4,bidderTimeout:Number(this.hb_config.bidderTimeout),timeoutBuffer:400,useBidCache:!0,suppressEmptyKeys:!0,enableSendAllBids:!1,targetingControls:{alwaysIncludeDeals:!0},pageUrl:this.utils.window.location.protocol+"//"+this.utils.window.location.hostname+this.utils.window.location.pathname,ix:{timeout:Number(this.hb_config.bidderTimeout)},rubicon:{singleRequest:!0},amazon:{sid:this.hb_config.amazon_sid}}),[{bidder:"pubmatic",domain:"pubmatic.com",id:"157884"},{bidder:"appnexus",domain:"xandr.com",id:"14808"},{bidder:"teads",domain:"teads.tv",id:"26771"},{bidder:"adyoulike",domain:"adyoulike.com",id:"7ddaba905b34014f9bd3fe2c57d6d46e"},{bidder:"gumgum",domain:"gumgum.com",id:"14064"},{bidder:"medianet",domain:"media.net",id:"8CU32RQ72"},{bidder:"triplelift",domain:"triplelift.com",id:"9262"}].forEach(n=>{let r=n.bidder==="appnexus"?{bidders:[n.bidder],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{asi:"adops.gr",sid:this.config.adops_seller_id,hp:1}]}}}}:{bidders:[n.bidder],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[this.config.schain.config.nodes[0],{asi:`${n.domain}`,sid:`${n.id}`,hp:1}]}}}};this.utils.window.ocmpbjs.setBidderConfig(r)}),this.utils.window.ocmpbjs.bidderSettings=this.setupBidderSettings(this.hb_config.custom_granularity),this.analytics_adapters.length&&this.utils.window.ocmpbjs.enableAnalytics(this.analytics_adapters)}),this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{que:[]},this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("bidWon",i=>{if(i.mediaType==="banner"){let n=this.utils.window.googletag.pubads().getSlots().find(a=>a.getAdUnitPath()===i.adUnitCode&&a.getTargeting("hb_adid")[0]===i.adId);if(!n)return;let r=this.utils.window.document.querySelector(`div[id^="google_ads_iframe_${n.getSlotId().getId().replace(/(\.|\/)/g,"\\$1")}"]`);r&&(r.style.height=`${i.height}px !important`,r.style.width=`${i.width}px !important`);let s=this.utils.window.document.getElementById(n.getSlotElementId());if(s&&s.classList.contains("ocm-sticky-ad")){let a=s.parentNode,o=a.parentNode,l=o.parentNode;if(l.classList.contains("left")||l.classList.contains("right")){let u=document.createElement("div");u.classList.add("ocm-close-icon-container");let g=document.createElement("span");g.classList.add("ocm-button-close"),this.utils.is_mobile||(u.addEventListener("mouseenter",()=>{g.classList.add("ocm-button-close-hover")}),u.addEventListener("mouseleave",()=>{g.classList.remove("ocm-button-close-hover")})),l.style.width=`${i.width}px !important`,l.style.height=`${i.height}px !important`,l.style.marginTop=`-${i.height/2}px`,l.classList.contains("right")&&(o.style.marginLeft=`-${i.width}px`),a.style.width=`${i.width}px !important`,a.style.height=`${i.height}px !important`,o&&o.childNodes&&Array.from(o.childNodes).find(c=>c.className==="ocm-close-icon-container")||(u.append(g),o.append(u)),g.addEventListener("click",c=>{l.classList.contains("left")?l.style.marginLeft="-"+String(i.width)+"px":l.classList.contains("right")&&(l.style.marginRight="-"+String(i.height)+"px"),setTimeout(()=>{l.remove()},500),c.stopPropagation()})}}}})}),this.mode.includes("lazyload")||this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.addAdUnits(this.utils.window.OCM.ad_units),this.hb_config.debug&&console.log(pe+"Added this.utils.window.OCM.ad_units to prebid",this.utils.window.ocmpbjs.adUnits),this.mode==="no_adserver"?this.utils.window.ocmpbjs.requestBids({adUnitCodes:this.hb_config.adUnits.map(i=>i.code),bidsBackHandler:(i,n,r)=>{(this.config.debug||this.hb_config.debug)&&console.log(pe+"no_adserver bidResponses",i),Object.keys(i).forEach(s=>{i[s].bids=i[s].bids.filter(a=>a.statusMessage!=="bidRejected"&&a.status!=="bidRejected")}),Object.keys(i).forEach(s=>{i[s].bids.length||delete i[s]}),Object.keys(i).length>0&&this.directRenderBids(i)}}):this.utils.window.ocmpbjs.requestBids({bidsBackHandler:(i,n,r)=>{this.initAdServer([],!1)}})})}initAdServer(e,i=!1){if(i){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Calling initAdServer with slots:",e);let n=[];for(let r of e){let s=this.utils.window.document.querySelector('[id="'+r.getSlotElementId()+'"]');s&&(s.removeAttribute("data-lazyincluded-by-ocm"),s.setAttribute("data-lazyloaded-by-ocm",""),n.push(r.getAdUnitPath()))}typeof e<"u"&&e.length&&this.utils.window.googletag.cmd.push(()=>{this.utils.window.ocmpbjs.que.push(()=>{try{this.utils.window.ocmpbjs.setTargetingForGPTAsync(n),this.utils.window.googletag.pubads().refresh(e,{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0})}catch(r){console.error(pe,r)}})})}else(this.config.debug||this.hb_config.debug)&&console.log(pe+"Calling initAdServer for all slots"),this.utils.window.googletag.cmd.push(()=>{this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.setTargetingForGPTAsync(),this.utils.window.googletag.pubads().refresh(),this.utils.window.OCM.init_ad_server_set=!0})})}async buildAdUnits(){return new Promise((e,i)=>{(this.config.debug||this.hb_config.debug)&&console.log(pe+"Building OCM.ad_units...");let n=this.utils.window.OCM?.ad_units?JSON.parse(JSON.stringify(this.utils.window.OCM.ad_units)):[],r=this.hb_config.adUnits.map(s=>{let a=!0,o=!0,l=!0;if(a=this.filterAdUnitByPageType(s),o=this.filterAdUnitByDevice(s),l=o&&a,l)return s=this.jsonifyAd(s),s=this.removeInactiveBidderBids(s),!s||(s=this.removeNullBidParams(s),s=this.hbSizeMap(s),!s)?null:(s=this.removeBadBidSizes(s),this.config.services.geolocation.active&&this.utils.window.OCM?.geo?.country&&(s=this.geoFilter(s)),s=this.buildMediaTypes(s),s)}).filter(s=>s!=null);this.utils.window.OCM.ad_units=[...new Set([...n,...r])],e()})}filterAdUnitByPageType(e){return this.utils.allowPageType(e.page_types)?!0:((this.config.debug||this.hb_config.debug)&&console.log(pe+"Removing "+e.code+" due to page type"),!1)}filterAdUnitByDevice(e){if(this.utils.is_mobile){if(e.visibility.hasOwnProperty("mobile")&&!e.visibility.mobile)return(this.config.debug||this.hb_config.debug)&&console.log(pe+"Removing "+e.code+" due to hidden in mobile"),!1}else if(e.visibility.hasOwnProperty("desktop")&&!e.visibility.desktop)return(this.config.debug||this.hb_config.debug)&&console.log(pe+"Removing "+e.code+" due to hidden in desktop"),!1;return!0}jsonifyAd(e){typeof e.sizes<"u"&&(e.sizes.ocmStartsWith("[[")||(e.sizes="["+e.sizes+"]"),this.utils.hasJsonStructure(e.sizes)&&(e.sizes=JSON.parse(e.sizes))),e.hasOwnProperty("size_mapping")&&(e.size_mapping=e.size_mapping.map(o=>(this.utils.hasJsonStructure(o.ad_sizes)&&(o.ad_sizes=JSON.parse(o.ad_sizes)),this.utils.hasJsonStructure(o.window_size)&&(o.window_size=JSON.parse(o.window_size)),o)));let i=!1,n=!1,r=!1,s,a;return e.bids=e.bids.map(o=>{for(let l=0;l<Object.keys(o.params).length;l++){let u=Object.keys(o.params)[l],g=o.params[u];u==="size"&&g!==null&&g.indexOf("[[")<0&&o.bidder!=="ix"&&(g="["+g+"]"),o.bidder==="criteo"&&(i=!0),o.bidder==="smartadserver"&&(n=!0,s=o.params.siteId,a=o.params.pageId),o.bidder==="triplelift"&&(r=!0),this.utils.hasJsonStructure(g)&&(o.params[u]=JSON.parse(g))}return o}).filter(o=>o!==void 0),(e.media_types.indexOf("video")>-1||e.media_types.indexOf("videoInArticle")>-1)&&(i&&e.bids.push({bidder:"criteo",params:{zoneId:1697471}}),n&&e.bids.push({bidder:"smartadserver",params:{siteId:s,pageId:a,formatId:67950,domain:"//www14.smartadserver.com",video:{protocol:8}}})),e}removeInactiveBidderBids(e){for(let i=0;i<e.bids.length;i++)this.hb_config.bidders.forEach(n=>{e.bids[i]&&e.bids[i].bidder===n.name&&!n.active&&delete e.bids[i]});return e.bids=e.bids.filter(i=>i!==null&&i!=="undefined"),e.bids.length?e:null}removeNullBidParams(e){for(let i of e.bids)for(let n in i.params)i.params[n]===null&&delete i.params[n];return e}hbSizeMap(e){if(typeof e.size_mapping<"u"&&e.size_mapping.length){let i=e.size_mapping;for(let n=i.length-1;n>=0;n--){if(this.utils.screen_width>=i[n].window_size[0]){e.sizes=i[n].ad_sizes;break}if(n-1>=0){if(this.utils.screen_width<i[n].window_size[0]&&this.utils.screen_width>=i[n-1].window_size[0]){e.sizes=i[n-1].ad_sizes;break}}else if(this.utils.screen_width>=i[n].window_size[0]){e.sizes=i[n].ad_sizes;break}}e.sizes=e.sizes.filter(n=>n.length),e.sizes.length||((this.config.debug||this.hb_config.debug)&&console.log(pe+"Removing "+e.code+" due to empty size mapping for this window size"),e=null)}else if(e){let i;this.utils.hasJsonStructure(e.sizes)?i=JSON.parse(e.sizes):i=e.sizes;let n=!1;for(let r=0;r<i.length;r++)i[r][0]>728&&(n=!0);for(let r=0;r<i.length;r++)i[r][0]>this.utils.screen_width&&((this.config.debug||this.hb_config.debug)&&console.log(pe+"Removing "+i[r][0]+" from"+e.code+" due to screen width"),i.splice(r,1),r--);for(let r=0;r<i.length;r++)this.utils.screen_width>=768&&i[r][0]<728&&n&&(i.splice(r,1),r--);e.sizes=JSON.parse(JSON.stringify(i))}return e}removeBadBidSizes(e){let i=[];return e.bids=e.bids.filter(n=>{if(i=[],typeof n.params.size<"u"){let r=[1,1];if(n.params.size[0]===r&&n.bidder==="sovrn")return!0;if(!Array.isArray(n.params.size[0])&&e.sizes.containsArray(n.params.size)?i.push(n.params.size):Array.isArray(n.params.size[0])&&(i=n.params.size.filter(s=>n.params.size[0][0]===1&&n.params.size[0][1]===1&&n.bidder==="sovrn"?!0:e.sizes.containsArray(s))),i.length)n.bidder==="ix"?n.params.size=JSON.parse(JSON.stringify(i[0])):n.params.size=JSON.parse(JSON.stringify(i));else return(this.config.debug||this.hb_config.debug)&&console.log(pe+"Removing ",n," due to ad unit sizes"),!1}return!0}),e}geoFilter(e){let i=[];for(let n of this.hb_config.bidders){if(!n.geo.length){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Bidder "+n.name+" has no geo filtering, keeping and moving to the next one."),i.push(n.name);continue}n.geo.length>0&&n.geo.includes(this.utils.window.OCM.geo.country)&&((this.config.debug||this.hb_config.debug)&&console.log(pe+"Keeping "+n.name+" due to country = "+this.utils.window.OCM.geo.country),i.push(n.name))}return i.length&&((this.config.debug||this.hb_config.debug)&&console.log(pe+"Keeping ",i," due to country = "+this.utils.window.OCM.geo.country),e.bids=e.bids.filter(n=>i.includes(n.bidder))),e}buildMediaTypes(e){let i={};return typeof e.media_types<"u"?(e.media_types.includes("banner")&&(i.banner={sizes:typeof e.sizes=="string"?JSON.parse(e.sizes):e.sizes}),e.media_types.indexOf("native")>-1&&(i.native=e.native,this.utils.hasJsonStructure(i.native.image.sizes)&&(i.native.image.sizes=JSON.parse(i.native.image.sizes))),(e.media_types.indexOf("videoInArticle")>-1||e.media_types.indexOf("video")>-1)&&(i.video={},i.video.context="outstream",this.utils.hasJsonStructure(e.video.playerSize)?i.video.playerSize=this.utils.is_mobile?[[300,169]]:JSON.parse(e.video.playerSize):i.video.playerSize=this.utils.is_mobile?[[300,169]]:e.video.playerSize,i.video.w=i.video.playerSize[0][0],i.video.h=i.video.playerSize[0][1],i.video.mimes=["video/webm","video/mp4","application/javascript"],i.video.pos=1,i.video.delivery=[2],i.video.minduration=1,i.video.maxduration=30,i.video.protocols=[2,3,5,6,7,8],i.video.api=[1,2],i.video.skip=0,i.video.startdelay=0,i.video.linearity=1,i.video.placement=i.video.playerSize[0][0]===640&&!this.utils.is_mobile?3:2,i.video.playbackmethod=[2],i.video.playbackend=1,i.video.renderer={url:"https://cdn.orangeclickmedia.com/tech/libs/dummy-renderer.js",backupOnly:!1,render:n=>{try{let r=this.getAdDivElement(e.code);if(!r){console.error("Could not find element to render outstream ad",n);return}new _c(this.utils,r,{width:i.video.playerSize[0][0],height:i.video.playerSize[0][1]},n).run()}catch(r){console.error(r),console.error("Error in ad rendering!")}}})):i.banner={sizes:typeof e.sizes=="string"?JSON.parse(e.sizes):e.sizes},e.mediaTypes=i,e}adjustBidderTimeout(e){this.hb_config.bidderTimeout=Number(this.hb_config.bidderTimeout),(this.config.debug||this.hb_config.debug)&&console.log(pe+"bidderTimeout = "+this.hb_config.bidderTimeout),this.utils.is_mobile&&(e?this.hb_config.bidderTimeout+=this.hb_config.bidderTimeout*.5:this.hb_config.bidderTimeout+=this.hb_config.bidderTimeout,(this.config.debug||this.hb_config.debug)&&console.log(pe+"Mobile device, so bidderTimeout = ",this.hb_config.bidderTimeout))}loadPrebidLib(){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Loading OCM prebid library...");let e=this.utils.window.document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://cdn.orangeclickmedia.com/tech/libs/ocmpb.js";let i=this.utils.window.document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}loadAdformCookie(){let e=this.utils.window.document.createElement("img");e.src="https://track.adform.net/Serving/TrackPoint/?pm=2776384",e.setAttribute("style","display:none"),this.utils.contentLoaded().then(()=>{try{(this.utils.doc_body||this.utils.window.document.body).insertAdjacentElement("beforeend",e)}catch(i){console.error(i)}})}prebidEventListeners(){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Setting up Prebid events for HB"),this.config.log&&(this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("adRenderFailed",e=>{e.bid.vastXml&&delete e.bid.vastXml,this.utils.log.error({service:"header_bidding",msg:"adRenderFailed",error:e})})}),this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("auctionDebug",e=>{this.utils.calculateLoggingSamples();try{if(e.type!=="ERROR"&&e.type!=="WARNING")return;let i="";if(e.arguments.length){for(let n=0;n<e.arguments.length;n++)if(e.arguments[n])if(typeof e.arguments[n]=="string"&&e.arguments[n].indexOf("Invalid bid sent to bidder")>-1){let r=e.arguments[n].split(": "),s=JSON.parse(r[1]);i+="Invalid bid sent to bidder "+JSON.stringify({bidder:s.bidder,params:s.params,adUnitCode:s.adUnitCode})}else i+=JSON.stringify(e.arguments[n])}if(i==="")return;for(let n=0;n<this.utils.log_blacklist.length;n++)if(i.indexOf(this.utils.log_blacklist[n])>-1)return;e.type==="ERROR"?this.utils.willSampleErrors&&this.utils.log.error({service:"header_bidding",msg:"auctionDebug ERROR",error:i}):this.utils.willSampleWarnings&&this.utils.log.warning({service:"header_bidding",msg:"auctionDebug WARNING",error:i})}catch(i){console.error("inside auctionDebug listener",i)}})}))}gptEventListeners(){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Setting up GPT events for HB"),this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",e=>{e.slot.getAdUnitPath().indexOf("inread_pb")>-1&&e.isEmpty&&typeof this.utils.window.oopb<"u"&&this.utils.window.oopb()})})}setupRealTimeData(){return this.hb_config?.adsqRTDModuleEnabled?{auctionDelay:this.utils.window.OCM.ad_units.length===1&&this.utils.window.OCM.ad_units[0].code==="ocm-gone-mad"?1500:700,dataProviders:[{name:"adsquirrel",waitForIt:!0,params:{}}]}:{}}setupAnalytics(){typeof this.hb_config.analytics<"u"&&(this.hb_config.analytics.indexOf("ocmpba")>=0&&this.analytics_adapters.push({provider:"ocmpba"}),this.hb_config.analytics.indexOf("ga")>=0&&this.analytics_adapters.push({provider:"ga",options:{enableDistribution:!1}}),this.hb_config.analytics.indexOf("roxot")>=0&&this.analytics_adapters.push({provider:"roxot",options:{publisherIds:["6e522d36-dae0-45bd-9d3c-de88ef4334ee"]}}))}setupBidderSettings(e){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Setting up adserverTargeting & bidder settings");let i={standard:{suppressEmptyKeys:!0,adserverTargeting:[{key:"hb_auction",val:a=>a.auctionId},{key:"hb_advertiser",val:a=>a.meta.hasOwnProperty("advertiserDomains")&&a.meta.advertiserDomains.length?a.meta.advertiserDomains.map(o=>o.replace("www.","")):""},{key:"adlds",val:a=>this.utils.config.hasOwnProperty("adelaideEnabled")&&this.utils.config.adelaideEnabled?"true":"false"},{key:"infi_article_count",val:a=>this.utils.window.OCM?.infi_article_count.toString()},{key:"hb_bidder",val:a=>a.bidderCode},{key:"hb_adid",val:a=>a.adId},{key:"hb_pb",val:a=>e?a.pbCg:a.pbHg},{key:"hb_size",val:a=>a.getSize()},{key:"hb_format",val:a=>a.mediaType},{key:"hb_cpm",val:a=>a.cpm},{key:"hb_deal",val:a=>a.dealId},{key:"hb_source",val:a=>a.source},{key:"hb_sf",val:a=>"false"},{key:"hb_cache_id",val:a=>a.videoCacheKey},{key:"hb_uuid",val:a=>a.videoCacheKey}]}},n,r=1,s="";if(typeof this.hb_config.bidders<"u")for(n=0;n<this.hb_config.bidders.length;n++)r=parseFloat(this.hb_config.bidders[n].bid_cpm_adjust),s=this.hb_config.bidders[n].name,i[this.hb_config.bidders[n].name]={storageAllowed:!0,bidCpmAdjustment:(a,o)=>{if(Object.keys(o).length===1)return a;let l=a;switch(o.bidderCode){case"smartadserver":o.netRevenue===!1&&o.dealId!==""&&(l=a*.9);break;case"improvedigital":o.isNet===!1&&o.dealId!==""&&(l=a*.9);break;case"adform":o.dealId&&(l=a>3.5&&o.height===1&&o.width===1?3.5:a*.8);break;case"pubmatic":o.dealId&&(l=a*.8);break;default:l=a;break}return l}};return i}getAdDivElement(e){let i=null;if(this.utils.config.services.header_bidding.functionality==="no_adserver")return this.utils.window.document.getElementById(e);if(this.utils.config.services.lazyload.active)i=this.utils.window.document.querySelector('[data-oau-code="'+e+'"]');else{let n=this.utils.window.googletag.pubads().getSlots().filter(r=>r.getAdUnitPath()===e);n.length&&typeof n[0]=="object"&&(i=this.utils.window.document.getElementById(n[0].getSlotElementId()))}return i}directRenderBids(e){for(let i in e){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Found bid for #"+i);let n=i,r=this.utils.window.document.getElementById(n);if(r){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Ad div = ",r);let s=this.utils.window.document.createElement("iframe");s.setAttribute("id",n+"_ocm_hb"),s.setAttribute("style","border:0; overflow:hidden; margin:0px auto;display:block;"),s.width="1",s.height="1",s.setAttribute("frameborder","0"),s.setAttribute("marginheight","0"),s.setAttribute("marginwidth","0"),s.setAttribute("scrolling","no"),s.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation-by-user-activation");let a=this.utils.window.ocmpbjs.getAdserverTargetingForAdUnitCode(n);if((this.config.debug||this.hb_config.debug)&&console.log(pe+"adServerTargeting",a),a&&a.hb_adid){(this.config.debug||this.hb_config.debug)&&console.log(pe+"Rendering ad for "+n),r.querySelectorAll("script, div, iframe, ins").forEach(u=>u.remove()),r.append(s);let l=s.contentDocument||s.contentWindow.document;this.utils.window.ocmpbjs.renderAd(l,a.hb_adid),setTimeout(()=>{l.body&&(l.body.insertAdjacentHTML("afterbegin","<style>body {margin:0px !important}</style>"),l.body.style.margin="0px !important")},10),r.setAttribute("style","display:block;overflow:hidden;margin:0 auto;")}}else(this.config.debug||this.hb_config.debug)&&console.log(pe+"Ad div #"+n+" not found")}}}});var yo=V((df,bo)=>{Tn();var Ec=Mn(),oe="[OCM][LazyLoad] ";bo.exports=class{utils;config;ll_config;connection;include_observer;load_observer;custom_observers;include_offset;load_offset;offset_custom_observers;hb;scroll_direction;last_scroll_top;ticking;constructor(e,i){this.utils=e,this.config=i,this.ll_config=i.services.lazyload,this.scroll_direction="down",this.last_scroll_top=0,this.ticking=!1,this.include_offset=this.ll_config.include_offset,this.load_offset=this.ll_config.load_offset,this.offset_custom_observers=this.ll_config.load_offset,this.connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection,this.utils.serviceStates.header_bidding&&this.utils.allowPageType(this.config.services.header_bidding.page_types)?((this.config.debug||this.ll_config.debug)&&console.log(oe+"HB is active, instantiating HB"),this.hb=new Ec(e,i)):this.hb=null}async run(){(this.config.debug||this.ll_config.debug)&&console.log(oe+"running lazy loaded ads..."),this.hb&&((this.config.debug||this.ll_config.debug)&&console.log(oe+"HB is active, instantiating HB"),(!this.utils.browser.isSafari||!this.utils.browser.isFacebookApp||!this.utils.browser.isIphone)&&this.networkInfo(),await this.hb.prepare(!0)),this.calculateDetectionPixels(this.ll_config.load_offset,!1),this.ll_config.version===1?await this.v1():this.utils.browser.isSafari?await this.v1():(await this.setupObservers(),this.v2())}async v1(){(this.config.debug||this.ll_config.debug)&&console.log(oe+"v1"),await this.utils.gptPubAdsReady(),this.detectNextAdUnits(),this.setupDetectionEvent()}v2(){(this.config.debug||this.ll_config.debug)&&console.log(oe+"v2"),this.utils.gptPubAdsReady().then(()=>{let e=()=>{let i=this.utils.window.googletag.pubads().getSlots().map(n=>{let r=this.utils.window.document.querySelector('[id="'+n.getSlotElementId()+'"]:not([data-oau-code]):not([data-lazyloaded-by-ocm]):not([data-lazyincluded-by-ocm])');return r?(r.setAttribute("data-oau-code",n.getAdUnitPath()),r):null});if(i=i.filter(n=>n!=null),i.length)for(let n=0;n<i.length;n++)this.ll_config.hasOwnProperty("ad_load_offsets")&&this.ll_config.ad_load_offsets.length&&this.ll_config.ad_load_offsets.filter(r=>r.path===i[n].getAttribute("data-oau-code")&&r.offset===-1).length?((this.config.debug||this.ll_config.debug)&&console.log(oe+"ll excluded element, combust instantly",i[n]),i[n].setAttribute("data-lazyincluded-by-ocm",""),this.combust([i[n]])):i[n].hasAttribute("data-lazyincluded-by-ocm")||this.include_observer.observe(i[n]);setTimeout(e,250)};e()})}async setupObservers(){return new Promise((e,i)=>{this.custom_observers=[];let n={root:null,rootMargin:this.include_offset&&this.include_offset!=-1?String(this.include_offset)+"px 0px":"0px 0px"};(this.config.debug||this.ll_config.debug)&&console.log(oe+"Include observer config: ",n);let r={root:null,rootMargin:this.load_offset&&this.load_offset!=-1?String(this.load_offset)+"px 0px":"0px 0px"};if((this.config.debug||this.ll_config.debug)&&console.log(oe+"Load observer config: ",r),IntersectionObserver.prototype.POLL_INTERVAL=100,this.ll_config.hasOwnProperty("ad_load_offsets")&&this.ll_config.ad_load_offsets.length)for(let s of this.ll_config.ad_load_offsets){this.offset_custom_observers=s.offset&&s.offset>0?s.offset:this.ll_config.load_offset;let a=this.calculateDetectionPixels(s.offset,!0),o=[];if(!s.path||s.path==="")continue;let l={root:null,rootMargin:a&&a!=-1?String(a)+"px 0px":"0px 0px"};(this.config.debug||this.ll_config.debug)&&console.log(oe+"Custom observer config: ",l),this.custom_observers[s.path]=new IntersectionObserver((u,g)=>{let p=!1;u.forEach(c=>{typeof c.isVisible>"u"&&(c.isVisible=!0),c.isIntersecting&&((this.config.debug||this.ll_config.debug)&&console.log("intersecting",c.target.getAttribute("data-oau-code"),c.target.hasAttribute("data-lazyincluded-by-ocm")),g.unobserve(c.target),o.push(c.target),p=!0)}),p&&this.combust(o)},l)}this.load_observer=new IntersectionObserver((s,a)=>{let o=!1,l=[];s.forEach(u=>{typeof u.isVisible>"u"&&(u.isVisible=!0),u.isIntersecting&&(a.unobserve(u.target),l.push(u.target),o=!0)}),o&&this.combust(l)},r),this.include_observer=new IntersectionObserver((s,a)=>{s.forEach(o=>{typeof o.isVisible>"u"&&(o.isVisible=!0),o.isIntersecting&&(o.target.hasAttribute("data-lazyincluded-by-ocm")||(o.target.setAttribute("data-lazyincluded-by-ocm",""),this.load_observer.observe(o.target))),o.target.hasAttribute("data-lazyincluded-by-ocm")&&a.unobserve(o.target)})},n),e(!0)})}async combust(e){e=e.filter(a=>a),this.utils.window.OCM.pb_done=!1,(this.config.debug||this.ll_config.debug)&&console.log(oe+"Combusting..",e);let i=Array.from(this.utils.window.document.querySelectorAll('div[id^="ocm_sticky_"][data-lazyincluded-by-ocm]'));e=i.length?e.concat(i):e,e.length&&e.forEach(a=>{a.removeAttribute("data-lazyincluded-by-ocm"),a.setAttribute("data-lazyloaded-by-ocm","")});let n=e.map(a=>a.getAttribute("data-oau-code"));n=n.filter((a,o,l)=>l.indexOf(a)===o);let r=e.map(a=>a.getAttribute("id"));await this.utils.gptPubAdsReady();let s=this.utils.window.googletag.pubads().getSlots().filter(a=>r.includes(a.getSlotElementId())?!0:null);if(!s.length){(this.config.debug||this.ll_config.debug)&&console.warn(oe+"No lazyincluded-by-com ad units found. Aborting ad calls.");return}if((this.config.debug||this.ll_config.debug)&&(console.log(oe+"includedAdUnits",n),console.log(oe+"includedAdSlots",s)),this.hb&&this.config.services.header_bidding.bidderTimeout>1){(this.config.debug||this.ll_config.debug)&&console.log(oe+"HB is active, refreshing ads");let a=this.findAdUnitsInHb(n);a.length?((this.config.debug||this.ll_config.debug)&&console.log(oe+"Found ad unit configuration in HB, running hbRefresh"),await this.hbRefresh(a,s)):((this.config.debug||this.ll_config.debug)&&console.log(oe+"No ad unit configuration found in HB, running gptRefresh"),this.gptRefresh(s))}else(this.config.debug||this.ll_config.debug)&&console.log(oe+"refreshing ad slots"),this.gptRefresh(s)}findAdUnitsInHb(e){let i=[];return i=this.utils.window.OCM.ad_units.map(n=>{if(e.indexOf(n.code)>-1)return n}).filter(n=>n!==void 0),i}async hbRefresh(e,i){this.utils.window.ocmpbjs.que.push(()=>{try{this.utils.window.ocmpbjs.removeAdUnit(),this.utils.window.ocmpbjs.addAdUnits(e),this.utils.window.ocmpbjs.requestBids({adUnitCodes:e.map(n=>n.code),bidsBackHandler:(n,r,s)=>{this.hb.initAdServer(i,!0)},timeout:this.hb.bidderTimeout})}catch(n){console.error(n)}})}gptRefresh(e){this.utils.window.googletag.cmd.push(()=>{for(let i of e){let n=this.utils.window.document.getElementById(i.getSlotElementId());n.removeAttribute("data-lazyincluded-by-ocm"),n.setAttribute("data-lazyloaded-by-ocm","")}this.utils.window.googletag.pubads().refresh(e,{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0})})}calculateDetectionPixels(e,i){let n=this.utils.window.navigator.userAgent.indexOf("Safari")!==-1||this.utils.window.navigator.userAgent.indexOf("Firefox")!==-1||this.utils.window.navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode;if((this.config.debug||this.ll_config.debug)&&console.info(oe+"isSafariOrFirefoxOrIE is:",n),!(!n&&(typeof this.connection>"u"||typeof this.connection.effectiveType>"u"))){if(n&&(typeof this.connection>"u"||typeof this.connection.effectiveType>"u"))(this.config.debug||this.ll_config.debug)&&console.info(oe+"flagForCustomOffset is:",i),i||(this.include_offset=this.ll_config.include_offset,(this.config.debug||this.ll_config.debug)&&console.info(oe+"old include offset",this.include_offset),this.utils.is_mobile&&(this.include_offset=this.include_offset*2),(this.config.debug||this.ll_config.debug)&&console.log(oe+"Set include_offset to "+this.include_offset+"px")),this.load_offset=e,(this.config.debug||this.ll_config.debug)&&console.info(oe+"old load offset",this.load_offset),this.utils.is_mobile&&(this.load_offset=this.load_offset*2),(this.config.debug||this.ll_config.debug)&&console.log(oe+"Set load_offset to "+this.load_offset+"px");else{if((this.config.debug||this.ll_config.debug)&&console.info(oe+"flagForCustomOffset is:",i),!i){switch(this.include_offset=this.ll_config.include_offset,(this.config.debug||this.ll_config.debug)&&console.info(oe+"old include offset",this.include_offset),this.utils.is_mobile&&(this.include_offset=this.include_offset*2),this.connection.effectiveType){case"2g":this.include_offset=Math.round(this.include_offset*5);break;case"3g":this.include_offset=Math.round(this.include_offset*1.38);break;default:break}(this.config.debug||this.ll_config.debug)&&console.log(oe+"Set include_offset to "+this.include_offset+"px")}switch(this.load_offset=e,(this.config.debug||this.ll_config.debug)&&console.info(oe+"old load offset",this.load_offset),this.utils.is_mobile&&(this.load_offset=this.load_offset*2),this.connection.effectiveType){case"2g":this.load_offset=Math.round(this.load_offset*5);break;case"3g":this.load_offset=Math.round(this.load_offset*1.38);break;default:break}(this.config.debug||this.ll_config.debug)&&console.log(oe+"Set load_offset to "+this.load_offset+"px")}return this.load_offset}}networkInfo(){typeof this.connection<"u"&&typeof this.connection.effectiveType<"u"&&((this.config.debug||this.ll_config.debug)&&this.connection.addEventListener("change",this.logNetworkInfo.apply(this,[])),this.connection.addEventListener("change",()=>{this.calculateDetectionPixels(this.offset_custom_observers?this.offset_custom_observers:this.ll_config.load_offset,!1)}))}logNetworkInfo(){this.ll_config.debug&&(console.log(oe+"     downlink: "+this.connection.downlink+"Mb/s"),console.log(oe+"          rtt: "+this.connection.rtt+"ms"),console.log(oe+"========================================="))}setupDetectionEvent(){["scroll","size"].forEach(i=>{this.utils.window.addEventListener(i,this.utils.throttle(()=>{let n=this.utils.window.pageYOffset||document.documentElement.scrollTop;n>this.last_scroll_top?this.scroll_direction="down":this.scroll_direction="up",this.last_scroll_top=n<=0?0:n,this.ticking||(this.utils.window.requestAnimationFrame||setTimeout)(()=>{this.detectNextAdUnits(),this.ticking=!1}),this.ticking=!0},1e3))})}detectNextAdUnits(){(this.config.debug||this.ll_config.debug)&&console.log(oe+"Detecting next ad units");let e=[],i=[],n=[];e=googletag.pubads().getSlots();let r;for(let s of e)r=document.getElementById(s.getSlotElementId()),r&&(i.push(r),r.hasAttribute("data-oau-code")||r.setAttribute("data-oau-code",s.getAdUnitPath()));for(let s of i)!s.hasAttribute("data-lazyincluded-by-ocm")&&!s.hasAttribute("data-lazyloaded-by-ocm")&&this.lazyIncludeIt(s)!==!1&&s.setAttribute("data-lazyincluded-by-ocm","");n=Array.from(this.utils.window.document.querySelectorAll("div[data-lazyincluded-by-ocm]")),typeof n[0]<"u"&&this.lazyLoadIt(n[0])!==!1&&this.combust(n)}lazyIncludeIt(e){let i;if(e.style.display==="none"?(e.style.display="block",i=e.getBoundingClientRect(),e.style.display="none"):i=e.getBoundingClientRect(),this.scroll_direction==="down"){if(i.top>=0&&i.top<=this.utils.screen_height+this.ll_config.include_offset)return i.top}else if(this.scroll_direction==="up"&&i.bottom>=this.ll_config.include_offset*-1)return i.top;return!1}lazyLoadIt(e){let i;e.style.display==="none"?(e.style.display="block",i=e.getBoundingClientRect(),e.style.display="none"):i=e.getBoundingClientRect();let n=this.ll_config.load_offset,r=this.ll_config.ad_load_offsets.filter(s=>s.path===e.getAttribute("data-oau-code"));if(r.hasOwnProperty("offset")&&(n=r.offset),this.scroll_direction==="down"){if(i.top>=0&&i.top<=this.utils.screen_height+n)return i.top}else if(this.scroll_direction==="up"&&i.bottom>=n*-1)return i.top;return!1}}});var xo=V((cf,wo)=>{var Ac="[OCM][FouAnalytics] ",Ic=(t,e)=>{let i=t.window.document.createElement("script");i.src="https://eu.b2c.com/api/init-224mtm6aorewjg83k2h.js",i.async=!0,i.setAttribute("data-cfasync","true"),t.doc_head.append(i),(e.debug||e.services.fou_analytics.debug)&&console.log(Ac+"Loaded")};wo.exports=Ic});var _o=V((ff,So)=>{var ii="[OCM][Outbrain] ";So.exports=class{utils;config;ob_config;constructor(e,i){this.utils=e,this.config=i,this.ob_config=this.utils.is_mobile?i.services.outbrain.mobile:i.services.outbrain.desktop,this.is_injected=!1}run(){this.ob_config.enable&&((this.config.debug||this.ob_config.debug)&&console.log(ii+"Running..."),this.ob_config.lazyload&&this.ob_config.lazyload.enable?this.utils.window.document.querySelector(this.ob_config.conditions.selector)?this.utils.lazyLoad(this.ob_config.conditions.selector,{rootMargin:`0px 0px ${this.ob_config.lazyload&&this.ob_config.lazyload.offset&&this.ob_config.lazyload.offset!==""?this.ob_config.lazyload.offset:0}px 0px`},(i,n)=>{this.is_injected||(n.unobserve(i.target),this.is_injected=!0,this.inject())}):(this.config.debug||this.ob_config.debug)&&console.log(ii+"Could not find defined selector: "+this.ob_config.selector):this.inject())}inject(){let e=this.utils.determineInjectionTarget(this.ob_config.conditions.selector,this.ob_config.conditions.position,this.ob_config.conditions.count_gt,this.ob_config.conditions.word_count,this.ob_config.conditions.words_gt);if(e){let i=document.createElement("div");i.classList.add("OUTBRAIN"),(this.ob_config&&this.ob_config.include_ob_content_url===void 0||this.ob_config.include_ob_content_url)&&i.setAttribute("data-ob-contentUrl",window.location.href),i.setAttribute("data-widget-id",this.ob_config.widgetId),i.setAttribute("data-ob-installation-key",this.ob_config.installationKey);let n=this.ob_config.styles,r=this.ob_config.classes.split(" ");n&&n!==""&&i.setAttribute("style",n),r.length&&(i.classList.add("OUTBRAIN"),i.classList.add(r));let s=document.createElement("script");s.async="async",s.src="https://widgets.outbrain.com/outbrain.js",this.utils.injectTag(e,i,this.ob_config.conditions.place)&&((this.config.debug||this.ob_config.debug)&&console.log(ii+"Injected OUTBRAIN div in "+this.ob_config.conditions.place+" of ",e),this.utils.injectTag(e,s,this.ob_config.conditions.place)&&(this.config.debug||this.ob_config.debug)&&console.log(ii+"Injected OUTBRAIN script in "+this.ob_config.conditions.place+" of ",e))}else(this.config.debug||this.ob_config.debug)&&console.log(ii+"Could not find defined selector: "+this.ob_config.selector)}}});var Ao=V((gf,Eo)=>{Eo.exports=class{config;outstream_config;utils;constructor(e,i){this.config=e,this.outstream_config=e.services.outstream,this.utils=i}run(){this.outstream_config.hasOwnProperty("rules")&&this.ruleActions();let e=this.outstream_config.exclude_urls,i=e.length;for(let n=0;n<i.length;n++)if(this.utils.window.location.href.indexOf(e[n].url)>-1)return;this.outstream_config.hasOwnProperty("article_identifier")&&(this.outstream_config.article_identifier===null&&this.utils.loadScript("//a.window.teads.Tv/page/"+this.outstream_config.page_id+"/tag","text/javascript",1,"teads"),this.utils.window.document.querySelector(this.outstream_config.article_identifier)!==null&&this.utils.loadScript("//a.window.teads.Tv/page/"+this.outstream_config.page_id+"/tag","text/javascript",1,"teads"))}ruleActions(){for(let e of this.outstream_config.rules){let i=e.type,n=e.key,r=e.values,s=e.deals,a=document.getElementsByTagName("script");for(let o=0;o<a.length;o++){let l=a[o].innerHTML;if(/(setTargeting\()/.test(l)){let u=l.match(/(setTargeting\()(.+|\n*|\t*)(\))/g);for(let g=0;g<u.length;g++){let p=JSON.parse(u[g].replace(/'/g,'"').replace("setTargeting(","[").replace(")","]"));if(p[0]===n){for(let c=0;c<r.length;c++)if(p[1].indexOf(r[c])>=0){let h=Math.round(new Date().getTime()/1e3);for(let m=0;m<s.length;m++)this.utils.loadImage("https://t.window.teads.Tv/"+i+"?i="+s[m]+"&rnd="+h,"body")}}}}}}}runDemoInread(e){e.loadStyle(".teads-inread {max-width: 650px!important; margin: 10px auto;} ");var i=e.getParameterByName("vast_url")||"https://s8t.window.teads.Tv/vast/6753877076819280",n=112951,r=1,s=!1,a=!1,o="no";e.getParameterByName("view_to_start")==1&&(r=122779),e.getParameterByName("smart")==1&&(r=122781,s=!0,this.utils.window.DO_BYPASS_DO_FORCE_SMART=!0),e.getParameterByName("slider")==1&&(r=122782,a=!0,s=!0);var l="inread";this.utils.window._ttp={},this.utils.window._ttp[n]=[{slider:{allow_corner_position:!0,allow_top_position:!0},pid:r,format:l,parentWindow:!1,slot:{selector:this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]][Object.keys(this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]])[0]][0].rawSettings.slot.selector,minimum:this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]][Object.keys(this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]])[0]][0].rawSettings.slot.minimum,btf:!1,css:"margin: 0px auto 25px; max-width: 650px !important;"}}],this.utils.window._tta={},this.utils.window._tta[n]=[{type:"VastUrl",content:i,portfolio_item_id:1,settings:{values:{pageId:n,placementId:r,placementFormat:l,threshold:50,adType:"video"},components:{credits:{display:!1,text:"",link:"#"},closeButton:{display:!0}},behaviors:{onlyNative:!1,smartPosition:{corner:s,top:s},slider:{enable:a},videoPause:o}}}];var u=document.createElement("script");u.src="//a.teads.tv/media/format/v3/teads-format.js",document.head.appendChild(u)}}});var Fo=V((vf,Io)=>{var He="[OCM][StoryTeller] ",Fc="//cdn.orangeclickmedia.com/tech/libs/deckard-cain.js";Io.exports=class{utils;config;st_config;conditions;stickyConfig;selector;constructor(e,i){this.utils=e,this.config=i,this.st_config=i.services.story_teller,this.conditions=e.is_mobile?this.st_config.mobile.conditions:this.st_config.desktop.conditions,this.stickyConfig=e.is_mobile?this.st_config.mobile.sticky:this.st_config.desktop.sticky,this.selector=null}run(){(this.config.debug||this.st_config.debug)&&console.log(He+"Running..."),this.setGlobals(),this.loadIma().then(()=>{if(!this.utils.allowPageType(this.conditions.page_types)){(this.config.debug||this.st_config.debug)&&console.log(He+"Page type not allowed, terminating process",this.conditions.page_types);return}this.getStories().then(()=>{let e=this.createWrapper(),i=this.utils.determineInjectionTarget(this.conditions.selector,this.conditions.position,this.conditions.count_gt,this.conditions.words,this.conditions.words_gt);if(!i){(this.config.debug||this.st_config.debug)&&console.info(He+"selector NOT found, stopping process",i);return}e&&(this.utils.injectTag(i,e,this.conditions.place),this.utils.waitFor("ADSQ.response",()=>{(this.config.debug||this.st_config.debug)&&this.utils.window?.ADSQ?.response&&console.log(He+"ADSQ.response",this.utils.window?.ADSQ?.response),this.populateWrapper(e)},50,()=>{this.populateWrapper(e)}))}).catch(()=>{this.utils.window.OCM.ST.stories=null,this.utils.window.OCM.ST.video_url="//cdn.orangeclickmedia.com/videos/clouds-720.mp4",this.utils.window.OCM.ST.source="video"})})}getStories(){return new Promise((e,i)=>{if(this.st_config.source==="adsquirrel")this.fetchStoriesFromAdsquirrel().then(()=>{e()}).catch(()=>{(this.config.debug||this.st_config.debug)&&console.log(He+"Failed fetchStoriesFromAdsquirrel, falling back to fetchStoriesFromRss"),this.fetchStoriesFromRss().then(()=>{e()}).catch(()=>{(this.config.debug||this.st_config.debug)&&console.log(He+"Failed fetchStoriesFromRss, falling back to cloud video"),i()})});else if(this.st_config.source==="rss"){if(this.st_config.stories_type==="video"){e();return}this.fetchStoriesFromRss().then(()=>{e()}).catch(()=>{(this.config.debug||this.st_config.debug)&&console.log(He+"Failed fetchStoriesFromRss, falling back to cloud video"),i()})}else i()})}fetchStoriesFromRss(){return new Promise(async(e,i)=>{(!this.st_config.rss_url||this.st_config.rss_url==="")&&i(),this.utils.parseRss(this.st_config.rss_url).then(n=>{this.utils.window.OCM.ST.stories=[],n.forEach(r=>{(this.config.debug||this.st_config.debug)&&console.log(He+"Pushing to stories [",r.title,r.link,r.image,"]"),this.utils.window.OCM.ST.stories.push({url:r.link,title:r.title,img:r?.image})}),e()}).catch(n=>{console.error(n),i()})})}fetchStoriesFromAdsquirrel(){return new Promise((e,i)=>{this.utils.waitFor("ADSQ",()=>{if(this.utils.window.ADSQ.response===null||this.utils.window.ADSQ.response.classified_as===null){(this.config.debug||this.st_config.debug)&&console.warn(He+"this.utils.window.ADSQ.response was null, rejecting fetchStoriesFromAdsquirrel"),i();return}let n="hostname="+this.utils.window.location.host+"&",r="classification="+encodeURIComponent(this.utils.window.ADSQ.response.classified_as[0].split("/")[0])+"&",s="";s+=n,s+=r,s=s.substring(0,s.length-1),s=btoa(s),fetch("https://api.adsquirrel.ai/stories?q="+s,{headers:{Accept:"application/json","Content-Type":"text/plain"},method:"GET"}).then(a=>a.json()).then(a=>{this.utils.window.OCM.ST.stories=a?.filter(o=>o.url!==this.utils.window.location.protocol+"//"+this.utils.window.location.host+this.utils.window.location.pathname),typeof this.utils.window.OCM.ST.stories>"u"&&((this.config.debug||this.st_config.debug)&&console.warn(He+"this.utils.window.OCM.ST.stories was undefined, rejecting fetchStoriesFromAdsquirrel"),i()),(this.config.debug||this.st_config.debug)&&console.log(He+"this.utils.window.OCM.ST.stories is gg, resolving fetchStoriesFromAdsquirrel"),e()}).catch(()=>{(this.config.debug||this.st_config.debug)&&console.warn(He+"Could not fetch stories from api, rejecting fetchStoriesFromAdsquirrel"),i()})},100,()=>{(this.config.debug||this.st_config.debug)&&console.warn(He+"ADSQ response took too long to respond, rejecting fetchStoriesFromAdsquirrel"),i()})})}setGlobals(){(this.config.debug||this.st_config.debug)&&console.log(He+"Setting globals"),this.utils.window.OCM.ST={ad_tag_url:this.st_config.ad_tag_url,delay_first_ad_request:this.st_config.delay_first_ad_request,load_offset:this.st_config.load_offset,source:this.st_config.source,rss_url:this.st_config.rss_url,stories_type:this.st_config.stories_type,video_url:this.st_config.video_url,captions_url:this.st_config.captions_url,debug:this.config.debug||this.st_config.debug,color:this.st_config.color,link_target:this.st_config.link_target,link_text:this.st_config.link_text,branding:this.st_config.branding,sticky:this.stickyConfig,correlator:new Date().getTime(),device:this.utils.is_mobile?"mobile":"desktop"}}createWrapper(){(this.config.debug||this.st_config.debug)&&console.log(He+"Creating wrapper div#ocm-st"),this.utils.loadStyle("#ocm-st { max-width:640px; display:block; margin:0 auto 1rem; position: relative; }");let e=this.utils.window.document.createElement("div");e.id="ocm-st";let i=this.utils.is_mobile?this.st_config.mobile.styles:this.st_config.desktop.styles,n=this.utils.is_mobile?this.st_config.mobile.classes:this.st_config.desktop.classes;return i&&i!==""&&(e.style=i),n&&n!==""&&e.setAttribute("class",n),e}loadIma(){return new Promise((e,i)=>{try{let n=this.utils.window.document.getElementsByTagName("script")[0],r=this.utils.window.document.createElement("script");r.src=this.config.debug||this.st_config.debug?"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js":"//imasdk.googleapis.com/js/sdkloader/ima3.js",n.parentNode.insertBefore(r,n),r.onload=()=>{e()}}catch{i()}})}populateWrapper(e){(this.config.debug||this.st_config.debug)&&console.log(He+"Populating #ocm-st");let i=this.utils.window.document.createElement("script");i.src=Fc,e.append(i)}}});var Po=V((yf,To)=>{var ge="[OCM][StoryTellerV2] ",Cc="//cdn.orangeclickmedia.com/tech/libs/deckard-cain-v2.js",Tc=Fn(),Co=mn();To.exports=class{utils;config;stConfig;conditions;stickyConfig;selector;expirationTime;now;constructor(e,i){this.stVisitedURLs=[],this.utils=e,this.config=i,this.stConfig=i.services.story_teller_v2,this.conditions=e.is_mobile?this.stConfig.mobile.conditions:this.stConfig.desktop.conditions,this.stickyConfig=e.is_mobile?this.stConfig.mobile.sticky:this.stConfig.desktop.sticky,this.stickyBottomHeight=0,this.isIntersecting=!1,this.isMounted=!1,this.selector=null,this.now=new Date().getTime();let n=7*24*60*60*1e3;this.expirationTime=this.now+n,this.eId=Tc.v4(),this.ANALYTICS_TIMEOUT=15*60*1e3}run(){if((this.config.debug||this.stConfig.debug)&&console.log(ge+"Running..."),this.stConfig.enable_analytics&&((this.config.debug||this.stConfig.debug)&&console.log(ge+"Analytics are enabled"),this.startTrackAnalytics()),this.getVisitedStories(),this.setWindowGlobals(),!this.utils.allowPageType(this.conditions.page_types)){(this.config.debug||this.stConfig.debug)&&console.log(ge+"Page type not allowed, terminating process",this.conditions.page_types);return}this.getStories().then(()=>{this.filterStories();let e=this.createWrapper(),i=this.utils.determineInjectionTarget(this.conditions.selector,this.conditions.position,this.conditions.count_gt,this.conditions.words,this.conditions.words_gt);if(!i){(this.config.debug||this.stConfig.debug)&&console.info(ge+"selector NOT found, stopping process",i);return}e&&(this.utils.injectTag(i,e,this.conditions.place),this.utils.waitFor("ADSQ.response",()=>{(this.config.debug||this.stConfig.debug)&&this.utils.window?.ADSQ?.response&&console.log(ge+"ADSQ.response",this.utils.window?.ADSQ?.response),this.handleBottomSticky(),this.populateWrapper(e)},50,()=>{(this.stConfig.source==="rss"||(this.stConfig.source==="adsquirrel"&&this.utils.window?.ADSQ?.response)(this.stConfig.source==="adsquirrel"&&this.stConfig.rss_url!==""))&&(this.handleBottomSticky(),this.populateWrapper(e))}))}).catch(()=>{this.utils.window.OCM.ST.stories=[]})}initAnalytics(){if(this.utils.window&&this.utils.window.localStorage)try{let e=this.utils.window.localStorage.getItem("ost_analytics")?JSON.parse(this.utils.window.localStorage.getItem("ost_analytics")):[];e.push({id:this.eId,o:Co.get("_oid")||this.utils.window.localStorage.getItem("_oid")||null,oe:this.utils.window.OCM._oeid,u:this.utils.window.location.href,nc:[],pc:[],vs:[],ls:[],r:[],m:!0,t:this.now}),(this.config.debug||this.stConfig.debug)&&console.log(ge+"Initializing track analytics: ",e),this.utils.window.localStorage.setItem("ost_analytics",JSON.stringify(e)),this.utils.window.sessionStorage.setItem("ost_aid",this.eId)}catch{let i=[{id:this.eId,o:Co.get("_oid")||this.utils.window.localStorage.getItem("_oid")||null,oe:this.utils.window.OCM._oeid,u:this.utils.window.location.href,nc:[],pc:[],vs:[],ls:[],r:[],m:!0,t:this.now}];(this.config.debug||this.stConfig.debug)&&console.log(ge+"Initializing track analytics: ",i),this.utils.window.localStorage.setItem("ost_analytics",JSON.stringify(i)),this.utils.window.sessionStorage.setItem("ost_aid",this.eId)}}startTrackAnalytics(){if(this.utils.window&&this.utils.window.localStorage){let e=this.utils.window.localStorage.getItem("ost_analytics")?JSON.parse(this.utils.window.localStorage.getItem("ost_analytics")):[],i=[...e],n=[];for(let r of e)r.t+this.ANALYTICS_TIMEOUT<=this.now&&(i=i.filter(s=>s.id!==r.id),r&&(r.nc&&r.nc.length>0||r.pc&&r.pc.length>0||r.vs&&r.vs.length>0||r.r&&r.r.length>0||r.ls&&r.ls.length>0)&&n.push(r));n&&n.length>0?fetch("https://storyteller-events-worker.ocm.workers.dev/st-events",{method:"POST",headers:{"Content-Type":"application/json"},mode:"no-cors",body:JSON.stringify({events:n})}).then(r=>{this.utils.window.localStorage.setItem("ost_analytics",JSON.stringify(i))}).catch(r=>{(this.config.debug||this.stConfig.debug)&&console.log(ge+"Failed to store st events: ",r)}).finally(()=>{this.initAnalytics()}):this.initAnalytics()}}getVisitedStories(){let e=this.utils.window.location.protocol+"//"+this.utils.window.location.hostname+this.utils.window.location.pathname,i=this.utils.window.localStorage.getItem("osturls");i||(this.utils.window.localStorage.setItem("osturls",JSON.stringify({urls:this.stVisitedURLs,exp:this.expirationTime})),i=this.utils.window.localStorage.getItem("osturls"));let n=JSON.parse(i);n&&this.now>=n.exp&&this.utils.window.localStorage.removeItem("osturls"),this.stVisitedURLs=n?n.urls:[],this.utils.window.location.href.includes("ref=storyteller")&&!this.stVisitedURLs.includes(e)&&(this.stVisitedURLs.push(e),this.utils.window.localStorage.setItem("osturls",JSON.stringify({urls:this.stVisitedURLs,exp:this.expirationTime})))}filterStories(){if(this.utils.window&&this.utils.window.localStorage.getItem("osturls")){let e=this.utils.window.OCM.ST.stories.filter(i=>!this.stVisitedURLs.includes(i.url));e.length>4&&(this.utils.window.OCM.ST.stories=JSON.parse(JSON.stringify(e)))}}getStories(){return new Promise((e,i)=>{this.stConfig.source==="adsquirrel"?this.fetchStoriesFromAdsquirrel().then(()=>{e()}).catch(()=>{(this.config.debug||this.stConfig.debug)&&console.log(ge+"Failed fetchStoriesFromAdsquirrel, falling back to fetchStoriesFromRss"),this.fetchStoriesFromRss().then(()=>{e()}).catch(()=>{(this.config.debug||this.stConfig.debug)&&console.log(ge+"Failed fetchStoriesFromRss, falling back to cloud video"),i()})}):this.stConfig.source==="rss"?this.fetchStoriesFromRss().then(()=>{e()}).catch(()=>{(this.config.debug||this.stConfig.debug)&&console.log(ge+"Failed fetchStoriesFromRss, falling back to cloud video"),i()}):i()})}fetchStoriesFromRss(){return new Promise(async(e,i)=>{(!this.stConfig.rss_url||this.stConfig.rss_url==="")&&i(),this.utils.parseRss(this.stConfig.rss_url).then(n=>{this.utils.window.OCM.ST.stories=[],n.forEach(r=>{(this.config.debug||this.stConfig.debug)&&console.log(ge+"Pushing to stories [",r.title,r.link,r.image,"]"),this.utils.window.OCM.ST.stories.push({url:r.link,title:r.title,img:r?.image})}),e()}).catch(()=>{i()})})}fetchStoriesFromAdsquirrel(){return new Promise((e,i)=>{this.utils.waitFor("ADSQ",()=>{if(this.utils.window.ADSQ.response===null||this.utils.window.ADSQ.response.classified_as===null){(this.config.debug||this.stConfig.debug)&&console.log(ge+"this.utils.window.ADSQ.response was null, rejecting fetchStoriesFromAdsquirrel"),i();return}let n="hostname="+this.utils.window.location.host+"&",r="classification="+encodeURIComponent(this.utils.window.ADSQ.response.classified_as[0].split("/")[0])+"&",s="";s+=n,s+=r,s=s.substring(0,s.length-1),s=btoa(s),fetch("https://api.adsquirrel.ai/stories?q="+s,{headers:{Accept:"application/json","Content-Type":"text/plain"},method:"GET"}).then(a=>a.json()).then(a=>{this.utils.window.OCM.ST.stories=a?.filter(o=>o.url!==this.utils.window.location.protocol+"//"+this.utils.window.location.host+this.utils.window.location.pathname),typeof this.utils.window.OCM.ST.stories>"u"&&((this.config.debug||this.stConfig.debug)&&console.log(ge+"this.utils.window.OCM.ST.stories was undefined, rejecting fetchStoriesFromAdsquirrel"),i()),(this.config.debug||this.stConfig.debug)&&console.log(ge+"this.utils.window.OCM.ST.stories is gg, resolving fetchStoriesFromAdsquirrel"),e()}).catch(()=>{(this.config.debug||this.stConfig.debug)&&console.log(ge+"Could not fetch stories from api, rejecting fetchStoriesFromAdsquirrel"),i()})},100,()=>{(this.config.debug||this.stConfig.debug)&&console.log(ge+"ADSQ response took too long to respond, rejecting fetchStoriesFromAdsquirrel"),i()})})}setWindowGlobals(){(this.config.debug||this.stConfig.debug)&&console.log(ge+"Setting window globals"),this.utils.window.OCM.ST={midRollTime:this.stConfig.midRollTime||5,playerTagId:this.stConfig.playerTagId,publisherId:this.stConfig.publisherId,source:this.stConfig.source,rss_url:this.stConfig.rss_url,debug:this.config.debug||this.stConfig.debug,redirect_target:this.stConfig.redirect_target,branding:this.stConfig.branding,sticky:this.stickyConfig,device:this.utils.is_mobile?"mobile":"desktop",enable_analytics:this.stConfig.enable_analytics||!1}}createWrapper(){(this.config.debug||this.stConfig.debug)&&console.log(ge+"Creating wrapper");let e=this.utils.window.document.createElement("div");e.setAttribute("data-id","ocm-st"),this.utils.loadStyle('div[data-id="ocm-st"] { max-width:640px; display:block; margin:0 auto 1rem; position: relative; }');let i=this.utils.is_mobile?this.stConfig.mobile.styles:this.stConfig.desktop.styles,n=this.utils.is_mobile?this.stConfig.mobile.classes:this.stConfig.desktop.classes;return i&&i!==""&&(e.style=i),n&&n!==""&&e.setAttribute("class",n),e}handleBottomSticky(){new MutationObserver((i,n)=>{let r=this.utils.window.document.querySelector(".ocm-sticky.bottom");this.stickyBottomHeight=r&&r.clientHeight||0}).observe(this.utils.window.document,{childList:!0,subtree:!0})}handleStickiness(e,i,n){let r=this.stickyConfig&&this.stickyConfig.enable,s=this.stickyConfig?.full_width;if(this.isMounted&&r)if(n){let a=i.clientWidth,o=Math.ceil(a*9/16)+70;(this.config.debug||this.stConfig.debug)&&console.log(ge+"Width ",a," and height: ",o),i.style.height=o+"px",e.style.position="relative",e.classList.remove("ocm-st-sticky"),e.style.zIndex="0",e.style.width="100%",e.style.height=o+"px",e.style.bottom="",e.style.top="",e.style.left="",e.style.right=""}else if(e.style.position="fixed",e.classList.add("ocm-st-sticky"),e.style.zIndex="2147483646",s&&i.clientWidth<425){e.style.width="100%";let a=this.utils.is_mobile?i.clientWidth*.4>120?i.clientWidth*.4:120:i.clientWidth*.5;e.style.height=a+"px",this.stickyConfig.position==="bottom_right"||this.stickyConfig.position==="bottom_left"?(e.style.bottom=this.stickyConfig.offsets.bottom+"px",e.style.left="0%"):(this.stickyConfig.position==="top_right"||this.stickyConfig.position==="top_left")&&(e.style.top=this.stickyConfig.offsets.top+"px",e.style.left="0%")}else{let a=this.utils.is_mobile?i.clientWidth*.4>288?i.clientWidth*.4:288:i.clientWidth*.5,o=Math.ceil(a*9/16)+70;e.style.width=a+"px",e.style.height=o+"px",this.stickyConfig.position==="bottom_right"?(e.style.bottom=+this.stickyConfig.offsets.bottom+this.stickyBottomHeight+"px",e.style.right=this.stickyConfig.offsets.right+"px"):this.stickyConfig.position==="bottom_left"?(e.style.bottom=+this.stickyConfig.offsets.bottom+this.stickyBottomHeight+"px",e.style.left=this.stickyConfig.offsets.left+"px"):this.stickyConfig.position==="top_right"?(e.style.top=this.stickyConfig.offsets.top+"px",e.style.right=this.stickyConfig.offsets.right+"px"):this.stickyConfig.position==="top_left"&&(e.style.top=this.stickyConfig.offsets.top+"px",e.style.left=this.stickyConfig.offsets.left+"px")}}appendIframeContent(e){let i=e.contentDocument||e.contentWindow.document,n=i.createElement("div");n.id="ocm-st";let r=i.createElement("script");r.src=Cc,i.body.insertAdjacentElement("afterbegin",n),i.body.insertAdjacentElement("beforeend",r)}populateWrapper(e){(this.config.debug||this.stConfig.debug)&&console.log(ge+"Populating wrapper for the iframe");let i=e.clientWidth,n=Math.floor(i/1.28);(this.config.debug||this.stConfig.debug)&&console.log(ge+"Populating wrapper for the iframe with width: ",i," and height: ",n);let r=this.utils.window.document.createElement("iframe");if(r.setAttribute("id","ocm-st-frame"),r.setAttribute("FRAMEBORDER",0),r.setAttribute("SCROLLING","no"),r.setAttribute("MARGINHEIGHT",0),r.setAttribute("MARGINWIDTH",0),r.setAttribute("TOPMARGIN",0),r.setAttribute("LEFTMARGIN",0),r.setAttribute("ALLOWTRANSPARENCY","true"),e.style.height=n+"px",r.style.height=n+"px",r.style.width="100%",e.appendChild(r),this.stConfig.branding&&this.stConfig.branding.custom_css&&this.stConfig.branding.custom_css!==""){let a=r.contentWindow.document.createElement("style");a.appendChild(document.createTextNode(this.stConfig.branding.custom_css)),r.contentWindow.document.head.appendChild(a)}navigator.userAgent.toLowerCase().includes("firefox")?r.onload=()=>{this.appendIframeContent(r)}:this.appendIframeContent(r),new IntersectionObserver(a=>{this.isIntersecting=a&&a.length>0&&a[0]?.isIntersecting,r.contentWindow.postMessage({channel:"storyteller",event:"isIntersecting",value:this.isIntersecting}),(this.config.debug||this.stConfig.debug)&&console.log(ge+"Observer was triggered and we inform the iframe with the following event: ",{channel:"storyteller",event:"isIntersecting",value:this.isIntersecting})},{root:null,threshold:0}).observe(e),this.utils.window.addEventListener("message",a=>{let o=a.data;if(o?.channel==="storyteller"&&o?.event==="isSticky"){let l=o?.value;this.handleStickiness(r,e,!l),(this.config.debug||this.stConfig.debug)&&console.log(ge+"Parent received sticky event: ",o)}o?.channel==="storyteller"&&o?.event==="onMounted"&&(r.contentWindow.postMessage({channel:"storyteller",event:"isIntersecting",value:this.isIntersecting}),this.isMounted=!0,(this.config.debug||this.stConfig.debug)&&console.log(ge+"The player inside the iframe was mounted successfully")),o?.channel==="storyteller"&&o?.event==="restart"&&this.restart()})}restart(){let e=document.querySelector('div[data-id="ocm-st"]');e&&((this.config.debug||this.stConfig.debug)&&console.log(ge+"Removing the wrapper and restarting storyteller."),e.remove(),this.run())}}});var Do=V((xf,Oo)=>{var Ro="[OCM][VI] ";Oo.exports=class{utils;config;vi_config;constructor(e,i){this.utils=e,this.config=i,this.vi_config=this.utils.is_mobile?this.config.services.vi.mobile:this.config.services.vi.desktop}run(){(this.config.debug||this.config.services.vi.debug)&&console.log(Ro+"Running..."),this.utils.loadStyle("#vi-stories-sponsor-container {display: none!important;}"),this.createElement()}createElement(){let e=document.createElement("div");e.id="vi-div",e.style=this.config.services.vi.style;let i=this.utils.determineInjectionTarget(this.vi_config.conditions.selector,this.vi_config.conditions.position,this.vi_config.conditions.count_gt,this.vi_config.conditions.word_count,this.vi_config.conditions.words_gt);if(!i){(this.config.debug||this.config.services.vi.debug)&&console.warn(Ro+"Could not find selector "+this.vi_config.conditions.selector);return}this.utils.injectTag(i,e,this.vi_config.conditions.place)&&this.viScript()}viScript(){let e=document,i=this.utils.window,n=e.createElement("script"),r={ChannelID:"5d8390ef28a0611e523a52aa",AdUnitType:"2",PublisherID:"133044126840134",PlacementID:"pltz9FljnNNm8YU6PEn",DivID:"vi-div",IAB_Category:this.config.services.vi.iab,Keywords:"",Language:"en-us",BG_Color:"",Text_Color:"",Font:"",FontSize:""};n.src="https://s.vi-serve.com/tagLoader.js",n.type="text/javascript",n.onload=function(){i[btoa("video intelligence start")].init(r)},(e.getElementsByTagName("head")[0]||e.documentElement.appendChild(e.createElement("head"))).appendChild(n)}}});var No=V((_f,ko)=>{var jn="[OCM][Primis] ";ko.exports=class{utils;config;primis_config;conditions;constructor(e,i){this.utils=e,this.config=i,this.primis_config=this.utils.is_mobile?this.config.services.primis.mobile:this.config.services.primis.desktop}run(){(this.config.debug||this.primis_config.debug)&&console.log(jn+"Running...");let e=this.utils.determineInjectionTarget(this.primis_config.conditions.selector,this.primis_config.conditions.position,this.primis_config.conditions.count_gt,this.primis_config.conditions.word_count,this.primis_config.conditions.words_gt);if(!e){(this.config.debug||this.primis_config.debug)&&console.log(jn+"Could not find selector "+this.primis_config.conditions.selector);return}this.create(e)}create(e){this.primis_config.conditions.geo_filtering&&this.utils.geolocation().then(r=>{if(!this.primis_config.conditions.geo_filtering_countries.includes(r)){(this.config.debug||this.primis_config.debug)&&console.log(jn+"Terminating due to geo filter",this.primis_config.conditions.geo_filtering_countries,r);return}});let i=typeof this.config.schain<"u"?this.config.schain.config.nodes[0].sid:"",n=document.createElement("div");if(n.setAttribute("style",this.config.services.primis.style),this.utils.injectTag(e,n,this.primis_config.conditions.place)){let r=document.createElement("script");r.async=!0,r.src=this.config.services.primis.src+"&schain=1.0,1!orangeclickmedia.com,"+i+",1",n.appendChild(r)}}}});var Mo=V((Af,Bo)=>{Tn();var fe="[OCM][inImage] ";Bo.exports=class{utils;config;in_image_config;window;include_observers;constructor(e,i){this.utils=e,this.config=i,this.in_image_config=i.services.in_image,this.include_observers=[]}run(){(this.config.debug||this.in_image_config.debug)&&console.log(fe+"Running...");let e=this.in_image_config.fc?Number(this.in_image_config.fc/100):0,i=Math.random();if((this.config.debug||this.in_image_config.debug)&&console.log(fe+"Math.random: "+i+" Frequency/100: "+e),!this.in_image_config.fc||i<=e){(this.config.debug||this.in_image_config.debug)&&console.log(fe+"In at frequency condition and in_image_config.fc is:",this.in_image_config.fc),(this.config.debug||this.in_image_config.debug)&&console.info(fe+"Is mobile =>",this.utils.is_mobile);for(let n of this.in_image_config.tags)n.active&&((this.config.debug||this.in_image_config.debug)&&console.info(fe+"Tag =>",n),this.showAdInImage(n))}}showAdInImage(e){let i=Array.from(this.utils.window.document.querySelectorAll(`${e.selector}`)).length,n=[];i<=5?(n=Array.from(this.utils.window.document.querySelectorAll(`${e.selector}`)).filter((a,o)=>{if(o%2===0)return a}),(this.config.debug||this.in_image_config.debug)&&console.info(fe+"This site has ",i," images"," and is <= 5, so ads showing at every second img")):i>5&&(n=Array.from(this.utils.window.document.querySelectorAll(`${e.selector}`)).filter((a,o)=>{if(o%3===0)return a}),(this.config.debug||this.in_image_config.debug)&&console.info(fe+"This site has ",i," images"," and is > 5, so ads showing at every third img"));let r=n.length;(this.config.debug||this.in_image_config.debug)&&console.info(fe+"This site has total",i," images:",n);let s=(a,o)=>{(this.config.debug||this.in_image_config.debug)&&console.info(fe+"Start check images src");let l=n.filter(g=>g.currentSrc.indexOf("lazy_placeholder.gif")===-1||g.getAttribute("height")!==null&&g.getAttribute("width")!==null),u=[];if((this.config.debug||this.in_image_config.debug)&&console.info(fe+"This site has",a+" images - images with filter = "+l.length),a===l.length)(this.config.debug||this.in_image_config.debug)&&console.info(fe+"Start - normal image without ll"),this.addInImageAd(l,o);else{(this.config.debug||this.in_image_config.debug)&&console.info(fe+"Start - image with ll");let g=setInterval(()=>{if((this.config.debug||this.in_image_config.debug)&&console.info(fe+"Start run Interval"),l=n.filter(p=>p.currentSrc.indexOf("lazy_placeholder.gif")===-1||p.getAttribute("height")!==null&&p.getAttribute("width")!==null),a!==u.length){(this.config.debug||this.in_image_config.debug)&&console.info(fe+"Start checking");let p=l,c=0;if(p.length!==0)if(u.length===0)u=p;else for(let h=0;h<p.length;h++)u.find(f=>p[h-c].currentSrc===f.currentSrc)?((this.config.debug||this.in_image_config.debug)&&console.info(fe+"Remove image "+p[h-c].currentSrc),p.splice(h-c,1),c++):((this.config.debug||this.in_image_config.debug)&&console.info(fe+"Done image "+p[h-c].currentSrc),u.push(p[h-c]));p.length>0&&this.addInImageAd(p,o)}else(this.config.debug||this.in_image_config.debug)&&console.info(fe+"Stop run Interval"),clearInterval(g)},1e3)}};r===0?((this.config.debug||this.in_image_config.debug)&&console.info(fe+"Wait Loaded"),this.utils.window.addEventListener("load",function(a){r=Array.from(a.currentTarget.window.document.querySelectorAll(`${e.selector}`)).length,s(r,e)})):s(r,e)}addInImageAd(e,i){(this.config.debug||this.in_image_config.debug)&&console.info(fe+"add InImage Ad, images: "+e," tag:",i);for(let n=0;n<e.length;n++){let r=e[n],s=0,a=0,o=0,l=r.parentElement,u=0;l&&(u=l.getBoundingClientRect().width);let g=r.getBoundingClientRect().height.toString(),p=r.getBoundingClientRect().width.toString();r.hasAttribute("data-lazy-type")&&((this.config.debug||this.in_image_config.debug)&&console.info(fe+"image with attr data-lazy-type ",r),p=r.clientWidth?r.clientWidth.toString():p,u=l.clientWidth?l.clientWidth.toString():u,r.getAttribute("height")&&r.getAttribute("width")&&r.getBoundingClientRect().width===r.getBoundingClientRect().height&&((this.config.debug||this.in_image_config.debug)&&console.info(fe+"this image has height and width"),o=r.getAttribute("height")/r.getAttribute("width"),a=r.clientHeight?r.clientHeight*o:g,g=a.toString())),u>parseInt(p)&&(s=(u-parseInt(p))/2),(this.config.debug||this.in_image_config.debug)&&(console.log(fe+"imageParent_width = ",u,typeof u),console.log(fe+"image_height = ",g,typeof g),console.log(fe+"imageParent_width > parseInt(image_width) = ",u>parseInt(p)),console.log(fe+"image_width = ",p,typeof p),console.log(fe+"new_left = ",s,typeof s),console.log(fe+"new_left in css = ",String(s)+"px"));let c=this.in_image_config.available_sizes,h=null,m=!1;c=c.filter(f=>f.isMobile===this.utils.is_mobile).reverse();for(let f of c)if(p>=f.widthImg&&g>=f.heightImg&&f.isActive===!0){(this.config.debug||this.in_image_config.debug)&&console.info(fe+`in_image_${n} has the conditions to render ad`,f);try{h=JSON.parse(f.adSizes)[0]}catch{break}m=!0;break}if(m){(this.config.debug||this.in_image_config.debug)&&console.log(fe+`For div in_image_${n}, width:`+h[0]+" height:"+h[1]),this.topStyleForButton(h[1],n);let f=h[1]+6,b=document.createElement("div");b.setAttribute("id",`in_image_container_${n}`),b.classList.add("ocm-inImage-container"),b.style=`height:${g}px; width:${p}px; margin: auto;`,r.parentElement.insertBefore(b,r),b.appendChild(r),this.in_image_config.withoutLeft||(r.style=`position:absolute; left:${String(s)}px; top:0`);let v=`<div id="in_image_${n}" style="height:0;"></div>`,w=document.createElement("div");w.classList.add("ocm-inImage","reveal-top"),b.appendChild(w),w.insertAdjacentHTML("beforeend",v),this.utils.window.googletag=this.utils.window.googletag||{cmd:[]},this.utils.window.googletag.cmd.push(()=>{let y=this.utils.window.googletag.defineSlot(`${i.ad_tag_url}`,[h],`in_image_${n}`).addService(googletag.pubads());this.utils.window.googletag.display(`in_image_${n}`),!this.utils.config.services.lazyload.active&&window.OCM.init_ad_server_set&&this.utils.window.googletag.pubads().refresh([y],{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0}),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",async S=>{if(!S.isEmpty&&S.slot.getSlotElementId()===`in_image_${n}`){let C=w.parentElement.getAttribute("id");if(this.utils.browser.isSafari)await this.isInViewportInImage(n,w,s,f);else{let x=document.querySelectorAll(`#in_image_container_${n}`)[0];await this.includeObserverInImage(C,w,s,f),this.include_observers[C].observe(x)}}})})}}}includeObserverInImage(e,i,n,r){IntersectionObserver.prototype.POLL_INTERVAL=100;let s={root:null,rootMargin:"20px 0px",threshold:.5};this.include_observers[e]=new IntersectionObserver((a,o)=>{a.forEach(async l=>{e===l.target.id&&(typeof l.isVisible>"u"&&(l.isVisible=!0),l.isIntersecting&&(await this.addEffectAndCloseButton(i,n,r),o.unobserve(l.target)))})},s)}isPhotoInViewport(e){let i,n=!1,r=0,s=document.getElementById(e);if(!s||typeof s>"u")return!1;if(i=s.getBoundingClientRect(),n=i.height>=600,i.top>=0&&i.left>=0&&i.bottom<=(this.utils.window.innerHeight||this.utils.window.document.documentElement.clientHeight)&&i.right<=(this.utils.window.innerWidth||this.utils.window.document.documentElement.clientWidth))return!0;if(i.top<0&&i.left>=0){if(r=(i.height-Math.abs(i.top))/i.height*100,n){if(r>=67)return!0}else if(r>=51)return!0}return!1}isInViewportInImage(e,i,n,r){window.addEventListener("scroll",async()=>{this.isPhotoInViewport(`in_image_container_${e}`)&&await this.addEffectAndCloseButton(i,n,r)})}addEffectAndCloseButton(e,i,n){e.classList.add("menu--animatable"),e.classList.contains("menu--visible")?e.classList.remove("menu--visible"):e.classList.add("menu--visible");let r=this.in_image_config.bg_color;this.in_image_config.withoutLeft?e.style=`width:100%;height:${n}px !important;background-color:${r}`:e.style=`left:${String(i)}px; height:${n}px !important;background-color:${r}`;let s=document.createElement("div"),a=document.createElement("button");this.utils.is_mobile?(s.classList.add("close-icon-container-mobile"),a.classList.add("ocm-button-close-mobile")):(s.classList.add("close-icon-container"),a.classList.add("ocm-button-close")),this.utils.is_mobile||(s.addEventListener("mouseenter",()=>{a.classList.add("ocm-button-close-hover")}),s.addEventListener("mouseleave",()=>{a.classList.remove("ocm-button-close-hover")})),s.append(a),e.append(s),a.addEventListener("click",()=>{e.classList.add("ocm-inImage-remove")})}topStyleForButton(e,i){this.utils.loadStyle(`          .ocm-button-close{
               padding: 0 !important;
               border-radius: 4px !important;
               display: block !important;
               position: relative !important;
               width: 30px !important;
               height: 30px !important;
               background: #fff !important;
               color: #4a968e !important;
               border: 1px solid #106e89 !important;
               outline: none !important;
               cursor: pointer !important;
           }

          .ocm-button-close-mobile{
               padding: 0 !important;
               border-radius: 4px !important;
               display: block !important;
               position: relative !important;
               width: 26px !important;
               height: 100% !important;
               background: #fff !important;
               color: #4a968e !important;
               border: 1px solid #106e89 !important;
               outline: none !important;
               cursor: pointer !important;
           }

           .ocm-button-close-hover:before{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close-hover:after{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close:before{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

           .ocm-button-close:after{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

            .ocm-button-close-mobile:before{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

           .ocm-button-close-mobile:after{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

          .ocm-inImage-container {
             position:relative; 
             overflow: hidden;
          }

          .ocm-inImage.menu--visible  {
              -webkit-transform: none;
              transform: none;
}

          .ocm-inImage.menu--animatable {
             transition: all 1s ease-out;
}
         .ocm-inImage.menu--animatable > #in_image_`+i+` {
           height: `+e+`px !important; 
           transition: height 1s ease-out;
}
          .ocm-inImage {
             overflow: visible;             position:absolute; 
             padding-top:3px; 
             padding-bottom:3px; 
             bottom:0 !important; 
             height: 0px;
             width:100%; 
             display: flex; 
             align-items: center;
             justify-content: center;
          }

          .ocm-inImage .close-icon-container {
            position: absolute;
            top: -37px;
            height: 20px;
            width: 30px;
            right: 9px;
            z-index: 10;
          }

          .ocm-inImage .close-icon-container-mobile {
            position: absolute;
            top: -37px;
            height: 26px;
            width: 26px;
            right: 9px;
            z-index: 10;
          }

          .ocm-inImage .close-icon {
            display: inline-block;
            height: 26px;
            width: 26px;
            cursor: pointer;
            stroke: #fff;
            margin: 3px;
          }

          .ocm-inImage.reveal-top {
            opacity: 1;
          }

          .ocm-inImage.reveal-top.ocm-inImage-remove {
            transition: opacity 0.5s linear;
            opacity: 0;
          }

          .ocm-inImage .progress {
            opacity: 0;
            stroke-dasharray: 0, 120;
          }`)}}});var Lo=V((If,jo)=>{var Pc="[OCM][Adlightning] ",Rc=t=>{let e=document.createElement("script");t.services.adlightning.site&&t.services.adlightning.site!==""?e.src=`https://tagan.adlightning.com/orangeclickmedia-${t.services.adlightning.site}/op.js`:e.src="https://tagan.adlightning.com/orangeclickmedia/op.js",e.setAttribute("defer",""),document.head.appendChild(e),(t.debug||t.services.adlightning.debug)&&console.info(Pc+"Loaded")};jo.exports=Rc});var Ho=V((Ff,zo)=>{var Oc="[OCM][Teads Analytics]",Dc=t=>{let e=t.hasOwnProperty("use_window_top")?t.use_window_top?window.top:window:window.top;e.teads_analytics=e.teads_analytics||{},e.teads_analytics.analytics_tag_id=`PUB_${t.services.teads_analytics.publisher_id}`,e.teads_analytics.share=e.teads_analytics.share||function(){(e.teads_analytics.shared_data=e.teads_analytics.shared_data||[]).push(arguments)};let i=document.createElement("script");i.src="https://a.teads.tv/analytics/tag.js",document.head.appendChild(i),(t.debug||t.services.teads_analytics.debug)&&console.info(Oc+"Loaded")};zo.exports=Dc});var Ln=V((Tf,Vo)=>{var re="[OCM][AniView] ";Vo.exports=class{constructor(e,i){this.utils=e,this.config=i,this.aniview_config=this.utils.is_mobile?i.services.aniview.mobile:i.services.aniview.desktop,this.aniview_config.debug=this.config.services.aniview.debug,this.ADSQ_TARGETING=null,this.ANIVIEW_FEE=2e-4,this.isHeaderBidding=!1,typeof this.aniview_config.vchack>"u"&&(this.aniview_config.vchack=!0)}run(){(this.config.debug||this.aniview_config.debug)&&console.log(re+"Running..."),this.utils.allowPageType(this.aniview_config.rules.page_types)?this.createPlayerElement():(this.config.debug||this.aniview_config.debug)&&console.log(re+"Page type doesn't match the selected ones: ",this.aniview_config.rules.page_types)}createPlayerElement(){this.utils.contentLoaded().then(()=>{this.inject()})}inject(){(this.config.debug||this.aniview_config.debug)&&console.log(re+"Trying to inject player element");let e=this.utils.determineInjectionTarget(this.aniview_config.rules.selector,this.aniview_config.rules.position,this.aniview_config.rules.count_gt,this.aniview_config.rules.word_count,this.aniview_config.rules.words_gt);if((this.config.debug||this.aniview_config.debug)&&console.info(re+"node found: ",e),!e){(this.config.debug||this.aniview_config.debug)&&console.info(re+"node NOT found, stopping process",e);return}let i=document.createElement("script");i.id=`AV${this.aniview_config.playerTagId}`,i.type="text/javascript",i.src=`https://tg1.orangeclickmedia.com/api/adserver/spt?AV_PUBLISHERID=${this.aniview_config.publisher}&AV_TAGID=${this.aniview_config.playerTagId}&AV_URL=${encodeURIComponent(window.top.location.href)}`,this.utils.window.OCM._oeid&&(i.src+=`&AV_CUSTOM5=${this.utils.window.OCM._oeid}`),i.async="true",i.setAttribute("data-config-api","avConfig"),i.setAttribute("data-player-api","avPassback"),this.aniview_config&&this.aniview_config.sticky&&this.aniview_config.sticky.enable&&((this.config.debug||this.aniview_config.debug)&&console.info(re+" sticky option is enabled for aniview player"),this.appendStickStyle());let n=this.utils.window.document.createElement("div");n.classList.add("ocm-player"),this.aniview_config.classes&&n.classList.add(this.aniview_config.classes),this.aniview_config.styles&&(n.style=this.aniview_config.styles),window.top.document.querySelector('script[src*="chirp.js"]')||this.utils.config.services.header_bidding.adsqRTDModuleEnabled?this.utils.waitFor("ADSQ.response",()=>{let r=[],s=null;if(s=window.top.ADSQ?.response,s){s.classified_as&&s.classified_as.forEach(o=>{let l=[];l=o.split("/");let u=null;l.forEach(g=>{u?u+="/"+g:u=g,r.push(u)})}),this.ADSQ_TARGETING={adsq_bs:s.brandSafe?s.brandSafe===!0?"Yes":"No":"notEvaluated",adsq_bs_class:r.length?[...new Set(r)]:[],adsq_bs_ne:s.hasOwnProperty("entities")?s.entities.slice(0,5):[],adsq_bs_sent:s.sentiment||"",hostname:window.top.location.hostname.replace("www.",""),city:s?.geo?.city||"",country:s?.geo?.country||""},i.src+=`&AV_CUSTOM1=${this.ADSQ_TARGETING.adsq_bs}`,i.src+=this.ADSQ_TARGETING.adsq_bs_class.length?`&AV_CUSTOM2=${encodeURIComponent(this.ADSQ_TARGETING.adsq_bs_class.join(","))}`:"",i.src+=this.ADSQ_TARGETING.adsq_bs_sent!==""?`&AV_CUSTOM3=${this.ADSQ_TARGETING.adsq_bs_sent}`:"",i.src+=this.ADSQ_TARGETING.adsq_bs_ne.length?`&AV_CUSTOM4=${encodeURIComponent(this.ADSQ_TARGETING.adsq_bs_ne.join(","))}`:"";let a=`adsq_bs=${this.ADSQ_TARGETING.adsq_bs};`;i.src+=`&AV_CUSTOM7=${encodeURIComponent(a)}`}this.appendTag(e,n,i)},50,()=>{this.appendTag(e,n,i)}):this.appendTag(e,n,i)}appendStickStyle(){let e=`${this.aniview_config?.sticky?.offsets?.top||0}px`,i=`${this.aniview_config?.sticky?.offsets?.bottom||0}px`,n=`${this.aniview_config?.sticky?.offsets?.left||0} px`,r=`${this.aniview_config?.sticky?.offsets?.right||0}px`,s=`${this.aniview_config?.sticky?.height||0}px`,a=`${this.aniview_config?.sticky?.width||0}px`;switch(this.aniview_config?.sticky?.position){case"bottom_right":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; bottom: ${i}; right: ${r};  height: ${s}; width: ${a}; }`);break;case"bottom_left":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; bottom: ${i}; left: ${n};  height: ${s}; width: ${a}; }`);break;case"top_right":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; top: ${e}; right: ${r};  height: ${s}; width: ${a}; }`);break;case"top_left":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; top: ${e}; left: ${n};  height: ${s}; width: ${a}; }`);break}}appendTag(e,i,n){this.createPassbacks(),this.utils.window.googletag.pubads?this.utils.gptPubAdsReady().then(()=>{this.utils.window.googletag.cmd.push(()=>{let r=this.utils.window.googletag.pubads().getTargetingKeys().map(s=>encodeURIComponent(`${s}=${this.utils.window.googletag.pubads().getTargeting(s).join(",")}`)).join("%26");n.src+=`&AV_CUSTOM6=${r}`,this.utils.injectTag(e,i,this.aniview_config.rules.place),i.append(n),(this.config.debug||this.aniview_config.debug)&&console.log(re+"Selector found and script added")})}):(this.utils.injectTag(e,i,this.aniview_config.rules.place),i.append(n),(this.config.debug||this.aniview_config.debug)&&console.log(re+"Selector found and script added"))}resizePlayerForVerticalAd(e,i){try{(this.config.debug||this.aniview_config.debug)&&console.log(re+"AdImpression Event: ",e);let n=e?.tagInfo?.mediaInfo?.width,r=i.getWidth(),s=e?.tagInfo?.mediaInfo?.height;if(s<=n)return;(this.config.debug||this.aniview_config.debug)&&console.log(re+"Tag width: ",n," Tag height: ",s);let a=n/s,o=r/a;i.resize(r,o)}catch(n){(this.config.debug||this.aniview_config.debug)&&console.error(re+"Error: ",n)}}handleAdImpression(e){(this.config.debug||this.aniview_config.debug)&&console.log(re+"An new impression event was triggered:",e);let i={...e.tagInfo};if(i){let n=i.bidder&&this.auction&&this.auction.bidders&&this.auction.bidders[i.bidder].size,r=this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.getCurrencyConversion&&this.utils.window.OCM.getCurrencyConversion("USD"),s=i.bidCpm;if(s>0&&(s=r?parseFloat(((s-this.ANIVIEW_FEE)*r).toFixed(5)):s-this.ANIVIEW_FEE),this.isHeaderBidding=i.bidder&&i.bidder!=="GAM"&&i.bidder!=="amazon",!this.isHeaderBidding)return;let a={data:{adUnit:"aniview_outstream",auction:this.auction,auctionId:this.auctionId,bidder:i.bidder,consent:this.utils.window.OCM.hasPurposeOneConsent,cpm:s,dealId:i.bidData.dealId||null,fizz:!1,isNew:1,mediaType:"video",meta:JSON.stringify(i.bidData.meta),oeid:this.utils.window.OCM._oeid,size:n,source:"client"},event:"pba-update",eventName:"Bid won",options:this.options};fetch("https://windrunner.orangeclickmedia.com/pba-update",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(a)}).then(o=>{o.json().then(()=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"A pba update was sent to wind runner successfully with data: ",a)})}).catch(o=>{console.error(o)})}}handleAnalyticsCallback(e){(this.config.debug||this.aniview_config.debug)&&console.log(re+"An new analytics callback event was triggered:",e);let i=e.data;if(i){let n=Object.assign({},e.options);delete n.callback,n.options={},this.options=n;let r=Object.keys(i.adUnits).map(a=>Object.keys(i.adUnits[a].bidders).map(o=>i.adUnits[a].bidders[o])).flat().reduce((a,o)=>({...a,[o.bidder]:o}),{});this.bidders=r,Object.keys(this.bidders).forEach(a=>{let o=this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.getCurrencyConversion&&this.utils.window.OCM.getCurrencyConversion("USD"),l=this.bidders[a].cpm;l>0&&(l=o?parseFloat(((l-this.ANIVIEW_FEE)*o).toFixed(5)):l-this.ANIVIEW_FEE),this.bidders[a].cpm=l}),this.auction={adUnit:"aniview_outstream",bidders:r,finish:i.finish,start:i.start,status:"finished",timeout:i.timeout},this.auctionId=i.id;let s={data:{id:this.auctionId,start:i.start,timeout:i.timeout,adUnits:{aniview_outstream:this.auction},finish:i.finish,oeid:this.utils.window.OCM._oeid,consent:this.utils.window.OCM.hasPurposeOneConsent},event:"pba-stream",eventName:"Auction",options:e.options};fetch("https://windrunner.orangeclickmedia.com/pba-stream",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(s)}).then(a=>{a.json().then(()=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"A pba stream was sent to wind runner successfully with data: ",s)})}).catch(a=>{console.error(a)})}}handleVideoEvents(e){if(!this.isHeaderBidding)return;let i={eventName:e,adUnit:"aniview_outstream",auctionId:this.auctionId};fetch(e==="bidViewable"?"https://windrunner.orangeclickmedia.com/pba-viewability":"https://windrunner.orangeclickmedia.com/pba-video",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(i)}).then(r=>{r.json().then(s=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"A pba video event was sent to wind runner successfully with data: ",i)})}).catch(r=>{console.error(r)})}handleAdViewableImpression(e){(this.config.debug||this.aniview_config.debug)&&console.log(re+"An new viewable impression event was triggered:",e),this.handleVideoEvents("bidViewable")}handleAdVideoFirstQuartile(e){(this.config.debug||this.aniview_config.debug)&&console.log(re+"An new first quartile event was triggered:",e),this.handleVideoEvents("first_quartile")}handleAdVideoMidpoint(e){(this.config.debug||this.aniview_config.debug)&&console.log(re+"An new mid point event was triggered:",e),this.handleVideoEvents("midpoint")}handleAdVideoThirdQuartile(e){(this.config.debug||this.aniview_config.debug)&&console.log(re+"An new third quartile event was triggered:",e),this.handleVideoEvents("third_quartile")}handleAdVideoComplete(e){(this.config.debug||this.aniview_config.debug)&&console.log(re+"An new video complete event was triggered:",e),this.handleVideoEvents("complete")}handleAdClickThru(e){(this.config.debug||this.aniview_config.debug)&&console.log(re+"An new ad click thru event was triggered:",e),this.handleVideoEvents("click")}handleVCHackFloatingConfig(e){!this.initialAvConfig?.floating&&this.aniview_config.vchack&&(e.floating={resize:!0,position:this.aniview_config.vchack_position||(this.utils.is_mobile?"Top":"Top-Right"),closeButton:!0,floatOnImp:!0,resizingMethod:1,size:.6,floatOnBottom:!0,backgroundColor:"White",right:0,left:0,top:0,bottom:0})}createPassbacks(){this.utils.window.avConfig=(e,i)=>{this.initialAvConfig=JSON.parse(JSON.stringify(e)),e.openRtb={site:{ext:{data:this.ADSQ_TARGETING}}},e.pbanalytics=[{provider:"ocmpba",options:{callback:n=>{this.handleAnalyticsCallback(n)}}}]},this.utils.window.avPassback=(e,i)=>{if((this.config.debug||this.aniview_config.debug)&&(console.log(re+"Checking if I should run OCM.oipb for specific player"),console.log(re+"config.tagId !== this.aniview_config.playerTagId",e.tagId,this.aniview_config.playerTagId)),e.tagId===this.aniview_config.playerTagId){if(this.aniview_config&&this.aniview_config.sticky&&this.aniview_config.sticky.enable){let n=this.aniview_config?.sticky?.height||0,r=this.aniview_config?.sticky?.width||0;i.resize(r,n)}e?.playOnViewPerc&&(e.playOnViewPerc=30),this.initialAvConfig?.floating&&(this.initialAvConfig?.closeButton&&(e.closeButton=!1),e.floating.closeButton=!1,e.floating.backgroundColor="White"),this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomFloatingConfig&&typeof this.utils.window.OCM.handleCustomFloatingConfig=="function"?(this.utils.window.OCM.handleCustomFloatingConfig(e,i),(this.config.debug||this.aniview_config.debug)&&console.log(re+"Custom handling for the configuration: ",e)):(this.handleVCHackFloatingConfig(e),(this.config.debug||this.aniview_config.debug)&&console.log(re+"VCHack handling for the configuration:",e)),this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomAdImpression&&typeof this.utils.window.OCM.handleCustomAdImpression=="function"&&(e.enableViewability=!0),i.updateGui(e),i.on("AdImpression",(n,r)=>{this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomAdImpression&&typeof this.utils.window.OCM.handleCustomAdImpression=="function"&&this.utils.window.OCM.handleCustomAdImpression(e,i,n),this.utils.is_mobile&&this.resizePlayerForVerticalAd(n,i),this.handleAdImpression(n)}),i.on("AdViewableImpression",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"AdViewableImpression",n,r),this.handleAdViewableImpression(n),this.initialAvConfig?.floating&&(this.initialAvConfig?.closeButton&&(e.closeButton=!0),e.floating.closeButton=!0,i.updateGui(e)),this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomAdViewableImpression&&typeof this.utils.window.OCM.handleCustomAdViewableImpression=="function"?(e=this.utils.window.OCM.handleCustomAdViewableImpression(e,i,n),i.updateGui(e)):this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomAdImpression&&typeof this.utils.window.OCM.handleCustomAdImpression=="function"||!this.initialAvConfig?.floating&&this.aniview_config.vchack&&setTimeout(()=>{i.stopFloat()},2e3)}),i.on("AdVideoFirstQuartile",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"AdVideoFirstQuartile",n,r),this.handleAdVideoFirstQuartile(n)}),i.on("AdVideoMidpoint",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"AdVideoMidpoint",n,r),this.handleAdVideoMidpoint(n)}),i.on("AdVideoThirdQuartile",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"AdVideoThirdQuartile",n,r),this.handleAdVideoThirdQuartile(n)}),i.on("AdVideoComplete",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"AdVideoComplete",n,r),this.handleAdVideoComplete(n)}),i.on("AdClickThru",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"AdClickThru",n,r),this.handleAdClickThru(n)}),i.on("AdError",(n,r)=>{(this.config.debug||this.aniview_config.debug)&&console.log(re+"AdError",n,r),typeof this.utils.window.OCM.oipb=="function"&&this.utils.window.OCM.oipb(n,r)})}}}}});var Uo=V((Of,qo)=>{var Pf=Ai(),Rf=fn();qo.exports=async(t,e,i)=>{let n=i.hasOwnProperty("use_window_top")?i.use_window_top?window.top:window:window.top;if(i.services.hasOwnProperty("reaper")&&i.services.reaper.active){let s=Js();new s(e,i).run()}let r=await t(e).then(s=>(n.OCM.pageType=s,s));if(e.ocmChromeExt(i),await e.isAdBlocked(),n.OCM.adBlocked&&i.services.hasOwnProperty("blockthrough")&&i.services.blockthrough.active&&Ys()(i),i.services.hasOwnProperty("geolocation")&&i.services.geolocation.active&&await e.geolocation(),i.services.hasOwnProperty("fizz")&&i.services.fizz.active){let s=Zs();e.contentLoaded().then(()=>{new s(e,i).run()})}if(i.services.hasOwnProperty("mwi")&&i.services.mwi.active&&to()(i,e),i.services.hasOwnProperty("injected_tags")&&i.services.injected_tags.active){let s=no();new s(e,i,null).run()}if(i.services.hasOwnProperty("sticky")&&i.services?.sticky.active){let s=Ai();await new s(e,i).run()}if(i.services.hasOwnProperty("mobile_inread_sticky")&&i.services?.mobile_inread_sticky.active&&e.is_mobile){let s=fn();e.contentLoaded().then(()=>{new s(e,i).run()})}if(i.services.hasOwnProperty("lazyload")&&i.services.lazyload.active&&e.allowPageType(i.services.lazyload.page_types)){let s=yo();await new s(e,i).run()}else i.services.lazyload.active=!1,i.services.header_bidding.functionality=i.services.header_bidding.functionality.includes("lazyload")||i.services.header_bidding.functionality==="adserver"?"adserver":"no_adserver";if(i.services.hasOwnProperty("lazyload")&&i.services.hasOwnProperty("header_bidding")&&!i.services?.lazyload.active&&i.services?.header_bidding.active&&i.services?.header_bidding.hasOwnProperty("page_types")&&e.allowPageType(i.services?.header_bidding.page_types)){let s=Mn();await new s(e,i).prepare(!1)}if(i.services.hasOwnProperty("fou_analytics")&&i.services?.fou_analytics.active&&xo()(e,i),i.services.hasOwnProperty("outbrain")&&i.services.outbrain.active){let s=e.is_mobile?i.services?.outbrain.mobile.conditions.page_types:i.services?.outbrain.desktop.conditions.page_types;if(e.allowPageType(s)){let a=_o(),o=new a(e,i);e.contentLoaded().then(()=>{o.run()})}}if(e.getParameterByName("vast_url")){let s=Ao();e.waitFor("teads",()=>{setTimeout(()=>{new s(i,e).runDemoInread(e)},1e3)})}if(i.services.hasOwnProperty("story_teller")&&i.services?.story_teller.active){let s=Fo();e.contentLoaded().then(()=>{new s(e,i).run()})}if(i.services.hasOwnProperty("story_teller_v2")&&i.services.story_teller_v2.active){let s=Po();"requestIdleCallback"in window?window.requestIdleCallback(()=>{new s(e,i).run()},{timeout:1e3}):e.contentLoaded().then(()=>{new s(e,i).run()})}if(i.services.hasOwnProperty("vi")&&i.services?.vi.active){let s=e.is_mobile?i.services?.vi.mobile.conditions.page_types:i.services?.vi.desktop.conditions.page_types;if(e.allowPageType(s)){let a=Do();e.contentLoaded().then(()=>{new a(e,i).run()})}}if(i.services.hasOwnProperty("primis")&&i.services?.primis.active){let s=e.is_mobile?i.services?.primis.mobile.conditions.page_types:i.services?.primis.desktop.conditions.page_types;if(e.allowPageType(s)){let a=No();e.contentLoaded().then(()=>{new a(e,i).run()})}}if(i.services.hasOwnProperty("in_image")&&i.services?.in_image?.active){let s=Mo();new s(e,i).run()}if(i.services.hasOwnProperty("adlightning")&&i.services?.adlightning?.active&&Lo()(i),i.services.hasOwnProperty("teads_analytics")&&i.services?.teads_analytics?.active&&Ho()(i),i.services.hasOwnProperty("aniview")&&i.services?.aniview?.active){let s=Ln();new s(e,i).run()}}});var Go=V((Df,Ko)=>{var kc=async t=>new Promise((e,i)=>{e("ROS")});Ko.exports=kc});var $o=V((kf,Wo)=>{var Nc="[OCM][GPT] ",Bc=t=>{let e=t.hasOwnProperty("use_window_top")?t.use_window_top?window.top:window:window.top;window.googletag=window.googletag||{cmd:[]},(t.debug||t.services.gpt.debug)&&console.log(Nc+"Loading GPT library...");let i=document.createElement("script"),n=document.getElementsByTagName("script")[0],r="//securepubads.g.doubleclick.net/tag/js/gpt.js";i.async=!0,i.type="text/javascript",i.src=r,n.parentNode.insertBefore(i,n),window.googletag.cmd.push(()=>{t.services.gpt.collapseEmptyDivs[0]&&(t.services.gpt.collapseEmptyDivs[1]?googletag.pubads().collapseEmptyDivs(!0):googletag.pubads().collapseEmptyDivs()),t.services.gpt.enableSingleRequest&&googletag.pubads().enableSingleRequest(),t.services.gpt.setCentering&&googletag.pubads().setCentering(!0),t.services.gpt.disableInitialLoad&&googletag.pubads().disableInitialLoad(),googletag.enableServices()})};Wo.exports=Bc});var Xo=V((Nf,Jo)=>{var Mc=t=>{if((t.debug||t.services.gpt.debug)&&console.info("[OCM] Loading CMP library..."),!t.use_window_top){console.error("[OCM][CMP] Use window top to run CMP service");return}(function(){let e=window.location.hostname,i=document.createElement("script"),n=document.getElementsByTagName("script")[0],r="https://cmp.inmobi.com".concat("/choice/",t.services.cmp.network_id,"/",e,"/choice.js?tag_version=V3"),s=0,a=3,o;i.async=!0,i.type="text/javascript",i.src=r,n.parentNode.insertBefore(i,n);function l(){let p="__tcfapiLocator",c=[],h=window,m;function f(){let w=h.document,y=!!h.frames[p];if(!y)if(w.body){let S=w.createElement("iframe");S.style.cssText="display:none",S.name=p,w.body.appendChild(S)}else setTimeout(f,5);return!y}function b(){let w,y=arguments;if(y.length)if(y[0]==="setGdprApplies")y.length>3&&y[2]===2&&typeof y[3]=="boolean"&&(w=y[3],typeof y[2]=="function"&&y[2]("set",!0));else if(y[0]==="ping"){let S={gdprApplies:w,cmpLoaded:!1,cmpStatus:"stub"};typeof y[2]=="function"&&y[2](S)}else y[0]==="init"&&typeof y[3]=="object"&&(y[3]=Object.assign(y[3],{tag_version:"V3"})),c.push(y);else return c}function v(w){let y=typeof w.data=="string",S={};try{y?S=JSON.parse(w.data):S=w.data}catch{}let E=S.__tcfapiCall;E&&window.__tcfapi(E.command,E.version,function(C,x){let _={__tcfapiReturn:{returnValue:C,success:x,callId:E.callId}};y&&(_=JSON.stringify(_)),w&&w.source&&w.source.postMessage&&w.source.postMessage(_,"*")},E.parameter)}for(;h;){try{if(h.frames[p]){m=h;break}}catch{}if(h===window.top)break;h=h.parent}m||(f(),h.__tcfapi=b,h.addEventListener("message",v,!1))}l();let u=function(){let p=arguments;typeof window.__uspapi!==u&&setTimeout(function(){typeof window.__uspapi<"u"&&window.__uspapi.apply(window.__uspapi,p)},500)},g=function(){s++,window.__uspapi===u&&s<a?console.warn("USP is not accessible"):clearInterval(o)};typeof window.__uspapi>"u"&&(window.__uspapi=u,o=setInterval(g,6e3))})()};Jo.exports=Mc});var Qo=V((Bf,Yo)=>{var At="[OCM][IAB] ",jc=t=>{let e=window.top;return e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[],new Promise((i,n)=>{let r=s=>{s?(Lc(t),i(s)):n(s)};if(t.uses_cmp){let a=1,o=()=>{(t.debug||t.services.iab_compliance.debug)&&console.log(At+"Waiting for tcfapi"),typeof e.__tcfapi>"u"&&typeof e.__cmp>"u"?((t.debug||t.services.iab_compliance.debug)&&console.log(At+"tcfapi not found, retrying"),a++,a>=60?(e.googletag.cmd.push(()=>{e.googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0})}),r(!0)):setTimeout(o,100)):typeof e.__tcfapi<"u"?e.__tcfapi("addEventListener",2,function(l,u){if(u&&!l.eventStatus&&!l.gdprApplies&&((t.debug||t.services.iab_compliance.debug)&&console.log(At+"GDPR does not apply, run ads normally"),r(!0)),u&&(l.eventStatus==="tcloaded"||l.eventStatus==="useractioncomplete"))if((t.debug||t.services.iab_compliance.debug)&&console.log(At+"tcfapi found, calculating values"),t.use_window_top&&(e.OCM.consentData=l),!l.gdprApplies)(t.debug||t.services.iab_compliance.debug)&&console.log(At+"GDPR does not apply, run ads normally"),r(!0);else{t.use_window_top&&(e.OCM.gdprApplies=!0);let g=l.purpose.consents[1]===!0||l.purpose.legitimateInterests[1]===!0,p=l.purpose.consents[2]===!0||l.purpose.legitimateInterests[2]===!0,c=l.purpose.consents[3]===!0||l.purpose.legitimateInterests[3]===!0,h=l.purpose.consents[4]===!0||l.purpose.legitimateInterests[4]===!0,m=l.purpose.consents[7]===!0||l.purpose.legitimateInterests[7]===!0,f=l.purpose.consents[9]===!0||l.purpose.legitimateInterests[9]===!0,b=l.purpose.consents[10]===!0||l.purpose.legitimateInterests[10]===!0,v=l.vendor.consents[755]&&l.vendor.legitimateInterests[755],w=!1,y=!0,S=!1;v&&g&&p&&m&&f&&b&&(w=!0),g&&p&&c&&h&&m&&f&&b&&w?y=!1:g&&p&&!c&&!h&&m&&f&&b&&w&&(y=!0),f||(S=!1),t.use_window_top&&(e.OCM.hasPurposeOneConsent=g,e.OCM.hasPurposeTwoConsent=p,e.OCM.hasPurposeThreeConsent=c,e.OCM.hasPurposeFourConsent=h,e.OCM.hasPurposeSevenConsent=m,e.OCM.hasPurposeNineConsent=f,e.OCM.hasPurposeTenConsent=b,e.OCM.hasGoogleConsent=w,e.OCM.serveNonPersonalized=y,e.OCM.restrictDataProcessing=S),(t.debug||t.services.iab_compliance.debug)&&console.log(At+"GDPR applies",e.OCM),e.googletag.cmd.push(()=>{e.googletag.pubads().setPrivacySettings({nonPersonalizedAds:y,restrictDataProcessing:S})}),r(!0)}}):typeof e.__cmp<"u"?((t.debug||t.services.iab_compliance.debug)&&console.log(At+"cmp api found, run ads normally"),r(!0)):((t.debug||t.services.iab_compliance.debug)&&console.log(At+"no iab api found,nonPersonalizedAds true"),e.googletag.cmd.push(()=>{e.OCM.hasPurposeOneConsent=!1,e.OCM.hasPurposeTwoConsent=!1,e.OCM.hasPurposeThreeConsent=!1,e.OCM.hasPurposeFourConsent=!1,e.OCM.hasPurposeSevenConsent=!1,e.OCM.hasPurposeNineConsent=!1,e.OCM.hasPurposeTenConsent=!1,e.OCM.hasGoogleConsent=!1,e.OCM.serveNonPersonalized=!0,e.OCM.restrictDataProcessing=!0,e.googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0,restrictDataProcessing:!0})}),r(!0))};o()}else r(!0)})},Lc=t=>{let e,i,n,r=t.use_window_top?window.top:window,s=r.document.querySelectorAll("script[data-cmp-src]");if(s.length)for(let o of s){for(e=document.createElement("script"),i=Array.prototype.slice.call(o.attributes);n=i.pop();)n.nodeName==="data-cmp-src"?e.setAttribute("src",n.nodeValue):e.setAttribute(n.nodeName,n.nodeValue);o.parentNode.insertBefore(e,o),o.remove()}let a=r.document.querySelectorAll("script[data-cmp-script]");if(a.length)for(let o of a){for(e=document.createElement("script"),i=Array.prototype.slice.call(o.attributes);n=i.pop();)n.nodeName==="data-cmp-script"?e.setAttribute("type","text/javascript"):n.nodeName!=="type"&&e.setAttribute(n.nodeName,n.nodeValue);e.text=o.text,o.parentNode.insertBefore(e,o),o.remove()}};Yo.exports=jc});var zn=V((Mf,ea)=>{var zc=Ai(),Zo=Ln();window.OCM.mobstick_ran=!1;var Hc=t=>new Promise((e,i)=>{t.contentLoaded().then(()=>{}),window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push(()=>{googletag.pubads().addEventListener("slotRenderEnded",n=>{n.slot.getAdUnitPath().includes("dfp_floating_bolha")&&(n.isEmpty&&!window.OCM.mobstick_ran?(t.config.services.sticky.ads[0].active=!0,new zc(t,t.config).run(),window.OCM.mobstick_ran=!0,t.config.services.aniview.active=!0,t.config.services.aniview.mobile.vchack=!0,t.config.services.aniview.desktop.vchack=!0,new Zo(t,t.config).run()):(t.config.services.aniview.active=!0,new Zo(t,t.config).run()))})}),e(!0)});ea.exports=Hc});(()=>{let t=qn(),e=Rs(),i=new e(t);if(i.getParameterByName("ocm_dev")=="1"&&t.env==="prod"){let u=document.createElement("script");u.src=`//cdn.orangeclickmedia.com/tech/dev/${t.script_tag}/ocm.js?rand=${Math.round(Math.random()*1e9)}`,u.crossOrigin="anonymous",i.doc_head.append(u);return}let n=t.hasOwnProperty("use_window_top")?t.use_window_top?window.top:window:window.top;Array.prototype.containsArray||Object.defineProperty(Array.prototype,"containsArray",{enumerable:!1,value:function(u){let g={};for(let p=0;p<this.length;p++)g[this[p]]=p;return g.hasOwnProperty(u)}}),String.prototype.ocmStartsWith||Object.defineProperty(String.prototype,"ocmStartsWith",{value:function(u,g){let p=g>0?g|0:0;return this.substring(p,p+u.length)===u}}),n.googletag=n.googletag||{},n.googletag.cmd=n.googletag.cmd||[],n.googletag.cmd.push(()=>{n.googletag.pubads().setTargeting("ocm_domain",[n.location.hostname.replace("www.","")])}),n.OB_extId=n.location.hostname.replace("www.","");let r={pageType:window.top?.OCM?.pageType||window?.OCM?.pageType||"ROS",adBlocked:window.top?.OCM?.adBlocked||window.OCM?.adBlocked||!0,_log:i.config?.log?i.log:null,geo:window?.ADSQ?.response?.geo||null,ad_units:window.top?.OCM?.ad_units||window?.OCM?.ad_units||[],infi_article_count:1,init_ad_server_set:!1,site_categories:t?.site_categories||[]};n.OCM=n.OCM?{...n.OCM,...r}:r,i.getParameterByName("ocm_debug")&&(t.debug=!0);let a=Uo(),o=i.isMobile();n.OCM.isMobile=o;let l=Go();t.services.hasOwnProperty("gpt")&&t.services.gpt.active&&$o()(t),t.services.cmp.active&&t.services.cmp.network_id&&Xo()(t),t.services.iab_compliance.active?Qo()(t).then(async()=>{await a(l,i,t),await zn()(i)}).catch(g=>{console.error("[IAB COMPLIANCE] Error:",g)}):(async()=>(await a(l,i,t),await zn()(i)))()})();})();
