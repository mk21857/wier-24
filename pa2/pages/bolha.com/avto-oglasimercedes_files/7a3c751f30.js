import{F as t}from"./825e28468d.js";import"./2be7671a02.js";import"./f141f5a29b.js";import"./a20b5a7092.js";import"./eae60494e1.js";class e extends t{static childrenEl={button:".GeoLocationSelector-autoLocateButton",clear:".GeoLocationSelector-iconClose"};static events={"click .GeoLocationSelector-iconClose":"clear","click .GeoLocationSelector-autoLocateButton":"autoLocate"};constructor(t){super(t),this.props.isEmbeded||(this.cacheChildrenEl({input:this.props.input}),this.setup())}setup(t){this.$input.classList.add("disabled"),this.$input.disabled=!0}autoLocate(){return this.setState({loading:!0}),this.fetch().then((t=>{this.setState({disabled:!1,loading:!1,coordinates:{lat:t.coords.latitude,lng:t.coords.longitude}})})).catch((()=>{this.setState({loading:!1})}))}fetch(){return new Promise(((t,e)=>{navigator.geolocation?(this.setState({autoLocateError:!1}),navigator.geolocation.getCurrentPosition((o=>{if(this.props.isRangeBlocked())return this.props.parent.props.onConflict(),void e();t(o)}),(()=>{this.setState({autoLocateError:!0}),e()}),{timeout:1e4,maximumAge:6e4,enableHighAccuracy:!0})):this.setState({autoLocateError:!0})}))}clear(){this.setState({disabled:!0,coordinates:{lat:"",lng:""}})}render(t,e){"disabled"!==t&&"coordinates"!==t&&"autoLocateError"!==t&&"loading"!==t||this.props.update({[t]:e}),"coordinates"===t&&(this.$input.value=e.lat&&e.lng?`${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`:""),"disabled"===t&&(this.$input.classList.toggle("disabled",e),this.$clear.classList.toggle("hidden",e))}}export{e as default};
