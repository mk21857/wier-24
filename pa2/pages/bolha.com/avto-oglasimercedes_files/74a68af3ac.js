import{_ as t}from"./f141f5a29b.js";import{F as e}from"./825e28468d.js";import{N as r}from"./f1e6940fcf.js";import"./7abd8ddb57.js";import{t as i}from"./7c6ae762e4.js";import"./2be7671a02.js";import"./a20b5a7092.js";import"./eae60494e1.js";import"./d896c9814e.js";import"./436d401516.js";class o extends e{static events={"click .GeoLocationSelector-rangeConflictClear":"clearRangeConflict","click .GeoLocationSelector-hierarchyConflictClear":"clearHierarchyConflict"};constructor(t){super(t),this.mountComponents()}mountComponents(){this.props.range&&t((()=>import("./78b0673c4f.js")),["78b0673c4f.js","f141f5a29b.js","825e28468d.js","2be7671a02.js","a20b5a7092.js","eae60494e1.js","35000cdd91.js","f1e6940fcf.js","d896c9814e.js","436d401516.js","7abd8ddb57.js","7c6ae762e4.js"]).then((({default:t})=>this.mountRangeSelector(t))),this.props.hierarchy&&t((()=>import("./f52dac25de.js")),["f52dac25de.js","2af5e86cb3.js","a20b5a7092.js","825e28468d.js","2be7671a02.js","f141f5a29b.js","eae60494e1.js","4ea6aa4332.js","3c067f2405.js","e5795dfffe.js","7abd8ddb57.js","7c6ae762e4.js","de2ef5ef52.js","bf72b816f7.js","5d1eedeb9e.js"]).then((({standard:t,hideable:e})=>this.mountHierarchySelector("hidden"===this.props.hierarchy.componentType?e:t)))}mountRangeSelector(t){this.cacheChildrenEl({range:this.props.range.radius.el}),this.rangeSelector=new t(Object.assign({},this.props.range,{parent:this,isRangeBlocked:()=>!!this.hierarchySelector&&this.hierarchySelector.isDisabled(),resolveBlocker:()=>{this.clearRangeConflict()},onConflict:()=>{this.setState({rangeConflict:!0})},onDisabled:()=>{this.setState({hierarchyConflict:!1})}}))}mountHierarchySelector(t){this.hierarchySelector=new t(Object.assign({},this.props.hierarchy,{isHierarchyBlocked:()=>!!this.rangeSelector&&!this.rangeSelector.isDisabled(),onConflict:()=>{this.setState({hierarchyConflict:!0})},onClear:()=>{this.setState({rangeConflict:!1})}}))}render(t,e){"hierarchyConflict"===t&&this.toggleHierarchyConflict(e),"rangeConflict"===t&&this.toggleRangeConflict(e)}toggleHierarchyConflict(t){this.removeSideEffect("hierarchyConflict"),t&&this.addSideEffect((()=>{const t=new r({isInfo:!0,message:`\n\t\t\t\t\t\t<a class="GeoLocationSelector-hierarchyConflictClear">\n\t\t\t\t\t\t\t${i("geolocation.web.filter.delete")}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t${i("geolocation.web.filter.hierarchy_conflict")}\n\t\t\t\t\t`});return this.$el.appendChild(t.$el),()=>{this.$el.removeChild(t.$el),t.remove()}}),"hierarchyConflict")}toggleRangeConflict(t){this.removeSideEffect("rangeConflict"),t&&this.addSideEffect((()=>{const t=new r({isInfo:!0,message:`\n\t\t\t\t\t\t<a class="GeoLocationSelector-rangeConflictClear">\n\t\t\t\t\t\t\t${i("geolocation.web.filter.delete")}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t${i("geolocation.web.filter.range_conflict")}\n\t\t\t\t\t`});return this.$range.parentNode.insertBefore(t.$el,this.$range),()=>{this.$range.parentNode.removeChild(t.$el),t.remove()}}),"rangeConflict")}clearRangeConflict(){this.hierarchySelector.clear(),this.setState({rangeConflict:!1})}clearHierarchyConflict(){this.rangeSelector.clear(),this.setState({hierarchyConflict:!1})}}export{o as default};
